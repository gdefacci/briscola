{"version":3,"sources":["webpack:///webpack/bootstrap 23263cc9f63f9d11d0cd","webpack:///./Main.tsx","webpack:///../~/ddd-briscola-app/src/index.ts","webpack:///../~/ddd-briscola-app/src/lib/App.ts","webpack:///../~/ddd-briscola-app/src/lib/CommandsDispatcher.ts","webpack:///../~/ddd-briscola-app/src/lib/ApplicationState.ts","webpack:///../~/flib/src/index.ts","webpack:///../~/flib/src/lib/Arrays.ts","webpack:///../~/flib/src/lib/Option.ts","webpack:///../~/flib/src/lib/isNull.ts","webpack:///../~/flib/src/lib/JsMap.ts","webpack:///../~/flib/src/lib/lazy.ts","webpack:///../~/flib/src/lib/fail.ts","webpack:///../~/flib/src/lib/Either.ts","webpack:///../~/flib/src/lib/Try.ts","webpack:///../~/ddd-briscola-app/src/lib/PlayersService.ts","webpack:///../~/ddd-briscola-model/src/index.ts","webpack:///../~/ddd-briscola-model/src/lib/board.ts","webpack:///../~/ddd-briscola-model/src/lib/competition.ts","webpack:///../~/ddd-briscola-model/src/lib/player.ts","webpack:///../~/nrest-fetch/src/index.ts","webpack:///../~/nrest-fetch/src/lib/model.ts","webpack:///../~/nrest-fetch/src/lib/annotations.ts","webpack:///../~/nrest-fetch/src/lib/Mappings.ts","webpack:///../~/nrest-fetch/src/lib/ObjectsCache.ts","webpack:///../~/nrest-fetch/src/lib/ObjectValueBuilder.ts","webpack:///../~/nrest-fetch/src/lib/ResourceFetch.ts","webpack:///../~/nrest-fetch/src/lib/httpCacheFactory.ts","webpack:///../~/nrest-fetch/src/lib/TestFetcher.ts","webpack:///../~/ddd-briscola-model/src/lib/Util.ts","webpack:///../~/ddd-briscola-model/src/lib/competitionEvents.ts","webpack:///../~/ddd-briscola-model/src/lib/game.ts","webpack:///../~/ddd-briscola-model/src/lib/gameEvents.ts","webpack:///../~/ddd-briscola-model/src/lib/sitemap.ts","webpack:///../~/ddd-briscola-model/src/lib/EventAndState.ts","webpack:///../~/ddd-briscola-model/src/lib/input.ts","webpack:///../~/ddd-briscola-app/src/lib/Util.ts","webpack:///../~/ddd-briscola-app/src/lib/PlayerService.ts","webpack:///../~/ddd-briscola-app/src/lib/ApplicationDispatch.ts","webpack:///../~/ddd-briscola-app/src/lib/Reducers.ts","webpack:///../~/ddd-briscola-app/src/lib/Command.ts","webpack:///./lib/listeners.ts","webpack:///./lib/Board.tsx","webpack:///./lib/cssClasses.ts","webpack:///./lib/cards.tsx","webpack:///./lib/EventsLog.tsx","webpack:///./lib/GameResult.tsx","webpack:///./lib/TabPane.tsx","webpack:///./lib/PlayerDeck.tsx","webpack:///./lib/PlayerLogin.tsx","webpack:///./lib/Players.tsx","webpack:///./styles/App.styl"],"names":[],"mappings":"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","file":"ddd-briscola-view.browser.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 23263cc9f63f9d11d0cd\n **/","import { App, Commands } from \"ddd-briscola-app\"\r\nimport { createBoardCommandListener } from \"./lib/listeners\"\r\nimport { Board } from \"./lib/Board\"\r\n\r\nimport './styles/App.styl';\r\n\r\nlet app: App\r\n\r\nconst reactContainer = \"react-container\"\r\n\r\nexport function main() {\r\n  app = App.create(\"site-map\")\r\n  const el = document.getElementById(reactContainer)\r\n  if (el !== null) {\r\n    app.displayChannel.subscribe(board => {\r\n      const boardProps = createBoardCommandListener(board, (cmd) => app.exec(cmd))\r\n      console.log(\"boardProps \")\r\n      console.log(boardProps)\r\n      ReactDOM.render(<Board {...boardProps}></Board>, el)\r\n    })\r\n    app.exec(new Commands.StarApplication())\r\n  } else {\r\n     alert(\"cant find element \" + reactContainer)\r\n  }\r\n}\r\n\r\nwindow.addEventListener(\"load\", (event) => main())\n\n\n/** WEBPACK FOOTER **\n ** ./Main.tsx\n **/","export * from \"./lib/App\"\r\n\r\nimport * as Commands from \"./lib/Command\"\r\n\r\nexport {Commands as Commands}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/index.ts\n **/","import { Command } from \"./Command\"\r\nimport { Board } from \"ddd-briscola-model\"\r\nimport commandDispatcher from \"./CommandsDispatcher\"\r\nimport { ApplicationState, initialState } from \"./ApplicationState\"\r\nimport applicationDispatch  from \"./ApplicationDispatch\"\r\nimport * as Reducers from \"./Reducers\"\r\n\r\nexport interface App {\r\n  displayChannel: Rx.Observable<Board>\r\n  exec(cmd: Command): void\r\n}\r\n\r\nexport module App {\r\n  export function create(entryPoint: string): App {\r\n    return new AppImpl(entryPoint, applicationDispatch())\r\n  }\r\n}\r\n\r\nclass AppImpl implements App {\r\n\r\n  displayChannel: Rx.Observable<Board>\r\n  dispatcher: Promise<(cmd: Command) => Promise<ApplicationState>>\r\n  private changesChannel= new Rx.ReplaySubject<ApplicationState>()\r\n\r\n  constructor(entryPoint: string, reducerFunction:(cmd: Command) => Reducers.AsynchStateChange) {\r\n    const initState = initialState(entryPoint)\r\n    this.dispatcher = initState.then(state =>\r\n      commandDispatcher(this.changesChannel, reducerFunction, state)\r\n    )\r\n    this.displayChannel = Rx.Observable.fromPromise(this.dispatcher).flatMap(d => this.changesChannel.map(s => s.board));\r\n    this.displayChannel.subscribe(ev => {\r\n      console.log(\"display channel \")\r\n      console.log(ev)\r\n      console.log(\"***************\")\r\n    }, err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  exec(cmd: Command): void {\r\n    this.dispatcher.then(dispatch => {\r\n      dispatch(cmd).catch(err => console.error(err))\r\n    });\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/App.ts\n **/","export default function commandDispatcher<C, S>(\r\n  changesChannel: Rx.ReplaySubject<S>,\r\n  dispatchFuntion: (cmdId: C) => ((state: S, dispatch: (cmd: C) => Promise<S>) => Promise<S>),\r\n  initialState: S): (cmd: C) => Promise<S> {\r\n\r\n  let currentState: S = initialState\r\n  const dispatch: (cmd: C) => Promise<S> = (cmd: C) => {\r\n    const reducer = dispatchFuntion(cmd)\r\n    return reducer(currentState, dispatch).then(newState => {\r\n      currentState = newState\r\n      changesChannel.onNext(newState)\r\n      return newState\r\n    })\r\n  }\r\n  return dispatch;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/CommandsDispatcher.ts\n **/","import { Option, JsMap } from \"flib\"\r\nimport { PlayersService } from \"./PlayersService\"\r\nimport { PlayerService } from \"./PlayerService\"\r\nimport { ResourceFetch, ExtraPropertiesStrategy, httpCacheFactory, mapping } from \"nrest-fetch\"\r\nimport { Board, SiteMap, CurrentPlayer, GameState, CompetitionState } from \"ddd-briscola-model\"\r\nimport { Http } from \"./Util\"\r\n\r\nexport interface ApplicationState {\r\n  playersService: PlayersService\r\n  playerService: Option<PlayerService>\r\n  createPlayerService: (player: CurrentPlayer) => PlayerService\r\n  gameStateMap:JsMap<GameState>\r\n  competitionStateMap:JsMap<CompetitionState>\r\n  board: Board\r\n}\r\n\r\nexport function initialState(entryPoint: string): Promise<ApplicationState> {\r\n  const reqFactory = Http.createRequestFactory({\r\n    method: \"GET\"\r\n  })\r\n  const resourceFetch = new ResourceFetch(ExtraPropertiesStrategy.copy, httpCacheFactory(reqFactory, Http.jsonResponseReader))\r\n  const createPlayerService = (player: CurrentPlayer) => new PlayerService(resourceFetch, player)\r\n\r\n  return resourceFetch.fetchResource(entryPoint, mapping(SiteMap)).then(siteMap => {\r\n    return {\r\n      playersService: new PlayersService(resourceFetch, siteMap),\r\n      playerService: Option.None,\r\n      board: Board.empty(),\r\n      gameStateMap:{},\r\n      competitionStateMap:{},\r\n      createPlayerService\r\n    }\r\n  })\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/ApplicationState.ts\n **/","export {default as Arrays} from \"./lib/Arrays\"\r\nexport {default as JsMap} from \"./lib/JsMap\"\r\nexport {default as Option} from \"./lib/Option\"\r\nexport {default as lazy} from \"./lib/lazy\"\r\nexport {default as fail} from \"./lib/fail\"\r\nexport {default as Either} from \"./lib/Either\"\r\nexport {default as Try} from \"./lib/Try\"\r\n\r\nimport isNull from \"./lib/isNull\"\r\n\r\nexport {isNull}\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/index.ts\n **/","import {default as Option} from \"./Option\"\r\nimport {default as JsMap} from \"./JsMap\"\r\nimport isNull from \"./isNull\"\r\n\r\nmodule Arrays {\r\n\r\n  export function flatMap<A,B>(arr:A[], f:(a:A) => B[]):B[] {\r\n    let res:B[] = [];\r\n    arr.forEach( a => res = res.concat(f(a)))\r\n    return res;\r\n  }\r\n\r\n  export function find<A>(arr: A[], pred: (a: A) => boolean): Option<A> {\r\n    const opt = findIndex<A>(arr, pred)\r\n    if (opt.isDefined()) return opt.map<A>( idx => arr[idx] )\r\n    else return Option.None\r\n  }\r\n\r\n  export function findIndex<A>(arr: A[], pred: (a: A) => boolean): Option<number> {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      const v = arr[i]\r\n      if (pred(v)) return Option.some<number>(i)\r\n    }\r\n    return Option.None;\r\n  }\r\n\r\n  export function split<A>(arr:A[], pred:(a:A) => boolean):[A[], A[]] {\r\n    const res1:A[] = []\r\n    const res2:A[] = []\r\n    arr.forEach( i => {\r\n      if (pred(i)) res1.push(i)\r\n      else res2.push(i)\r\n    })\r\n    return [res1, res2];\r\n  }\r\n\r\n  export function exists<A>(arr:A[], pred:(a:A) => boolean):boolean {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      const v = arr[i]\r\n      if (pred(v)) return true\r\n    }\r\n    return false;\r\n  }\r\n\r\n  export function foldLeft<A,B>(arr:A[], z:B, f:(acc:B,i:A) => B):B {\r\n    let res = z\r\n    arr.forEach( i => res = f(res,i))\r\n    return res\r\n  }\r\n\r\n  export function foldRight<A,B>(arr:A[], z:B, f:(i:A, acc:B) => B):B {\r\n    let res = z\r\n    const len = arr.length\r\n    for (let idx = len-1; idx >= 0; idx--) {\r\n      res = f(arr[idx], res)\r\n    }\r\n    return res\r\n  }\r\n\r\n  export function groupBy<A>(arr:A[], group:(a:A) => string):JsMap<A[]> {\r\n    const res:JsMap<A[]> = {}\r\n    const addToMap = (k:string, v:A) => {\r\n      let arr = res[k]\r\n      if (isNull(arr)) {\r\n        res[k] = [v]\r\n      } else {\r\n        arr.push(v)\r\n      }\r\n    }\r\n    arr.forEach( e => addToMap(group(e), e))\r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport default Arrays\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/Arrays.ts\n **/","class Option<T> {\r\n  public static None = new Option<any>(null);\r\n  public static some<T>(t:T):Option<T> {\r\n    return new Option<T>(t)\r\n  }\r\n  public static option<T>(v:T|null|undefined):Option<T> {\r\n    return new Option<T>(v);\r\n  }\r\n\r\n  constructor(public value: T | null | undefined) {\r\n  }\r\n  isEmpty(): boolean {\r\n    return this.value === null || this.value === undefined\r\n  }\r\n  isDefined() {\r\n    return !this.isEmpty()\r\n  }\r\n  fold<B>(fnone: () => B, fsome: (some: T) => B): B {\r\n    return (this.value === null || this.value === undefined) ? fnone() : fsome(this.value)\r\n  }\r\n  forEach(f: (a: T) => void): void {\r\n    if (!(this.value === null || this.value === undefined)) f(this.value)\r\n  }\r\n  map<B>(f: (a: T) => B): Option<B> {\r\n    return this.fold<Option<B>>(() => Option.None, v => new Option<B>(f(v)))\r\n  }\r\n  flatMap<B>(f: (a: T) => Option<B>): Option<B> {\r\n    return this.fold<Option<B>>(() => Option.None, v => f(v))\r\n  }\r\n  getOrElse<B>(f: () => B): T | B {\r\n    return this.fold<T | B>(() => f(), v => v)\r\n\r\n  }\r\n  orElse<B>(f: () => Option<B>): Option<T | B> {\r\n    return this.fold<Option<T | B>>(f, v => new Option<T>(v))\r\n  }\r\n\r\n  zip<B>(b: Option<B>): Option<[T, B]> {\r\n    if (this.value !== null && this.value !== undefined) {\r\n      const v:T = this.value\r\n      return b.map( (b1: B) => {\r\n        const r:[T, B] = [v, b1]\r\n        return r;\r\n      })\r\n    } else {\r\n      return Option.None;\r\n    }\r\n  }\r\n  toArray(): T[] {\r\n    return this.fold<T[]>(() => [], v => [v])\r\n  }\r\n  toString(): string {\r\n    return this.fold(() => \"None\", v => `Some(${v})`)\r\n  }\r\n}\r\n\r\nexport default Option\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/Option.ts\n **/","export default function<T>(a:T|undefined|null):a is (null|undefined) {\r\n\treturn a === undefined || a === null;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/isNull.ts\n **/","interface JsMap<A> {\r\n  [s:string]:A  \r\n}\r\n\r\nmodule JsMap  {\r\n  export type Entry<T> = {key:string, value:T}\r\n  \r\n  export function create<T>(kps:Entry<T>[]) {\r\n    const res:JsMap<T> = {}\r\n    kps.forEach( kp => res[kp.key] = kp.value);\r\n    return res;\r\n  }\r\n  export function forEach<A>(mp:JsMap<A>, f:(k:string, v:A) => void) {\r\n    Object.keys(mp).forEach( k => f(k, mp[k]) )\r\n  }\r\n  export function map<A,B>(mp:JsMap<A>, f:(k:string, v:A) => B):JsMap<B> {\r\n    const res:JsMap<B> = {}\r\n    JsMap.forEach(mp, (k,v) => res[k] = f(k,v) );\r\n    return res;\r\n  }\r\n  export function merge<A>(mps:JsMap<A>[]):JsMap<A> {\r\n    const res:JsMap<A> = {}\r\n    mps.forEach( mp => JsMap.forEach(mp, (k,v) => res[k] = v ))\r\n    return res;\r\n  }\r\n  export function flatMap<A,B>(mp:JsMap<A>, f:(k:string, v:A) => JsMap<B>):JsMap<B> {\r\n    const res:JsMap<B> = {}\r\n    JsMap.forEach(mp, (k,v) => JsMap.forEach(f(k,v), (k,v) => res[k] = v) );\r\n    return res;\r\n  }\r\n}\r\n\r\nexport default JsMap\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/JsMap.ts\n **/","import {default as Option} from \"./Option\"\r\n\r\nfunction lazy<T>(f:() => T):() => T {\r\n  let value:Option<T> = Option.None;\r\n  return () => {\r\n    return value.fold<T>(() => {\r\n      const v:T = f()\r\n      value = Option.some(v)\r\n      return v;\r\n    }, v => v)\r\n  }\r\n}\r\n\r\n/*not used */\r\nclass Lazy<T> {\r\n  value:() => T\r\n  constructor(f:() => T) {\r\n    this.value = lazy(f)\r\n  }\r\n  map<T1>(f:(v:T) => T1):Lazy<T1> {\r\n    return new Lazy( () => f(this.value()) )\r\n  }\r\n  flatMap<T1>(f:(v:T) => Lazy<T1>):Lazy<T1> {\r\n    return new Lazy( () => f(this.value()).value() )\r\n  }\r\n}\r\n\r\nexport default lazy;\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/lazy.ts\n **/","function fail<T>(msg:string):T {\r\n  throw new Error(msg);\r\n}\r\n\r\nexport default fail\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/fail.ts\n **/","export type Disj<L, R> = [L, null] | [null, R]\r\n\r\nfunction isLeft<L, R>(v: Disj<L, R>): v is [L, null] {\r\n  return v[0] != null;\r\n}\r\n\r\nclass Either<L, R> {\r\n  public static right<R>(t: R) {\r\n    return new Either<any, R>([null, t]);\r\n  }\r\n  public static left<L>(l: L) {\r\n    return new Either<L, any>([l, null]);\r\n  }\r\n  constructor(private value: Disj<L, R>) {\r\n  }\r\n  fold<T1>(onError: (err: L) => T1, onSuccess: (a: R) => T1): T1 {\r\n    if (isLeft(this.value)) return onError(this.value[0]);\r\n    else return onSuccess(this.value[1]);\r\n  }\r\n  isLeft() { return this.fold(() => true, () => false) }\r\n  isRight() { return this.fold(() => true, () => false) }\r\n  map<B>(f: (a: R) => B): Either<L, B> {\r\n    return this.fold<Either<L, B>>((l: L) => Either.left(l), (r: R) => Either.right(f(r)))\r\n  }\r\n  flatMap<B>(f: (a: R) => Either<L, B>): Either<L, B> {\r\n    return this.fold((err) => Either.left(err), (v) => f(v))\r\n  }\r\n  leftMap<B>(f: (a: L) => B): Either<B, R> {\r\n    return this.fold<Either<B, R>>((l: L) => Either.left(f(l)), (r: R) => Either.right(r))\r\n  }\r\n}\r\n\r\nexport default Either\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/Either.ts\n **/","export type TryValue<T> = [Error, null] | [null, T]\r\n\r\nfunction isLeft<T>(v:TryValue<T>):v is [Error, null] {\r\n  return v[0] != null;\r\n}\r\n\r\nclass Try<T> {\r\n  public static fromValue<T>(v:() => T) {\r\n    try {\r\n      return Try.success(v())\r\n    } catch (e) {\r\n      return Try.failure(e)\r\n    }\r\n  }\r\n  public static success<T>(t:T) {\r\n    return new Try<T>([null, t]);\r\n  }\r\n  public static failure(err:Error) {\r\n    return new Try<any>([err, null]);\r\n  }\r\n  constructor(private value:TryValue<T>) {\r\n  }\r\n  fold<T1>( onError:(err:Error) => T1, onSuccess:(a:T) => T1):T1 {\r\n    if (isLeft(this.value)) return onError(this.value[0]);\r\n    else return onSuccess(this.value[1]);\r\n  }\r\n  isEmpty() { return this.fold(() => true, () => false)}\r\n  isDefined() { return this.fold(() => true, () => false)}\r\n  map<B>(f:(a:T) => B):Try<B> {\r\n    return this.fold((err) => Try.failure(err), (v) => Try.fromValue(() => f(v)) )\r\n  }\r\n  flatMap<B>(f:(a:T) => Try<B>):Try<B> {\r\n    try {\r\n      return this.fold((err) => Try.failure(err), (v) => f(v))\r\n    } catch(e) {\r\n      return Try.failure(e)\r\n    }\r\n  }\r\n  toPromise():Promise<T> {\r\n    return this.fold( err => Promise.reject(err), v => Promise.resolve(v))\r\n  }\r\n}\r\n\r\nexport default Try\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/Try.ts\n **/","import {CurrentPlayer, Player, PlayersCollection, SiteMap, Input} from \"ddd-briscola-model\"\r\n\r\nimport {ResourceFetch, mapping} from \"nrest-fetch\"\r\nimport {Http} from \"./Util\"\r\n\r\nexport class PlayersService {\r\n\tconstructor(private resourceFetch:ResourceFetch, private siteMap: SiteMap) {\r\n\t}\r\n\tallPlayers():Promise<Player[]> {\r\n      return this.resourceFetch.fetchResource(this.siteMap.players, mapping(PlayersCollection)).then( c => c.members )\r\n    }\r\n\tplayer(playerSelf: string):Promise<Player> {\r\n      return this.resourceFetch.fetchResource(playerSelf, mapping(Player))\r\n    }\r\n\tcreatePlayer(name: string, password:string):Promise<CurrentPlayer> {\r\n    return Http.POST<Input.Player>(this.siteMap.players, {\r\n      name: name,\r\n      password:password\r\n    }).then( resp => {\r\n        return resp.json().then( pl => this.resourceFetch.fetchObject(pl, mapping(CurrentPlayer)) )\r\n    })\r\n  }\r\n  logon(name: string, password:string):Promise<CurrentPlayer>  {\r\n    return Http.POST<Input.Player>(this.siteMap.playerLogin, {\r\n      name: name,\r\n      password:password\r\n    }).then( resp => resp.json().then( pl => this.resourceFetch.fetchObject(pl, mapping(CurrentPlayer)) ) )\r\n  }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/PlayersService.ts\n **/","export * from \"./lib/board\"\r\nexport * from \"./lib/competition\"\r\nexport * from \"./lib/competitionEvents\"\r\nexport * from \"./lib/game\"\r\nexport * from \"./lib/gameEvents\"\r\nexport * from \"./lib/model\"\r\nexport * from \"./lib/player\"\r\nexport * from \"./lib/sitemap\"\r\nexport * from \"./lib/EventAndState\"\r\n\r\nimport * as Input from \"./lib/input\";\r\n\r\nexport {Input}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/index.ts\n **/","import {JsMap, Option} from \"flib\"\r\nimport {GameState, ActiveGameState, FinalGameState} from \"./game\"\r\nimport {BriscolaEvent} from \"./gameEvents\"\r\nimport {CompetitionState} from \"./competition\"\r\nimport {CompetitionEvent} from \"./competitionEvents\"\r\nimport {Player, PlayerEvent} from \"./player\"\r\nimport * as Input from \"./input\"\r\n\r\nexport module Board {\r\n  export function empty():Board {\r\n    return {\r\n      player:Option.None,\r\n      players:[],\r\n      currentGame:Option.None,\r\n      activeGames:{},\r\n      finishedGames:{},\r\n      engagedCompetitions:{},\r\n      competitionSelectedPlayers:{},\r\n      competitionKind:\"single-match\",\r\n      competitionDeadlineKind: \"all-players\",\r\n      eventsLog:[],\r\n      viewFlag:ViewFlag.normal,\r\n      config:{\r\n        minPlayersNumber:2,\r\n        maxPlayersNumber:8\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n  * FIXME fetch from server, put inside SiteMap?\r\n  */\r\nexport interface AppConfig {\r\n  minPlayersNumber:number\r\n  maxPlayersNumber:number\r\n}\r\n\r\nexport enum ViewFlag {\r\n  normal, showPlayerCards\r\n}\r\n\r\nexport interface Board {\r\n  config:AppConfig\r\n\r\n  player:Option<Player>\r\n  players:Player[]\r\n\r\n  currentGame:Option<GameState>\r\n  activeGames:JsMap<ActiveGameState>\r\n  finishedGames:JsMap<FinalGameState>\r\n\r\n  engagedCompetitions:JsMap<CompetitionState>\r\n  competitionSelectedPlayers:JsMap<boolean>\r\n  competitionKind:Input.MatchKind\r\n  competitionDeadlineKind: Input.CompetitionStartDeadline\r\n\r\n  eventsLog:(BriscolaEvent | CompetitionEvent | PlayerEvent)[]\r\n\r\n  viewFlag:ViewFlag\r\n}\r\n\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/board.ts\n **/","import {Option} from \"flib\"\r\nimport {Path} from \"./model\"\r\nimport {Player} from \"./player\"\r\nimport {arrayOfLinks, convert, Value, ChoiceValue, Lazy} from \"nrest-fetch\"\r\nimport {toEnum} from \"./Util\"\r\n\r\nexport enum MatchKindKind {\r\n  singleMatch, numberOfGamesMatchKind, targetPointsMatchKind\r\n}\r\n\r\nexport enum CompetitionStateKind {\r\n  open, dropped, fullfilled\r\n}\r\n\r\nexport enum CompetitionStartDeadlineKind {\r\n  allPlayers, onPlayerCount\r\n}\r\n\r\nexport type CompetitionStartDeadline = AllPlayers | OnPlayerCount\r\n\r\nexport const toCompetitionStartDeadline:() => ChoiceValue<any> = Lazy.choose(\"CompetitionStartDeadline\", [\r\n  a => a.kind === CompetitionStartDeadlineKind[CompetitionStartDeadlineKind.allPlayers],\r\n  () => AllPlayers\r\n], [\r\n  a => a.kind === CompetitionStartDeadlineKind[CompetitionStartDeadlineKind.onPlayerCount],\r\n  () => OnPlayerCount\r\n])\r\n\r\nexport class AllPlayers {\r\n  get kind(): CompetitionStartDeadlineKind {\r\n    return CompetitionStartDeadlineKind.allPlayers\r\n  }\r\n}\r\n\r\nexport class OnPlayerCount {\r\n  count: number\r\n  get kind(): CompetitionStartDeadlineKind {\r\n    return CompetitionStartDeadlineKind.onPlayerCount\r\n  }\r\n}\r\n\r\nexport type MatchKind = SingleMatch | NumberOfGamesMatchKind | TargetPointsMatchKind\r\n\r\n/*\r\nexport function toMatchKind(kind:string):MatchKind {\r\n  switch(kind) {\r\n    case MatchKindKind[MatchKindKind.singleMatch] : return new SingleMatch\r\n    case MatchKindKind[MatchKindKind.numberOfGamesMatchKind] :return new NumberOfGamesMatchKind\r\n    case MatchKindKind[MatchKindKind.targetPointsMatchKind] :return new TargetPointsMatchKind\r\n    default: throw new Error(\"invalid match kind \"+kind)\r\n  }\r\n}\r\n*/\r\nexport const matchKindChoice = Lazy.choose(\"MatchKind\", [\r\n  (a) => a.kind === MatchKindKind[MatchKindKind.singleMatch],\r\n  () => SingleMatch\r\n], [\r\n  (a) => a.kind === MatchKindKind[MatchKindKind.targetPointsMatchKind],\r\n  () => TargetPointsMatchKind\r\n])\r\n\r\nexport class SingleMatch {\r\n  get kind(): MatchKindKind {\r\n    return MatchKindKind.singleMatch\r\n  }\r\n}\r\n\r\nexport class NumberOfGamesMatchKind {\r\n  numberOfMatches: number\r\n  get kind(): MatchKindKind {\r\n    return MatchKindKind.numberOfGamesMatchKind\r\n  }\r\n}\r\n\r\nexport class TargetPointsMatchKind {\r\n  winnerPoints: number\r\n  get kind(): MatchKindKind {\r\n    return MatchKindKind.numberOfGamesMatchKind\r\n  }\r\n}\r\n\r\nexport class Competition {\r\n  @convert( arrayOfLinks(Player) )\r\n  players: Player[]\r\n\r\n  @convert(matchKindChoice)\r\n  kind: MatchKind\r\n\r\n  @convert(toCompetitionStartDeadline)\r\n  deadline: CompetitionStartDeadline\r\n}\r\n\r\nconst stringToCompetitionStateKind = Value.string().map(toEnum(CompetitionStateKind, \"CompetitionStateKind\"))\r\n\r\nexport class CompetitionState {\r\n  self: Path\r\n\r\n  @convert(() => stringToCompetitionStateKind)\r\n  kind: CompetitionStateKind\r\n\r\n  @convert()\r\n  competition: Competition\r\n\r\n  @convert(arrayOfLinks(Player))\r\n  acceptingPlayers: Player[]\r\n  @convert(arrayOfLinks(Player))\r\n  decliningPlayers: Player[]\r\n\r\n  @convert(Value.option(Value.string))\r\n  accept: Option<Path>\r\n  @convert(Value.option(Value.string))\r\n  decline: Option<Path>\r\n}\r\n\r\nexport const competitionStateChoice = Lazy.choose(\"CompetitionState\", [\r\n  a => a.kind ===CompetitionStateKind[CompetitionStateKind.dropped],\r\n  () => CompetitionState\r\n], [\r\n  a => a.kind ===CompetitionStateKind[CompetitionStateKind.fullfilled],\r\n  () => CompetitionState\r\n], [\r\n  a => a.kind ===CompetitionStateKind[CompetitionStateKind.open],\r\n  () => CompetitionState\r\n])\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/competition.ts\n **/","import { DomainEvent, Path } from \"./model\"\r\nimport { link, arrayOfLinks, convert, ChoiceValue, JsConstructor, Lazy } from \"nrest-fetch\"\r\n\r\nexport class Player {\r\n  self: Path\r\n  name: string\r\n}\r\n\r\nexport class CurrentPlayer extends Player {\r\n  webSocket: Path\r\n  createCompetition: Path\r\n}\r\n\r\nexport enum PlayerEventKind {\r\n  playerLogOn, playerLogOff\r\n}\r\n\r\nexport class Team {\r\n  self: Path\r\n  name: string\r\n  @convert(arrayOfLinks(Player))\r\n  players: Player[]\r\n}\r\n\r\nexport type PlayerEvent = PlayerLogOn | PlayerLogOff\r\n\r\nexport class PlayerLogOn implements DomainEvent {\r\n  get eventName() {\r\n    return PlayerEventKind[PlayerEventKind.playerLogOn]\r\n  }\r\n  @link()\r\n  player: Player\r\n}\r\n\r\nexport class PlayerLogOff implements DomainEvent {\r\n  get eventName() {\r\n    return PlayerEventKind[PlayerEventKind.playerLogOff]\r\n  }\r\n  @link()\r\n  player: Player\r\n}\r\n\r\nexport const playerEvents:[(a:any) => boolean, () => JsConstructor<any>][] = [\r\n  [\r\n    a => a.kind === PlayerEventKind[PlayerEventKind.playerLogOn],\r\n    () => PlayerLogOn\r\n  ], [\r\n    a => a.kind === PlayerEventKind[PlayerEventKind.playerLogOff],\r\n    () => PlayerLogOff\r\n  ]\r\n]\r\n\r\nexport const playerEventChoice: () => ChoiceValue<any> = Lazy.choose(\"PlayerEvent\", ... playerEvents)\r\n\r\nexport class PlayersCollection {\r\n  @convert(arrayOfLinks(Player))\r\n  members: Player[]\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/player.ts\n **/","export * from \"./lib/model\"\r\nexport * from \"./lib/annotations\"\r\nexport * from \"./lib/ResourceFetch\"\r\nexport { arrayOf, arrayOfLinks, choose, Lazy, mapping, optionalLink, optionOf } from \"./lib/Mappings\"\r\nexport { default as httpCacheFactory } from \"./lib/httpCacheFactory\"\r\nexport { default as TestFetcher } from \"./lib/TestFetcher\"\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/index.ts\n **/","import {JsMap, Option, fail, lazy} from \"flib\"\r\n\r\nexport enum SimpleValueKind {\r\n  booleanKind, numberKind, textKind, getUrlKind\r\n}\r\n\r\nexport interface JsConstructor<T> extends Function {\r\n  new (): T\r\n  name?: string\r\n}\r\n\r\nexport interface ValueNT<O> {\r\n  <T>(item: Value<T>): O\r\n}\r\n\r\nexport interface RawValueNT<O> {\r\n  <T>(item: RawValue<any, T>): O\r\n}\r\n\r\nexport abstract class Value<T> {\r\n  abstract fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<T> | ChoiceValue<T>, notFoundHandler:(resourceName:string) => (T|undefined)) => T1,\r\n    onObject: (jsConstructor: JsConstructor<T>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1\r\n}\r\n\r\nexport function foldCase<T1>(\r\n  onRawValue:RawValueNT<T1>,\r\n  onLink: () => T1,\r\n  onObject: () => T1,\r\n  onOption: () => T1,\r\n  onSeq: () => T1,\r\n  onChoice: () => T1\r\n): (v: Value<any>) => T1 {\r\n  return v => {\r\n    if (v instanceof SimpleValue) {\r\n      return onRawValue(v.rawValue);\r\n    } else if (v instanceof LinkValue) {\r\n      return onLink()\r\n    } else if (v instanceof ObjectValue) {\r\n      return onObject()\r\n    } else if (v instanceof OptionValue) {\r\n      return onOption()\r\n    } else if (v instanceof ArrayValue) {\r\n      return onSeq()\r\n    } else if (v instanceof ChoiceValue) {\r\n      return onChoice()\r\n    } else {\r\n      throw new Error(\"invalid case \")\r\n    }\r\n  }\r\n}\r\n\r\nexport class RawValue<I, T> {\r\n  static boolean = new RawValue<boolean,boolean>(SimpleValueKind.booleanKind, i => i)\r\n  static number = new RawValue<number,number>(SimpleValueKind.numberKind, i => i)\r\n  static string = new RawValue<string,string>(SimpleValueKind.textKind, i => i)\r\n  static getUrl = new RawValue<Option<string>,Option<string>>(SimpleValueKind.getUrlKind, i => i)\r\n\r\n  constructor(public kind: SimpleValueKind, public f: (i: I) => T) {\r\n  }\r\n  map<T1>(f1: (p: T) => T1): RawValue<I, T1> {\r\n    return new RawValue<I, T1>(this.kind, (i: I) => f1(this.f(i)));\r\n  }\r\n  fold<T1>(\r\n    onBoolean: (f: (v: boolean) => T) => T1,\r\n    onNumber: (f: (v: number) => T) => T1,\r\n    onString: (f: (v: string) => T) => T1,\r\n    onGetUrl: (f: (v: Option<string>) => T) => T1\r\n  ): T1 {\r\n    switch (this.kind) {\r\n      case SimpleValueKind.booleanKind: return onBoolean(<any>this.f)\r\n      case SimpleValueKind.numberKind: return onNumber(<any>this.f)\r\n      case SimpleValueKind.textKind: return onString(<any>this.f)\r\n      case SimpleValueKind.getUrlKind: return onGetUrl(<any>this.f)\r\n      default:\r\n        throw new Error(`invalid match ${this.kind}`);\r\n    }\r\n  }\r\n}\r\n\r\nexport class SimpleValue<I, T> extends Value<T> {\r\n  constructor(public rawValue:RawValue<I,T>) {\r\n    super()\r\n  }\r\n  map<T1>(f1: (p: T) => T1): SimpleValue<I, T1> {\r\n    return new SimpleValue<I, T1>(this.rawValue.map(f1));\r\n  }\r\n  fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<T> | ChoiceValue<T>, notFoundHandler:(resourceName:string) => (T|undefined)) => T1,\r\n    onObject: (jsConstructor: JsConstructor<T>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1 {\r\n    return onRawValue(this.rawValue)\r\n  }\r\n}\r\n\r\nexport class OptionValue<T> extends Value<Option<T>> {\r\n  constructor(public item: () => Value<T>) {\r\n    super()\r\n  }\r\n  fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<Option<T>> | ChoiceValue<Option<T>>) => T1,\r\n    onObject: (jsConstructor: JsConstructor<Option<T>>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1 {\r\n    return onOption(this.item())\r\n  }\r\n}\r\n\r\nexport class ArrayValue<T> extends Value<T[]> {\r\n  constructor(public item: () => Value<any>) {\r\n    super()\r\n  }\r\n  fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<T[]> | ChoiceValue<T[]>) => T1,\r\n    onObject: (jsConstructor: JsConstructor<T[]>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1 {\r\n    return onSeq(this.item())\r\n  }\r\n}\r\n\r\n\r\nexport class LinkValue<T> extends Value<T> {\r\n  constructor(private item: () => ObjectValue<T> | ChoiceValue<T>, private notFoundHandler:(resourceName:string) => (T|undefined)) {\r\n    super()\r\n  }\r\n  fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<T> | ChoiceValue<T>, notFoundHandler:(resourceName:string) => (T|undefined)) => T1,\r\n    onObject: (jsConstructor: JsConstructor<T>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1 {\r\n    return onLink(this.item(), this.notFoundHandler)\r\n  }\r\n}\r\n\r\nexport enum ExtraPropertiesStrategy {\r\n  discard, copy, fail\r\n}\r\n\r\nexport class ObjectValue<T> extends Value<T> {\r\n\r\n  private props: JsMap<[string, Value<any>]>\r\n  constructor(public jsConstructor: JsConstructor<T>, private properties: JsMap<(() => Value<any>) | [string, () => Value<any>]>, private extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) {\r\n    super()\r\n  }\r\n  fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<T> | ChoiceValue<T>, notFoundHandler:(resourceName:string) => (T|undefined)) => T1,\r\n    onObject: (jsConstructor: JsConstructor<T>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1 {\r\n    if (this.props === undefined || this.props === null) {\r\n      this.props = JsMap.map(this.properties, (k, v) => {\r\n        const [sourceProperty, lazyValue] = Array.isArray(v) ? v : [k, v];\r\n        const r: [string, Value<any>] = [sourceProperty, lazyValue()]\r\n        return r\r\n      })\r\n    }\r\n\r\n    return onObject(this.jsConstructor, this.props, this.extraPropertiesStrategy)\r\n  }\r\n}\r\n\r\nexport class ChoiceValue<T> extends Value<T> {\r\n  constructor(private description:string, private items: ValuePredicate<T>[]) {\r\n    super()\r\n  }\r\n  fold<T1>(\r\n    onRawValue:RawValueNT<T1>,\r\n    onLink: (item: ObjectValue<T> | ChoiceValue<T>, notFoundHandler:(resourceName:string) => (T|undefined)) => T1,\r\n    onObject: (jsConstructor: JsConstructor<T>, properties: JsMap<[string, Value<any>]>, extraPropertiesStrategy: Option<ExtraPropertiesStrategy>) => T1,\r\n    onOption: ValueNT<T1>,\r\n    onSeq: ValueNT<T1>,\r\n    onChoice: (description:string, items: ValuePredicate<any>[]) => T1\r\n  ): T1 {\r\n    return onChoice(this.description, this.items)\r\n  }\r\n}\r\n\r\nexport class ValuePredicate<T> {\r\n  constructor(public predicate: (a: any) => boolean, public value: () => Value<T>) {\r\n  }\r\n}\r\n\r\nexport interface ValuePredicateFactory {\r\n  <T>(value: () => Value<T>):ValuePredicate<T>\r\n}\r\n\r\nexport module NotFoundHandler {\r\n\r\n  export function defaultTo<T>(defaultValue:(T|undefined)):(resourceName:string) => (T|undefined) {\r\n    return lazy(() => defaultValue)\r\n  }\r\n\r\n  export function raiseNotFoundError<T>():(resourceName:string) => T{\r\n    return (resourceName) => fail<T>(`not found :${resourceName}`)\r\n  }\r\n\r\n}\r\n\r\nexport module Value {\r\n\r\n  export function match(pred:(a: any) => boolean):ValuePredicateFactory {\r\n    return <T>(value: () => Value<T>) => {\r\n      return new ValuePredicate<T>(pred, value)\r\n    };\r\n  }\r\n\r\n  export const boolean = lazy(() => new SimpleValue<boolean, boolean>(RawValue.boolean))\r\n\r\n  export const number = lazy(() => new SimpleValue<number, number>(RawValue.number))\r\n\r\n  export const string = lazy(() => new SimpleValue<string, string>(RawValue.string))\r\n\r\n  export const getUrl = lazy(() =>  new SimpleValue<Option<string>, string>(RawValue.getUrl.map( (v:Option<string>) => v.getOrElse(() => fail<string>(\"missing parent url\") ))) )\r\n\r\n  export function option<T>(item: () => Value<T>) {\r\n    return () => new OptionValue<T>(item)\r\n  }\r\n\r\n  export function array<T>(item: () => Value<T>) {\r\n    return () => new ArrayValue<T[]>(item)\r\n  }\r\n\r\n  export function link<T>(item: () => ObjectValue<T> | ChoiceValue<T>, notFoundHandler:(resourceName:string) => (T|undefined) = NotFoundHandler.raiseNotFoundError<T>()) {\r\n    return () => new LinkValue<T>(item, notFoundHandler)\r\n  }\r\n\r\n  export function optionalLink<T>(item: () => ObjectValue<T> | ChoiceValue<T>) {\r\n    return () => new OptionValue<T>(() => new LinkValue<T>(item, NotFoundHandler.defaultTo<T>(undefined)))\r\n  }\r\n\r\n  export function createChoice<T>( description:string, items: ValuePredicate<T>[]) {\r\n    return () => new ChoiceValue<T>( description, items)\r\n  }\r\n\r\n  export function choice( description:string, items: ValuePredicate<any>[]) {\r\n    return createChoice<any>( description, items)\r\n  }\r\n\r\n  export function object<T>(jsConstructor: JsConstructor<T>, properties: JsMap<(() => Value<any>) | [string, () => Value<any>]>, extraPropertiesStrategy: (ExtraPropertiesStrategy|null) = null) {\r\n    const eps = extraPropertiesStrategy !== null ? Option.some(extraPropertiesStrategy) : Option.None\r\n    return () => new ObjectValue<T>(jsConstructor, properties, eps)\r\n  }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/model.ts\n **/","import {JsConstructor, ArrayValue, ChoiceValue, ObjectValue, OptionValue, SimpleValue, Value, foldCase} from \"./model\"\r\nimport {Mappings, MappingProperties} from \"./Mappings\"\r\nimport {lazy, Option} from \"flib\"\r\n\r\nfunction assert(msg: () => string, b: boolean) {\r\n  if (!b) throw new Error(msg())\r\n}\r\n\r\nfunction checkConsistent(v: Value<any>, propTyp: JsConstructor<any>, errorPrefix: () => string) {\r\n  if (v === null || v === undefined) throw new Error(\"null mapping\")\r\n  const nop: () => void = () => null\r\n  foldCase(nop,\r\n    nop,\r\n    () => {\r\n      const errMsg = () => `${errorPrefix()}: expecting object got ${propTyp.name}`\r\n      assert(errMsg, !isPrimitive(propTyp))\r\n      assert(errMsg, propTyp !== <any>Option)\r\n      assert(errMsg, propTyp !== Array)\r\n    },\r\n    () => assert(() => `${errorPrefix()}: expecting option got ${propTyp.name}`, propTyp === <any>Option),\r\n    () => assert(() => `${errorPrefix()}: expecting array got ${propTyp.name}`, propTyp === Array),\r\n    nop)(v)\r\n}\r\n\r\nfunction isPrimitive(typ: JsConstructor<any>) {\r\n  return typ === Number || typ === Boolean || typ === String;\r\n}\r\n\r\nfunction makeLinkMapping(mp: ObjectValue<any> | OptionValue<any> | ChoiceValue<any>): Value<any> {\r\n  if (mp instanceof OptionValue) {\r\n    const item = mp.item()\r\n    if ((item instanceof ObjectValue) || (item instanceof ChoiceValue)) {\r\n      return Value.optionalLink(() => item)()\r\n    } else {\r\n        throw new Error(`invalid link mapping ${mp}`)\r\n    }\r\n  } else {\r\n    return Value.link(() => mp)();\r\n  }\r\n}\r\n\r\nexport function link(mapping?: () => ObjectValue<any> | OptionValue<any> | ChoiceValue<any>, sourceProperty?: string) {\r\n  return (target: any, targetProperty: string | symbol) => {\r\n    const container = target.constructor\r\n    const propType = Reflect.getMetadata(\"design:type\", target, targetProperty)\r\n    const errPrefix = () => `Property '${targetProperty}' of ${container.name}`\r\n\r\n    if (mapping === null || mapping === undefined) {\r\n      const cantInferType = () => `${errPrefix()}: cant infer link type`\r\n      const errMsg = () => `${errPrefix()}: expecting a link got ${propType.name}`\r\n\r\n      if (propType === undefined || propType === null) throw new Error(cantInferType())\r\n\r\n      assert(errMsg, !isPrimitive(propType))\r\n      assert(errMsg, propType !== Array)\r\n      assert(cantInferType, propType !== Option)\r\n    }\r\n\r\n    const mapping1 = (mapping === null || mapping === undefined) ? lazy(() => Mappings.instance.getMapping(propType)) : mapping;\r\n\r\n    Mappings.instance.addProperty(container, <any>targetProperty, sourceProperty || <any>targetProperty, () => {\r\n      const mpng = mapping1()\r\n      checkConsistent(mpng, propType, errPrefix)\r\n      return makeLinkMapping(mpng)\r\n    })\r\n  }\r\n}\r\n\r\nfunction getMappingFromPropType(propType: JsConstructor<any>): Value<any> {\r\n  if (propType === Number) return Value.number()\r\n  else if (propType === Boolean) return Value.boolean()\r\n  else if (propType === String) return Value.string()\r\n  else return Mappings.instance.getMapping(propType)\r\n}\r\n\r\nexport function convert(mapping?: () => ObjectValue<any> | OptionValue<any> | ChoiceValue<any> | ArrayValue<any> | SimpleValue<any, any>, sourceProperty?: string) {\r\n  return (target: any, targetProperty: string | symbol) => {\r\n    const container = target.constructor\r\n    const propType = Reflect.getMetadata(\"design:type\", target, targetProperty)\r\n    const errPrefix = () => `Property '${targetProperty}' of ${container.name}`\r\n\r\n    if (mapping === null || mapping === undefined) {\r\n      const cantInferType = () => `${errPrefix()}: cant infer type`\r\n\r\n      if (propType === undefined || propType === null) throw new Error(cantInferType())\r\n      else if (propType === Option) throw new Error(cantInferType())\r\n      else if (propType === Array) throw new Error(cantInferType())\r\n    }\r\n\r\n    const mapping1: () => Value<any> = (mapping === null || mapping === undefined) ?\r\n      () => {\r\n        const mp1 = getMappingFromPropType(propType)\r\n        checkConsistent(mp1, propType, errPrefix)\r\n        return mp1;\r\n      } :\r\n      () => {\r\n        const mp1 = mapping()\r\n        checkConsistent(mp1, propType, errPrefix)\r\n        return mp1;\r\n      }\r\n\r\n    Mappings.instance.addProperty(container, <any>targetProperty, sourceProperty || <any>targetProperty, mapping1)\r\n  }\r\n}\r\n\r\nexport function fetchProperties(properties: MappingProperties) {\r\n  return (target: JsConstructor<any>): void => {\r\n    Mappings.instance.setMappingProperties(target, properties)\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/annotations.ts\n **/","import { ExtraPropertiesStrategy, JsConstructor, ObjectValue, Value, ArrayValue, OptionValue, ChoiceValue } from \"./model\"\r\nimport { newObjectsCache } from \"./ObjectsCache\"\r\nimport ObjectValueBuilder from \"./ObjectValueBuilder\"\r\n\r\nexport interface MappingProperties {\r\n  extraPropertiesStrategy: ExtraPropertiesStrategy\r\n}\r\n\r\nexport class Mappings {\r\n\r\n  static instance = new Mappings()\r\n\r\n  static defaultExtraPropertiesStrategy = ExtraPropertiesStrategy.copy\r\n\r\n  static defaultMissingMapping() {\r\n    return Value.object(Object, {}, ExtraPropertiesStrategy.copy)\r\n  }\r\n\r\n  private buildersMap = newObjectsCache<JsConstructor<any>, ObjectValueBuilder<any>>()\r\n  private mappingsMap = newObjectsCache<JsConstructor<any>, ObjectValue<any>>()\r\n\r\n  addProperty(container: JsConstructor<any>, targetProperty: string, sourceProperty: string, mapping: () => Value<any>) {\r\n    const nm = (container.name !== null && container.name !== undefined) ? container.name : \"\"\r\n    const bldr = this.buildersMap.get(nm, container).fold(\r\n      () => {\r\n        const newObjBuilder = new ObjectValueBuilder(container, {}, Mappings.defaultExtraPropertiesStrategy)\r\n        this.buildersMap.put(nm, container, newObjBuilder)\r\n        return newObjBuilder\r\n      },\r\n      (bldr: ObjectValueBuilder<any>) => bldr\r\n    )\r\n    bldr.add(targetProperty, sourceProperty, mapping)\r\n  }\r\n\r\n  setMappingProperties(container: JsConstructor<any>, properties: MappingProperties) {\r\n    const nm = (container.name !== null && container.name !== undefined) ? container.name : \"\"\r\n    this.buildersMap.get(nm, container).fold<void>(\r\n      () => {\r\n        this.buildersMap.put(nm, container, new ObjectValueBuilder(container, {}, properties.extraPropertiesStrategy))\r\n      },\r\n      (bldr: ObjectValueBuilder<any>) => {\r\n        bldr.setExtraPropertiesStrategy(properties.extraPropertiesStrategy)\r\n      }\r\n    )\r\n  }\r\n\r\n  getMapping<T>(container: JsConstructor<T>): ObjectValue<T> {\r\n    const nm = (container.name !== null && container.name !== undefined) ? container.name : \"\"\r\n    return this.mappingsMap.get(nm, container).fold<ObjectValue<T>>(\r\n      () => this.buildersMap.get(nm, container).fold<ObjectValue<T>>(\r\n        () => Value.object(container, {}, ExtraPropertiesStrategy.copy)(),\r\n        (bldr: ObjectValueBuilder<any>) => {\r\n          const r = bldr.build()\r\n          this.mappingsMap.put(nm, container, r)\r\n          return r;\r\n        }\r\n      ),\r\n      (v: ObjectValue<any>) => v\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport module Lazy {\r\n  export function mapping<T>(jsConstructor: () => JsConstructor<T>): () => ObjectValue<T> {\r\n    return () => {\r\n      const cnstr = jsConstructor()\r\n      if (cnstr === undefined || cnstr === undefined) throw new Error(\"null mapping\")\r\n      return Mappings.instance.getMapping(cnstr)\r\n    }\r\n  }\r\n  export function arrayOf<T>(jsConstructor: () => JsConstructor<T>): () => ArrayValue<T[]> {\r\n    return Value.array(mapping(jsConstructor))\r\n  }\r\n\r\n  export function optionOf<T>(jsConstructor: () => JsConstructor<T>): () => OptionValue<T> {\r\n    return Value.option(mapping(jsConstructor))\r\n  }\r\n\r\n  export function arrayOfLinks<T>(jsConstructor: () => JsConstructor<T>): () => ArrayValue<T[]> {\r\n    return Value.array(Value.link(mapping(jsConstructor)))\r\n  }\r\n\r\n  export function optionalLink<T>(jsConstructor: () => JsConstructor<T>): () => OptionValue<T> {\r\n    return Value.option(Value.link(mapping(jsConstructor)))\r\n  }\r\n\r\n  export function choose(description:string, ... p: [(o: any) => boolean, () => JsConstructor<any>][]): () => ChoiceValue<any> {\r\n    const cases = p.map(p => {\r\n      const [pred, constr] = p\r\n      return Value.match(pred)(mapping(constr))\r\n    })\r\n    return Value.choice(description, cases)\r\n  }\r\n\r\n}\r\n\r\nexport function mapping<T>(jsConstructor: JsConstructor<T>): () => ObjectValue<T> {\r\n  return Lazy.mapping(() => jsConstructor)\r\n}\r\n\r\nexport function arrayOf<T>(jsConstructor: JsConstructor<T>): () => ArrayValue<T[]> {\r\n  return Lazy.arrayOf(() => jsConstructor)\r\n}\r\n\r\nexport function arrayOfLinks<T>(jsConstructor: JsConstructor<T>): () => ArrayValue<T[]> {\r\n  return Lazy.arrayOfLinks(() => jsConstructor)\r\n}\r\n\r\nexport function optionalLink<T>(jsConstructor: JsConstructor<T>): () => OptionValue<T> {\r\n  return Lazy.optionalLink(() => jsConstructor)\r\n}\r\n\r\nexport function optionOf<T>(jsConstructor: JsConstructor<T>): () => OptionValue<T> {\r\n  return Lazy.optionOf(() => jsConstructor)\r\n}\r\n\r\nexport function choose(description:string, ... ps: [(o: any) => boolean, JsConstructor<any>][]): () => ChoiceValue<any> {\r\n  const cases = ps.map(p  => {\r\n    const [pred, jsc] = p\r\n    const r:[(o: any) => boolean, () => JsConstructor<any>] = [pred, () => jsc]\r\n    return r\r\n  })\r\n  return Lazy.choose(description, ... cases)\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/Mappings.ts\n **/","import {JsMap, Option, Arrays} from \"flib\"\r\n\r\nexport interface ObjectsCache<K, V> {\r\n  put(url: string, k: K, value: V): void\r\n  get(url: string, k: K): Option<V>\r\n}\r\n\r\nexport function newObjectsCache<K,V>():ObjectsCache<K, V> {\r\n  return new EntriesMap<K,V>((a,b) => a === b)\r\n}\r\n\r\ninterface Entry<K,V> {\r\n  key:K\r\n  value:V\r\n}\r\n\r\nclass EntriesMap<K,V> implements ObjectsCache<K,V> {\r\n  cache:JsMap<Entry<K,V>[]> = {}\r\n  constructor(private keyPredicate:(a:K, b:K) => boolean) {\r\n  }\r\n  get(ks:string, k:K):Option<V> {\r\n    return new Option<Entry<K,V>[]>(this.cache[ks]).flatMap( entries => {\r\n      return Arrays.find<Entry<K,V>>(entries, e => this.keyPredicate(e.key, k) )\r\n    } ).map( e => e.value )\r\n  }\r\n  put(ks:string, k:K, v:V):void {\r\n    new Option<Entry<K,V>[]>(this.cache[ks]).fold(\r\n      () => { this.cache[ks] = [{key:k, value:v}] },\r\n      entries => {\r\n         Arrays.find<Entry<K,V>>(entries, e => this.keyPredicate(e.key, k)).fold<void>(\r\n          () => entries.push({key:k, value:v}),\r\n          (oldValue:Entry<K,V>) => {\r\n            oldValue.value = v\r\n            //throw new Error(`replacing previous entry ${ks} key ${k}`)\r\n          }\r\n        )\r\n      }\r\n    )\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/ObjectsCache.ts\n **/","import {JsMap} from \"flib\"\r\n\r\nimport {JsConstructor, Value, ExtraPropertiesStrategy, ObjectValue} from \"./model\"\r\n\r\nexport default class ObjectValueBuilder<T> {\r\n  private result:ObjectValue<T>\r\n  constructor(public jsConstructor:JsConstructor<T>, private properties:JsMap<[string, () => Value<any>]>, public extraPropertiesStrategy:ExtraPropertiesStrategy) {\r\n  }\r\n  setExtraPropertiesStrategy(eps:ExtraPropertiesStrategy) {\r\n    this.extraPropertiesStrategy = eps;\r\n  }\r\n  add(targetProperty:string, sourceProperty:string, mapping:() => Value<any>){\r\n    if (this.result) throw new Error(\"cannot add more properties\")\r\n    this.properties[targetProperty] = [sourceProperty, mapping];\r\n  }\r\n  build():ObjectValue<T> {\r\n    if (!this.result)\r\n      this.result = Value.object<T>(this.jsConstructor, this.properties, this.extraPropertiesStrategy)()\r\n    return this.result;\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/ObjectValueBuilder.ts\n **/","import {JsMap, Option, Arrays, isNull, Try} from \"flib\"\r\nimport {ObjectsCache, newObjectsCache} from\"./ObjectsCache\"\r\nimport {JsConstructor, ObjectValue  , ChoiceValue  , Value, ValuePredicate, ExtraPropertiesStrategy, RawValue} from\"./model\"\r\n\r\nfunction getJsonValue<T>(v: any, desc: string, predicate: (a: any) => boolean): Try<T> {\r\n  if (isNull(v)) return Try.failure(new Error(\"null\"))\r\n  else if (!predicate(v)) return Try.failure(new Error(`${JSON.stringify(v)} is not ${desc}`))\r\n  else return Try.success(v)\r\n}\r\n\r\nfunction getJsonProperty(json: any, name: string): Try<any> {\r\n  return (json === undefined || typeof json !== \"object\") ?\r\n    Try.failure(new Error(`error while reading Value ${name}, expecting an object got ${JSON.stringify(json)}`)) :\r\n    Try.success(json[name])\r\n}\r\n\r\nclass InterpreterResult {\r\n  static empty = new InterpreterResult([])\r\n  static merge(ress:InterpreterResult[]):InterpreterResult {\r\n    return ress.reduce((acc, itm) => acc.add(itm), InterpreterResult.empty)\r\n  }\r\n\r\n  constructor(private cycles: Promise<any>[]) {\r\n  }\r\n  private add(p: InterpreterResult) {\r\n    return new InterpreterResult(this.cycles.concat(p.cycles))\r\n  }\r\n  all() {\r\n    return Promise.all(this.cycles)\r\n  }\r\n}\r\n\r\nclass Context {\r\n  constructor(\r\n    public extraPropertiesStrategy:ExtraPropertiesStrategy,\r\n    public httpGet: (url: string) => Promise<Option<any>>,\r\n    public objectsCache: ObjectsCache<JsConstructor<any>, Promise<any>>,\r\n    public setValue: (a: any) => void,\r\n    public url: Option<string>,\r\n    public parentUrl: Option<string>\r\n  ) {\r\n  }\r\n\r\n  withUrl(url:string) {\r\n    return new Context(this.extraPropertiesStrategy, this.httpGet, this.objectsCache, this.setValue, Option.some(url), this.url)\r\n  }\r\n  withoutUrl() {\r\n    return new Context(this.extraPropertiesStrategy, this.httpGet, this.objectsCache, this.setValue, Option.None, this.url)\r\n  }\r\n  withSetValue(setValue:(a:any) => void) {\r\n    return new Context(this.extraPropertiesStrategy, this.httpGet, this.objectsCache, setValue, this.url, this.parentUrl)\r\n  }\r\n}\r\n\r\n\r\nexport class ResourceFetch {\r\n  constructor(private propertiesWithoutMappingStrategy:ExtraPropertiesStrategy, private httpCacheFactory:() => (url:string) => Promise<Option<any>>) {\r\n  }\r\n  fetchResource<T>(url:string, mapping:() => (ObjectValue<T> | ChoiceValue<T>)):Promise<T> {\r\n    return this.fetchRun(url, Value.link(mapping)());\r\n  }\r\n  fetchObject<T>(obj:any, mapping:() => (ObjectValue<T> | ChoiceValue<T>)):Promise<T> {\r\n    return this.fetchRun(obj, mapping());\r\n  }\r\n  private fetchRun<T>(obj:any, mapping:Value<T>):Promise<T> {\r\n    const interpreter = new JsonIntepreter()\r\n    const httpGet = this.httpCacheFactory()\r\n    let result:T\r\n    const ctx = new Context(this.propertiesWithoutMappingStrategy, httpGet, newObjectsCache<JsConstructor<any>, Promise<any>>(), v => result = v, Option.None,Option.None)\r\n    const ires = interpreter.interpret(ctx, mapping, obj)\r\n    return ires.then( ires => ires.all().then( v => result ) )\r\n  }\r\n}\r\n\r\nfunction isGetPropertyValue<T>(v:Value<T>) {\r\n  const no = () => false\r\n  const yes = () => true\r\n\r\n  return v.fold<boolean>( (item: RawValue<any, any>) => item.fold(no, no, no, yes), no, no, no, no, no);\r\n}\r\n\r\nfunction simpleValue<T,T1>(json:any, typename:string, f:(v:T) => T1, setValue:(a:any) => void):Promise<InterpreterResult> {\r\n  const tr:Try<T> = getJsonValue<T>(json, typename, (a: any) => (typeof a === typename))\r\n  return tr.fold<Promise<InterpreterResult>>( (err:Error) => Promise.reject(err), (v:T) => {\r\n    setValue(f(v))\r\n    return Promise.resolve<InterpreterResult>(InterpreterResult.empty)\r\n  })\r\n}\r\n\r\nfunction setPropertyValue(a:any, p:string, v:any) {\r\n  try {\r\n    a[p] = v\r\n  } catch(e) {\r\n    /** ignore readonly property errors */\r\n  }\r\n}\r\n\r\nclass JsonIntepreter {\r\n\r\n  interpret<T>(context:Context, mapping: Value<T>, json: any): Promise<InterpreterResult> {\r\n    return mapping.fold<Promise<InterpreterResult>>(\r\n      <T1>(rawValue:RawValue<any,T1>) => {\r\n        return rawValue.fold(\r\n          (f) => simpleValue<boolean, T1>(json, \"boolean\", f, context.setValue),\r\n          (f) => simpleValue<number, T1>(json, \"number\", f, context.setValue),\r\n          (f) => simpleValue<string, T1>(json, \"string\", f, context.setValue),\r\n          (f) => {\r\n            context.setValue(f(context.parentUrl))\r\n            return Promise.resolve(InterpreterResult.empty)\r\n          }\r\n        )\r\n      },\r\n      (item, notFoundHandler) => {\r\n        if (typeof json === \"string\") {\r\n          const url = json\r\n          return context.httpGet(url).then( (json:Option<any>) =>\r\n            json.fold(\r\n              () => {\r\n                context.setValue(notFoundHandler(url))\r\n                return Promise.resolve(InterpreterResult.empty)\r\n              },\r\n              json => this.interpret(context.withUrl(url), item, json))\r\n          );\r\n        } else {\r\n          return Promise.reject(new Error(`${JSON.stringify(json)} is not a url`));\r\n        }\r\n      },\r\n      (jsConstr, props, optExtraPropertiesStrategy) => {\r\n\r\n        const cachedObj = context.url.flatMap(url => context.objectsCache.get(url, jsConstr))\r\n\r\n        return cachedObj.fold(\r\n          () => {\r\n            const resObj = new jsConstr();\r\n            const res = Promise.resolve(resObj)\r\n\r\n            context.url.forEach(url => context.objectsCache.put(url, jsConstr, res))\r\n            context.setValue(resObj)\r\n\r\n            const remainingJsonPropertiesSet = JsMap.map(json, (k,v) => true)\r\n\r\n            const promisesMap:JsMap<Promise<InterpreterResult>> = JsMap.map(props, (targetProperty, nameProp) => {\r\n              const [sourceProperty, prop] = nameProp\r\n              delete remainingJsonPropertiesSet[sourceProperty];\r\n              return getJsonProperty(json, sourceProperty).fold(\r\n                (err:Error) => Promise.reject(err),\r\n                (v:any) => this.interpret(context.withoutUrl().withSetValue(v => setPropertyValue(resObj, targetProperty, v)), prop, v)\r\n              )\r\n            })\r\n\r\n            const extraPropsStrategy = optExtraPropertiesStrategy.getOrElse( () => context.extraPropertiesStrategy )\r\n            switch (extraPropsStrategy) {\r\n              case ExtraPropertiesStrategy.fail:\r\n                if (Object.keys(remainingJsonPropertiesSet).length > 0)\r\n                  return Promise.reject(new Error(`extra properties ${Object.keys(remainingJsonPropertiesSet)} creating object ${jsConstr.name}`))\r\n\r\n              case ExtraPropertiesStrategy.copy:\r\n                JsMap.forEach(remainingJsonPropertiesSet, (k,v) => setPropertyValue(resObj,k, json[k]) )\r\n              case ExtraPropertiesStrategy.discard:\r\n              default:\r\n                const proms = Promise.all(Object.keys(promisesMap).map(k => promisesMap[k]))\r\n\r\n                return proms.then( proms => InterpreterResult.merge(proms) );\r\n            }\r\n          },\r\n          (v) => {\r\n            v.then( context.setValue )\r\n            return Promise.resolve( new InterpreterResult([v]) )\r\n          }\r\n        )\r\n\r\n      },\r\n      <T1>(item:Value<T1>) => {\r\n\r\n        const interpretItem = () => this.interpret(context.withSetValue(v => context.setValue(new Option(v))), item, json)\r\n        const setNone = () => {\r\n          context.setValue(Option.None)\r\n          return Promise.resolve( InterpreterResult.empty )\r\n        }\r\n\r\n        const itemIsGetProperty = isGetPropertyValue(item)\r\n        if (itemIsGetProperty) {\r\n          try {\r\n            return interpretItem()\r\n          } catch (e) {\r\n            return setNone()\r\n          }\r\n        } else if (isNull(json)) {\r\n          return setNone()\r\n        } else {\r\n          return interpretItem()\r\n        }\r\n\r\n      },\r\n      <T1>(item:Value<T1>) => {\r\n        if (Array.isArray(json)) {\r\n          const resArray:T[] = []\r\n          context.setValue(resArray)\r\n          const proms:Promise<InterpreterResult>[] = json.map( (i:any, index:number) => {\r\n            return this.interpret(context.withSetValue(v => resArray[index] = v),  item, i)\r\n          })\r\n          return Promise.all( proms ).then( proms => InterpreterResult.merge(proms) )\r\n        } else\r\n          return Promise.reject(new Error(`expecting an array got ${JSON.stringify(json)}`))\r\n\r\n      },\r\n      (description, choices) => {\r\n        if (!isNull(json)) {\r\n          return this.findChoice(context, json, description, choices)\r\n        } else {\r\n          return Promise.reject(new Error(\"null\"))\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  findChoice(context:Context, json:any, description:string, choices:ValuePredicate<any>[]):Promise<InterpreterResult> {\r\n    const cantFindChoice = () => Promise.reject(new Error(`could not find a valid choice for ${description}\\ninput:\\n${JSON.stringify(json, null, \"  \")}`))\r\n    return Arrays.findIndex(choices, choice => choice.predicate(json)).fold(\r\n      cantFindChoice,\r\n      (idx) => this.interpret(context, choices[idx].value(), json)\r\n        /*\r\n        .then(\r\n        v => v,\r\n        err => {\r\n          return Promise.reject(err)\r\n          / *\r\n          const nchoices = choices.slice(idx+1)\r\n          if (nchoices.length === 0) return cantFindChoice()\r\n          else return this.findChoice(context, json, description, nchoices)\r\n\r\n        }\r\n\r\n      )*/\r\n    )\r\n  }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/ResourceFetch.ts\n **/","import { Option, JsMap } from \"flib\"\r\n\r\nclass HttpCacheFactory {\r\n\r\n  constructor(private requestFactory: (url: string) => Request, private responseReader: (resp: Response, req: Request) => Promise<any>) {\r\n  }\r\n\r\n  create(): (k: string) => Promise<Option<any>> {\r\n    const cache: JsMap<Promise<any>> = {}\r\n    return (url) => {\r\n      if (url === undefined || url == null) throw new Error(\"undefined url\");\r\n      const cr = cache[url];\r\n      if (cr !== null && cr !== undefined) return cr;\r\n      else {\r\n        const req = this.requestFactory(url)\r\n        const r = window.fetch(url, req).then(resp => {\r\n          if (resp.status=== 404) return Promise.resolve(Option.None)\r\n          else if (resp.status >= 200 && resp.status < 300) return this.responseReader(resp, req).then( resp => Option.option(resp) )\r\n          else return Promise.reject(new Error(`GET ${url}:\\n${JSON.stringify(resp, null, 2)}`))\r\n        })\r\n        cache[url] = r\r\n        return r;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default function httpCacheFactory(\r\n  requestFactory: (url: string) => Request,\r\n  responseReader: (resp: Response, req: Request) => Promise<any>): () => (url: string) => Promise<Option<any>> {\r\n\r\n  const reqFactory = new HttpCacheFactory(requestFactory, responseReader)\r\n  return () => reqFactory.create();\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/httpCacheFactory.ts\n **/","import { Option, JsMap } from \"flib\"\r\nimport { ExtraPropertiesStrategy, ChoiceValue, ObjectValue } from \"../lib/model\"\r\nimport { ResourceFetch } from \"../lib/ResourceFetch\"\r\n\r\nexport default class TestFetcher {\r\n  public static promisesMap<V>(mp: JsMap<V>): (k: string) => Promise<Option<V>> {\r\n    return (k: string) => {\r\n      const v = mp[k];\r\n      if (v === undefined || v === null) throw new Error(`missing: ${k}`)\r\n      else return Promise.resolve(new Option(v));\r\n    };\r\n  }\r\n\r\n  constructor(private extraPropertiesStrategy: ExtraPropertiesStrategy) {\r\n  }\r\n\r\n  private fetch<T>(url: string, testMapping: () => ObjectValue<T> | ChoiceValue<T>, cache: (k: string) => Promise<Option<any>>): Promise<T> {\r\n    const rf = new ResourceFetch(this.extraPropertiesStrategy, () => cache)\r\n    return rf.fetchResource(url, testMapping)\r\n  }\r\n  private fetchObj<T>(obj: any, testMapping: () => ObjectValue<T> | ChoiceValue<T>, cache: (k: string) => Promise<Option<any>>): Promise<T> {\r\n    const rf = new ResourceFetch(this.extraPropertiesStrategy, () => cache)\r\n    return rf.fetchObject(obj, testMapping)\r\n  }\r\n  fetchResource<T>(url: string, testMapping: () => ObjectValue<T> | ChoiceValue<T>, cache: (k: string) => Promise<Option<any>>): (f: (v: T) => void) => void {\r\n    return f => {\r\n      this.fetch(url, testMapping, cache).then(\r\n        f,\r\n        (err) => {\r\n          console.log(err.stack)\r\n          fail(`error getting url ${url} ${err}`)\r\n        }\r\n      )\r\n    }\r\n  }\r\n  fetchFails(url: string, testMapping: () => ObjectValue<any> | ChoiceValue<any>, cache: (k: string) => Promise<Option<any>>): (f: (v: Error) => void) => void {\r\n    return f => {\r\n      this.fetch(url, testMapping, cache).then(\r\n        (v) => { throw new Error(\"expecting a failure while getting url ${url}\") },\r\n        f\r\n      )\r\n    }\r\n  }\r\n  fetchObject<T>(obj: any, testMapping: () => ObjectValue<T> | ChoiceValue<T>, cache: (k: string) => Promise<Option<any>>): (f: (v: T) => void) => void {\r\n    return f => {\r\n      this.fetchObj(obj, testMapping, cache).then(\r\n        f,\r\n        (err) => {\r\n          console.log(err.stack)\r\n          fail(`error getting object ${JSON.stringify(obj, null, 2)} ${err}`)\r\n        }\r\n      )\r\n    }\r\n  }\r\n  fetchObjectFails(obj: any, testMapping: () => ObjectValue<any> | ChoiceValue<any>, cache: (k: string) => Promise<Option<any>>): (f: (v: Error) => void) => void {\r\n    return f => {\r\n      this.fetchObj(obj, testMapping, cache).then(\r\n        (v) => { throw new Error(\"expecting a failure while getting object  ${JSON.stringify(obj, null, 2)}\") },\r\n        f\r\n      )\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/nrest-fetch/src/lib/TestFetcher.ts\n **/","import {JsMap, isNull} from \"flib\"\r\n\r\nexport function toEnum<T>(a: any, desc: string): (str: String) => T {\r\n  return valueFrom<T>(<any>a, desc);\r\n}\r\n\r\nexport function valueFrom<T>(mp: JsMap<T>, desc: string): (str: String) => T {\r\n  return (str: string) => {\r\n    const r = mp[str];\r\n    if (isNull(r)) throw Error(`${str} is not a ${desc}`)\r\n    return r;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/Util.ts\n **/","import { Option } from \"flib\"\r\nimport { CompetitionState } from \"./competition\"\r\nimport { DomainEvent } from \"./model\"\r\nimport { Player } from \"./player\"\r\nimport { link, convert, Value, ChoiceValue, JsConstructor, Lazy } from \"nrest-fetch\"\r\n\r\nexport enum CompetitionEventKind {\r\n  createdCompetition, confirmedCompetition, playerAccepted, playerDeclined\r\n}\r\n\r\nexport type CompetitionEvent = CompetitionDeclined | CompetitionAccepted | ConfirmedCompetition | CreatedCompetition\r\n\r\nexport class CompetitionDeclined implements DomainEvent {\r\n  get eventName() {\r\n    return CompetitionEventKind[CompetitionEventKind.playerDeclined]\r\n  }\r\n\r\n  @link()\r\n  player: Player\r\n  @link()\r\n  competition: CompetitionState\r\n  @convert(Value.option(Value.string))\r\n  reason: Option<string>\r\n}\r\n\r\nexport class CompetitionAccepted implements DomainEvent {\r\n  get eventName() {\r\n    return CompetitionEventKind[CompetitionEventKind.playerAccepted]\r\n  }\r\n  @link()\r\n  player: Player\r\n  @link()\r\n  competition: CompetitionState\r\n}\r\n\r\nexport class ConfirmedCompetition implements DomainEvent {\r\n  get eventName() {\r\n    return CompetitionEventKind[CompetitionEventKind.confirmedCompetition]\r\n  }\r\n  @link()\r\n  competition: CompetitionState\r\n}\r\n\r\nexport class CreatedCompetition implements DomainEvent {\r\n  get eventName() {\r\n    return CompetitionEventKind[CompetitionEventKind.createdCompetition]\r\n  }\r\n  @link()\r\n  issuer: Player\r\n  @link()\r\n  competition: CompetitionState\r\n}\r\n\r\nexport const competitionEvents: [(a: any) => boolean, () => JsConstructor<any>][] = [\r\n  [\r\n    a => a.kind === CompetitionEventKind[CompetitionEventKind.createdCompetition],\r\n    () => CreatedCompetition\r\n  ], [\r\n    a => a.kind === CompetitionEventKind[CompetitionEventKind.confirmedCompetition],\r\n    () => ConfirmedCompetition\r\n  ], [\r\n    a => a.kind === CompetitionEventKind[CompetitionEventKind.playerAccepted],\r\n    () => CompetitionAccepted\r\n  ], [\r\n    a => a.kind === CompetitionEventKind[CompetitionEventKind.playerDeclined],\r\n    () => CompetitionDeclined\r\n  ]\r\n]\r\n\r\nexport const competitionEventChoice:() => ChoiceValue<any> = Lazy.choose(\"CompetitionEvent\", ...competitionEvents)\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/competitionEvents.ts\n **/","import { Option, isNull } from \"flib\"\r\nimport { Path } from \"./model\"\r\nimport { CurrentPlayer, Player } from \"./player\"\r\nimport { arrayOfLinks, link, convert, Value, arrayOf, choose, optionalLink, mapping, ChoiceValue, Lazy } from \"nrest-fetch\"\r\nimport { toEnum } from \"./Util\"\r\n\r\nexport enum GameStateKind {\r\n  active, dropped, finished\r\n}\r\n\r\nexport enum Seed {\r\n  bastoni, coppe, denari, spade\r\n}\r\n\r\nexport enum DropReasonKind {\r\n  playerLeft\r\n}\r\n\r\n\r\nconst stringToSeed = Value.string().map(toEnum(Seed, \"Seed\"))\r\n\r\nexport class Card {\r\n  @convert(() => stringToSeed)\r\n  seed: Seed\r\n  \"number\": number\r\n  points: number\r\n}\r\n\r\nexport class Move {\r\n  @link()\r\n  player: Player\r\n\r\n  @convert()\r\n  card: Card\r\n}\r\n\r\n\r\nexport class PlayerScore {\r\n  @convert(arrayOf(Card))\r\n  cards: Card[]\r\n}\r\n\r\nexport class PlayerFinalState {\r\n  @link()\r\n  player: Player\r\n\r\n  points: number\r\n\r\n  @convert()\r\n  score: PlayerScore\r\n}\r\n\r\nexport class PlayerState {\r\n\r\n  @convert(Value.getUrl)\r\n  self: Path\r\n\r\n  @link()\r\n  player: Player\r\n\r\n  @convert(arrayOf(Card))\r\n  cards: Card[]\r\n\r\n  @convert()\r\n  score: PlayerScore\r\n}\r\n\r\nexport type GameState = FinalGameState | ActiveGameState | DroppedGameState\r\n\r\nexport type GameResult = PlayersGameResult | TeamsGameResult\r\n\r\nexport class PlayersGameResult {\r\n  @convert(arrayOf(PlayerFinalState))\r\n  playersOrderByPoints: PlayerFinalState[]\r\n\r\n  @convert()\r\n  winner: PlayerFinalState\r\n}\r\n\r\nexport class TeamScore {\r\n  teamName: string\r\n\r\n  @convert(arrayOfLinks(Player))\r\n  players: Player[]\r\n\r\n  @convert(arrayOf(Card))\r\n  cards: Card[]\r\n\r\n  points: number\r\n}\r\n\r\nexport class TeamsGameResult {\r\n  @convert(arrayOf(TeamScore))\r\n  teamsOrderByPoints: TeamScore[]\r\n\r\n  @convert()\r\n  winnerTeam: TeamScore\r\n}\r\n\r\nexport class FinalGameState {\r\n  self: Path\r\n\r\n  @convert()\r\n  briscolaCard: Card\r\n\r\n  @convert(choose(\"GameResult\", [\r\n    (a: any) => !isNull(a.playersOrderByPoints),\r\n    PlayersGameResult\r\n  ], [\r\n      (a: any) => !isNull(a.teamsOrderByPoints),\r\n      TeamsGameResult\r\n    ]))\r\n  gameResult: GameResult\r\n\r\n}\r\n\r\nexport class ActiveGameState {\r\n  self: Path\r\n  @convert()\r\n  briscolaCard: Card\r\n  @convert(arrayOf(Move))\r\n  moves: Move[]\r\n\r\n  @convert(arrayOfLinks(Player))\r\n  nextPlayers: Player[]\r\n  @link()\r\n  currentPlayer: CurrentPlayer\r\n\r\n  isLastHandTurn: Boolean\r\n  isLastGameTurn: Boolean\r\n\r\n  @convert(arrayOfLinks(Player))\r\n  players: Player[]\r\n\r\n  @convert(optionalLink(PlayerState))\r\n  playerState: Option<PlayerState>\r\n\r\n  deckCardsNumber: number\r\n}\r\n\r\nexport class DropReason {\r\n}\r\n\r\nexport class PlayerLeft extends DropReason {\r\n  @link()\r\n  player: Player\r\n\r\n  @convert(Value.option(Value.string))\r\n  reason: Option<string>\r\n}\r\n\r\nexport class DroppedGameState {\r\n  self: Path\r\n  briscolaCard: Card\r\n  moves: Move[]\r\n\r\n  @convert(arrayOfLinks(Player))\r\n  nextPlayers: Player[]\r\n\r\n  @convert(mapping(PlayerLeft))\r\n  dropReason: DropReason\r\n}\r\n\r\nexport const gameStateChoice:() => ChoiceValue<any> = Lazy.choose(\"GameState\", [\r\n    a => a.kind === GameStateKind[GameStateKind.active],\r\n    () => ActiveGameState\r\n  ], [\r\n    a => a.kind === GameStateKind[GameStateKind.dropped],\r\n    () => DroppedGameState\r\n  ], [\r\n    a => a.kind === GameStateKind[GameStateKind.finished],\r\n    () => FinalGameState\r\n  ])\r\n\r\nexport module GameState {\r\n  export function fold<T>(p: GameState,\r\n    activeGameState: (p: ActiveGameState) => T,\r\n    finalGameState: (p: FinalGameState) => T,\r\n    droppedGameState: (p: DroppedGameState) => T): T {\r\n    if (p instanceof ActiveGameState) return activeGameState(p)\r\n    else if (p instanceof FinalGameState) return finalGameState(p)\r\n    else if (p instanceof DroppedGameState) return droppedGameState(p)\r\n    else {\r\n      console.log(\"unrecognized GameState\")\r\n      console.log(p)\r\n      throw new Error(\"unrecognized GameState \")\r\n    }\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/game.ts\n **/","import {gameStateChoice, GameState, Card, ActiveGameState, DropReason, PlayerLeft} from \"./game\"\r\nimport {link, convert, mapping, ChoiceValue, JsConstructor, Lazy} from \"nrest-fetch\"\r\nimport {DomainEvent} from \"./model\"\r\nimport {Player} from \"./player\"\r\n\r\nexport enum BriscolaEventKind {\r\n  gameStarted, cardPlayed, gameDropped\r\n}\r\n\r\nexport type BriscolaEvent = CardPlayed | GameStarted | GameDropped\r\n\r\nexport class CardPlayed implements DomainEvent {\r\n  get eventName() {\r\n     return BriscolaEventKind[BriscolaEventKind.cardPlayed]\r\n  }\r\n\r\n  @link(gameStateChoice)\r\n  game: GameState\r\n  @link()\r\n  player: Player\r\n  @convert()\r\n  card: Card\r\n}\r\n\r\nexport class GameStarted implements DomainEvent {\r\n  get eventName() {\r\n     return BriscolaEventKind[BriscolaEventKind.gameStarted]\r\n  }\r\n  @convert(mapping(ActiveGameState))\r\n  game: ActiveGameState\r\n}\r\n\r\nexport class GameDropped implements DomainEvent {\r\n  get eventName() {\r\n     return BriscolaEventKind[BriscolaEventKind.gameDropped]\r\n  }\r\n  @link(gameStateChoice)\r\n  game: GameState\r\n  @convert(mapping(PlayerLeft))\r\n  dropReason:DropReason\r\n}\r\n\r\nexport const gameEvents:[(a:any) => boolean, () => JsConstructor<any>][] = [[\r\n    a => a.kind === BriscolaEventKind[BriscolaEventKind.gameStarted],\r\n    () => GameStarted\r\n  ], [\r\n    a => a.kind === BriscolaEventKind[BriscolaEventKind.cardPlayed],\r\n    () => CardPlayed\r\n  ], [\r\n    a => a.kind === BriscolaEventKind[BriscolaEventKind.gameDropped],\r\n    () => GameDropped\r\n  ]]\r\n\r\nexport const briscolaEventChoice:() => ChoiceValue<any> = Lazy.choose(\"GameEvent\", ... gameEvents)\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/gameEvents.ts\n **/","import {Path} from \"./model\"\r\n\r\nexport class SiteMap {\r\n\tplayers:Path\r\n\tplayerLogin:Path\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/sitemap.ts\n **/","import { Arrays } from \"flib\"\r\nimport { GameState, gameStateChoice } from \"./game\"\r\nimport { briscolaEventChoice, BriscolaEvent, gameEvents } from \"./gameEvents\"\r\nimport { CompetitionState } from \"./competition\"\r\nimport { competitionEventChoice, CompetitionEvent, competitionEvents } from \"./competitionEvents\"\r\nimport { playerEventChoice, Player, PlayerEvent, playerEvents } from \"./player\"\r\nimport { convert, mapping, ChoiceValue, arrayOf, Lazy } from \"nrest-fetch\"\r\n\r\nexport type RawEventAndState = { event: RawEvent }\r\nexport type RawEvent = { kind: string }\r\n\r\nexport const eventAndStateChoice:() => ChoiceValue<any> = Lazy.choose(\"EventAndState\", [\r\n    wso => wso.event && eventMatch(playerEvents, wso.event),\r\n    () => PlayerEventAndState\r\n  ], [\r\n    wso => wso.event && eventMatch(gameEvents, wso.event),\r\n    () => GameEventAndState\r\n  ], [\r\n    wso => wso.event && eventMatch(competitionEvents, wso.event),\r\n    () => CompetitionEventAndState\r\n  ])\r\n\r\n\r\nfunction eventMatch<T>(preds: [(a: any) => boolean, T][], a: any): boolean {\r\n  return Arrays.exists(preds, (p) => p[0](a))\r\n}\r\n\r\nexport class PlayerEventAndState {\r\n  @convert(playerEventChoice)\r\n  event: PlayerEvent\r\n\r\n  @convert(arrayOf(Player), \"state\")\r\n  players: Player[]\r\n}\r\n\r\nexport class GameEventAndState {\r\n  @convert(briscolaEventChoice)\r\n  event: BriscolaEvent\r\n\r\n  @convert(gameStateChoice, \"state\")\r\n  game: GameState\r\n}\r\n\r\nexport class CompetitionEventAndState {\r\n  @convert(competitionEventChoice)\r\n  event: CompetitionEvent\r\n\r\n  @convert(mapping(CompetitionState), \"state\")\r\n  competition: CompetitionState\r\n}\r\n\r\nexport type EventAndState = PlayerEventAndState | GameEventAndState | CompetitionEventAndState\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/EventAndState.ts\n **/","import {Path} from \"./model\"\r\nimport {Seed, Card as ModelCard} from \"./game\"\r\n\r\nexport type MatchKind = string | NumberOfGamesMatchKind | TargetPointsMatchKind\r\n\r\nexport interface NumberOfGamesMatchKind {\r\n  numberOfMatches:number\r\n}\r\n\r\nexport interface TargetPointsMatchKind {\r\n  winnerPoints:number\r\n}\r\n\r\nexport type CompetitionStartDeadline = string | OnPlayerCountDeadline\r\n\r\nexport interface OnPlayerCountDeadline {\r\n  count:number\r\n  kind:string\r\n}\r\n\r\nexport interface Player {\r\n  name:string\r\n  password:string  \r\n}\r\n\r\nexport interface Competition {\r\n  players:Path[]\r\n  kind:MatchKind,\r\n  deadline:CompetitionStartDeadline\r\n}\r\n\r\nexport interface Card {\r\n  seed:string\r\n  \"number\":number  \r\n}\r\n\r\nexport function card(m:ModelCard):Card {\r\n    return {\r\n      number: m.number,\r\n      seed: Seed[m.seed]\r\n    }  \r\n  }\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/input.ts\n **/","import { Option, isNull } from \"flib\"\r\n\r\nexport module Http {\r\n\r\n  function fetchWithBody<B>(mthd: string): (url: string, body?: B) => Promise<Response> {\r\n    return (url, body) => {\r\n      if (url === undefined || url === null) throw new Error(\"making request at null url, body : \" + body)\r\n\r\n      const bdy = (body !== undefined && body !== null) ? JSON.stringify(body) : undefined\r\n      return window.fetch(url, {\r\n        method: mthd,\r\n        body: bdy\r\n      })\r\n    }\r\n  }\r\n\r\n  export function POST<B>(url: string, body?: B): Promise<Response> {\r\n    return fetchWithBody<B>(\"POST\")(url, body)\r\n  }\r\n\r\n  export function PUT<B>(url: string, body?: B): Promise<Response> {\r\n    return fetchWithBody<B>(\"PUT\")(url, body)\r\n  }\r\n\r\n  export function DELETE(url: string): Promise<Response> {\r\n    return window.fetch(url, {\r\n      method: \"DELETE\"\r\n    })\r\n  }\r\n\r\n  function parseJson(txt: string): Promise<any> {\r\n    try {\r\n      return Promise.resolve(JSON.parse(txt))\r\n    } catch (e) {\r\n      return Promise.reject(`Error parsing json ${e.message}`)\r\n    }\r\n  }\r\n\r\n  function statusOk(resp: Response): boolean {\r\n    const st = resp.status\r\n    return (st >= 200 && st < 300);\r\n  }\r\n\r\n  function reqDesc(req: Request): string {\r\n    return `${req.method} ${req.url}`\r\n  }\r\n\r\n  export const jsonResponseReader = (resp: Response, req: Request): Promise<any> => {\r\n    if (statusOk(resp)) {\r\n      return resp.text().then(parseJson)\r\n    } else {\r\n      return Promise.reject(`${reqDesc(req)} return status : ${resp.status}`)\r\n    }\r\n  }\r\n\r\n  export function createRequestFactory(reqInit: RequestInit): (url: string) => Request {\r\n    return (url: string) => {\r\n      return new Request(url, reqInit);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function observableWebSocket(url: string, protocol?: string | string[]): Rx.Observable<MessageEvent> {\r\n  if (isNull(url)) throw new Error(\"websocket error, url is undefined\")\r\n  if (isNull(WebSocket)) throw new Error(\"websocket error, WebSocket not supported in current environment\")\r\n\r\n  const channel = new Rx.Subject<MessageEvent>();\r\n  const socket = !isNull(protocol) ? new WebSocket(url, protocol) : new WebSocket(url);\r\n\r\n  function showEvent(e: Event) {\r\n    console.log(\"receive from websocket\")\r\n    console.log(e)\r\n  }\r\n\r\n  socket.onclose = showEvent\r\n  socket.onerror = showEvent\r\n  socket.onopen = showEvent\r\n  socket.onmessage = e => {\r\n    showEvent(e)\r\n    channel.onNext(e)\r\n  }\r\n\r\n  return channel;\r\n}\r\n\r\n/*\r\nfunction observableWebSocket1(url:string, protocol?: string | string[]): Rx.Observable<MessageEvent> {\r\n  const channel = new Rx.Subject<MessageEvent>()\r\n  const socket = protocol === undefined ? new WebSocket(url, protocol) : new WebSocket(url);\r\n\r\n  function showEvent(e:Event) {\r\n    console.log(\"receive from websocket\")\r\n    console.log(e)\r\n  }\r\n\r\n  socket.onclose = (e) => {\r\n    showEvent(e)\r\n    channel.onCompleted()\r\n  }\r\n\r\n  socket.onerror = (e) => {\r\n    showEvent(e)\r\n    channel.onError(e)\r\n  }\r\n\r\n  socket.onopen = showEvent\r\n\r\n  socket.onmessage = e => {\r\n    showEvent(e)\r\n    channel.onNext(e)\r\n  }\r\n\r\n  return channel;\r\n}\r\n*/\r\n\r\nexport function rxCollect<T, R>(obs: Rx.Observable<T>, pf: (v: T) => Option<R>): Rx.Observable<R> {\r\n  return obs.flatMap(v =>\r\n    pf(v).fold(\r\n      () => Rx.Observable.empty<R>(),\r\n      (v) => Rx.Observable.just<R>(v)\r\n    )\r\n  )\r\n}\r\n\r\n/*\r\n* adapted from https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n*/\r\nexport function objectAssign<A, B>(target: A, source: B): A & B {\r\n  if (target === undefined || target === null) {\r\n    throw new TypeError('Cannot convert undefined or null to object');\r\n  }\r\n\r\n  const output = Object(target);\r\n  if (source !== undefined && source !== null) {\r\n    for (const nextKey in source) {\r\n      if (source.hasOwnProperty(nextKey)) {\r\n        output[nextKey] = source[nextKey];\r\n      }\r\n    }\r\n  }\r\n  return output;\r\n}\r\n\r\nexport function copy<A, B>(a: A, b: B): A & B {\r\n  return objectAssign(objectAssign({}, a), b);\r\n}\r\n\r\nexport function merge<A, B>(target: A, source: B): A & B {\r\n  if (target === undefined || target === null) {\r\n    throw new TypeError('Cannot convert undefined or null to object');\r\n  }\r\n\r\n  const output = Object(target);\r\n  if (source !== undefined && source !== null) {\r\n    for (const nextKey in source) {\r\n      if (source.hasOwnProperty(nextKey)) {\r\n        const v = source[nextKey]\r\n        if (v !== null || v !== undefined) {\r\n          const oldv = output[nextKey]\r\n          if (Array.isArray(v)) {\r\n            if (Array.isArray(oldv)) {\r\n              output[nextKey] = oldv.concat(v)\r\n            } else {\r\n              output[nextKey] = v\r\n            }\r\n          } else if (typeof v === \"object\") {\r\n            if (typeof oldv === \"object\") {\r\n              output[nextKey] = merge(oldv, v)\r\n            } else {\r\n              output[nextKey] = v\r\n            }\r\n          } else {\r\n            output[nextKey] = v\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return output;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/Util.ts\n **/","import { observableWebSocket } from \"./Util\"\r\n\r\nimport * as Util from \"./Util\"\r\nimport { Option } from \"flib\"\r\nimport {\r\n  Path, Input, eventAndStateChoice,\r\n  GameEventAndState, BriscolaEvent, GameState, ActiveGameState, Card, gameStateChoice,\r\n  CompetitionEventAndState, CompetitionEvent, CompetitionState,\r\n  PlayerEventAndState, CurrentPlayer, PlayerEvent\r\n} from \"ddd-briscola-model\"\r\n\r\nimport { ResourceFetch, mapping } from \"nrest-fetch\"\r\n\r\nfunction asGameEventAndState(a: any): Option<GameEventAndState> {\r\n  if (a instanceof GameEventAndState) return Option.some(a)\r\n  else return Option.None;\r\n}\r\n\r\nfunction asCompetitionEventAndState(a: any): Option<CompetitionEventAndState> {\r\n  if (a instanceof CompetitionEventAndState) return Option.some(a)\r\n  else return Option.None;\r\n}\r\n\r\nfunction asPlayerEventAndState(a: any): Option<PlayerEventAndState> {\r\n  if (a instanceof PlayerEventAndState) return Option.some(a)\r\n  else return Option.None;\r\n}\r\n\r\nexport class PlayerService {\r\n  gamesChannel: Rx.Observable<GameEventAndState>\r\n  competitionsChannel: Rx.Observable<CompetitionEventAndState>\r\n  playersChannel: Rx.Observable<PlayerEventAndState>\r\n  eventsLog: Rx.Observable<BriscolaEvent | CompetitionEvent | PlayerEvent>\r\n\r\n  constructor(private resourceFetch: ResourceFetch, public player: CurrentPlayer) {\r\n    const webSocket: Rx.Observable<GameEventAndState | CompetitionEventAndState | PlayerEventAndState> = observableWebSocket(player.webSocket).flatMap((msgEv: MessageEvent) => {\r\n      const data = msgEv.data\r\n      if (typeof data === \"string\") {\r\n        const msg = JSON.parse(data)\r\n        return resourceFetch.fetchObject(msg, eventAndStateChoice).then(\r\n          (v) => Promise.resolve(v),\r\n          err => {\r\n            console.log(\"error parsing web socket message\")\r\n            console.log(`error ${err}`)\r\n            if (err && err.stack) console.log(err.stack)\r\n            console.log(data)\r\n            return Promise.reject(`error fetching event and state ${data}, error : ${err}`)\r\n          }\r\n        )\r\n      } else {\r\n        console.log(\"Error\")\r\n        console.log(\"msgEv.data:\")\r\n        console.log(data)\r\n        return Promise.reject(\"expecting string\")\r\n      }\r\n    })\r\n\r\n    this.gamesChannel = Util.rxCollect(webSocket, asGameEventAndState)\r\n    this.competitionsChannel = Util.rxCollect(webSocket, asCompetitionEventAndState)\r\n    this.playersChannel = Util.rxCollect(webSocket, asPlayerEventAndState)\r\n    this.eventsLog = webSocket.map(es => es.event)\r\n  }\r\n\r\n  createCompetition(players: Path[], kind: Input.MatchKind, deadlineKind: Input.CompetitionStartDeadline): Promise<CompetitionState> {\r\n    return Util.Http.POST<Input.Competition>(this.player.createCompetition, {\r\n      players: players,\r\n      kind: kind,\r\n      deadline: deadlineKind\r\n    }).then(p => this.resourceFetch.fetchObject(p, mapping(CompetitionState)))\r\n  }\r\n\r\n  playCard(gameState: ActiveGameState, mcard: Card): Option<Promise<GameState>> {\r\n\r\n    const card = Input.card(mcard)\r\n    const url: Option<Path> = gameState.playerState.map(ps => ps.self)\r\n\r\n    return url.map(url => {\r\n      return Util.Http.POST<Input.Card>(url, {\r\n        \"number\": card.number,\r\n        seed: card.seed\r\n      }).then(resp => {\r\n        return resp.json().then(ws => {\r\n          return this.resourceFetch.fetchObject(ws, gameStateChoice)\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  acceptCompetition(cs: CompetitionState): Option<Promise<CompetitionState>> {\r\n    return cs.accept.map(url =>\r\n      Util.Http.POST<void>(url).then(resp =>\r\n        resp.json().then(ws => this.resourceFetch.fetchObject(ws, mapping(CompetitionState)))))\r\n  }\r\n\r\n  declineCompetition(cs: CompetitionState): Option<Promise<CompetitionState>> {\r\n    return cs.decline.map(url =>\r\n      Util.Http.POST<void>(url).then(resp =>\r\n        resp.json().then(ws => this.resourceFetch.fetchObject(ws, mapping(CompetitionState)))))\r\n  }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/PlayerService.ts\n **/","import * as Reducers from \"./Reducers\"\r\nimport { Command } from \"./Command\"\r\n\r\nexport default function applicationDispatch(): (cmd: Command) => Reducers.AsynchStateChange {\r\n  return (cmd) => {\r\n    switch (cmd.type) {\r\n      case \"startApplication\": return Reducers.synchStateChange(st => st)\r\n      case \"createPlayer\":\r\n      case \"playerLogon\": return Reducers.playerLogon(cmd)\r\n      case \"playCard\": return Reducers.playCard(cmd)\r\n      case \"acceptCompetition\":\r\n      case \"declineCompetition\":\r\n      case \"startCompetition\": return Reducers.competitionCommands(cmd)\r\n      case \"diplayPlayerDeck\": return Reducers.synchReducer(Reducers.diplayPlayerDeck)(cmd)\r\n      case \"newDomainEvent\": return Reducers.synchReducer(Reducers.newDomainEvent)(cmd)\r\n      case \"selectPlayerForCompetition\": return Reducers.synchReducer(Reducers.selectPlayerForCompetition)(cmd)\r\n      case \"setCompetitionDeadline\": return Reducers.synchReducer(Reducers.setCompetitionDeadline)(cmd)\r\n      case \"setCompetitionKind\": return Reducers.synchReducer(Reducers.setCompetitionKind)(cmd)\r\n      case \"setCurrentGame\": return Reducers.synchReducer(Reducers.setCurrentGame)(cmd)\r\n      case \"updateCompetitionState\": return Reducers.synchReducer(Reducers.updateCompetionState)(cmd)\r\n      case \"updateGameState\": return Reducers.synchReducer(Reducers.updateGameState)(cmd)\r\n      case \"updatePlayersState\": return Reducers.synchReducer(Reducers.updatePlayersState)(cmd)\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/ApplicationDispatch.ts\n **/","import { Option, JsMap } from \"flib\"\r\nimport * as Commands from \"./Command\"\r\nimport { Board, GameState, ActiveGameState, FinalGameState, ViewFlag } from \"ddd-briscola-model\"\r\nimport { copy } from \"./Util\"\r\nimport { ApplicationState } from \"./ApplicationState\"\r\n\r\nexport type Command = Commands.Command\r\n\r\nexport type StateChange = (state: ApplicationState, dispatch: (cmd: Command) => Promise<ApplicationState>) => ApplicationState\r\nexport type AsynchStateChange = (state: ApplicationState, dispatch: (cmd: Command) => Promise<ApplicationState>) => Promise<ApplicationState>\r\n\r\nexport type ReducerType<C> = (command: C) => StateChange\r\nexport type AsynchReducerType<C> = (command: C) => AsynchStateChange\r\n\r\nexport function synchReducer<C>(rt: ReducerType<C>): AsynchReducerType<C> {\r\n  return (command: C) => synchStateChange(rt(command))\r\n}\r\nexport function synchStateChange(sc: StateChange): AsynchStateChange {\r\n  return (st, d) => {\r\n    try {\r\n      const r = sc(st, d)\r\n      return Promise.resolve(r)\r\n    } catch (e) {\r\n      return Promise.reject(e)\r\n    }\r\n  }\r\n}\r\n\r\nexport const playerLogon: AsynchReducerType<Commands.PlayerLogon | Commands.CreatePlayer> = (command) => (state, dispatch): Promise<ApplicationState> => {\r\n  const ps = state.playersService\r\n  const createPlayer = (command instanceof Commands.PlayerLogon) ? ps.logon(command.playerName, command.password) : ps.createPlayer(command.playerName, command.password)\r\n  return createPlayer.then(player => {\r\n    const playerService = state.createPlayerService(player)\r\n    playerService.eventsLog.subscribe(event => {\r\n      dispatch(new Commands.NewDomainEvent(event))\r\n    })\r\n\r\n    playerService.gamesChannel.subscribe(es => {\r\n      dispatch(new Commands.UpdateGameState(es.game))\r\n    })\r\n\r\n    playerService.competitionsChannel.subscribe(es => {\r\n      dispatch(new Commands.UpdateCompetitionState(es.competition))\r\n    })\r\n\r\n    playerService.playersChannel.subscribe(es => {\r\n      dispatch(new Commands.UpdatePlayersState(es.players))\r\n    })\r\n    const board = copy(state.board, {\r\n      player: Option.some(player)\r\n    })\r\n    const {createPlayerService, playersService, gameStateMap, competitionStateMap} = state\r\n    return {\r\n      playersService,\r\n      playerService: Option.some(playerService),\r\n      board,\r\n      gameStateMap, competitionStateMap,\r\n      createPlayerService\r\n    }\r\n  })\r\n}\r\n\r\nexport const playCard: AsynchReducerType<Commands.PlayCard> = (command) => (state) => {\r\n  return state.playerService.map(playerService => {\r\n    const game: Promise<ActiveGameState> = state.board.currentGame.fold(\r\n      () => Promise.reject(new Error(\"no current game\")),\r\n      g => (g instanceof ActiveGameState) ? Promise.resolve(g) : Promise.reject(new Error(\"game is not active\")))\r\n    return game.then(game => {\r\n      playerService.playCard(game, command.card);\r\n\r\n      const {createPlayerService, playersService, board, gameStateMap, competitionStateMap} = state\r\n      const nst: ApplicationState = {\r\n        playersService,\r\n        playerService: Option.some(playerService),\r\n        board,\r\n        gameStateMap, competitionStateMap,\r\n        createPlayerService,\r\n      };\r\n      return nst;\r\n    })\r\n  }).getOrElse(() => Promise.reject(\"player service not avaiable\"))\r\n}\r\n\r\nexport const competitionCommands: AsynchReducerType<Commands.CompetitionCommand> = (command) => (state, dispacth) => {\r\n  return state.playerService.map(playerService => {\r\n    if (command instanceof Commands.StartCompetition) {\r\n      const resp = playerService.createCompetition(Object.keys(state.board.competitionSelectedPlayers), state.board.competitionKind, state.board.competitionDeadlineKind)\r\n      return resp.then(r => state)\r\n    } else {\r\n      const competitionState = state.board.engagedCompetitions[command.competition]\r\n      if (competitionState != null && competitionState != undefined) {\r\n        if (command instanceof Commands.AcceptCompetition) {\r\n          return playerService.acceptCompetition(competitionState).fold(\r\n            () => Promise.reject(\"could not accept the competition\"),\r\n            () => Promise.resolve(state)\r\n          )\r\n        } else {\r\n          return playerService.declineCompetition(competitionState).fold(\r\n            () => Promise.reject(\"could not reject the competition\"),\r\n            () => Promise.resolve(state)\r\n          )\r\n        }\r\n      } else return Promise.reject(new Error(\"Invalid competition\"))\r\n    }\r\n  }).getOrElse(() => Promise.reject(new Error(\"Player service is unavaiable\")))\r\n}\r\n\r\nfunction boardReducer<C>(br: (command: C) => (board: Board) => Board): ReducerType<C> {\r\n  return (command) => (state) => {\r\n    const {createPlayerService, playersService, playerService, gameStateMap, competitionStateMap} = state\r\n    return {\r\n      playersService,\r\n      playerService,\r\n      board: br(command)(state.board),\r\n      gameStateMap, competitionStateMap,\r\n      createPlayerService\r\n    }\r\n  }\r\n}\r\n\r\nexport const selectPlayerForCompetition: ReducerType<Commands.SelectPlayerForCompetition> = boardReducer<Commands.SelectPlayerForCompetition>((command) => (board) => {\r\n  if (command.selected) {\r\n    return copy(board, {\r\n      competitionSelectedPlayers:JsMap.merge([board.competitionSelectedPlayers, {\r\n        [command.player]: true\r\n      }])\r\n    })\r\n  } else {\r\n    const cpy = copy(board, {})\r\n    delete cpy.competitionSelectedPlayers[command.player];\r\n    return cpy\r\n  }\r\n})\r\n\r\nexport const setCompetitionKind = boardReducer<Commands.SetCompetitionKind>((command) => (board) => {\r\n  return copy(board, {\r\n    competitionKind: command.kind\r\n  })\r\n})\r\n\r\nexport const setCompetitionDeadline = boardReducer<Commands.SetCompetitionDeadline>((command) => (board) => {\r\n  return copy(board, {\r\n    competitionDeadlineKind: command.deadlineKind\r\n  })\r\n})\r\n\r\nexport const setCurrentGame = boardReducer<Commands.SetCurrentGame>((command) => (board) => {\r\n  return copy(board, {\r\n    currentGame: Option.option<GameState>(board.activeGames[command.game]).orElse(() => Option.option(board.finishedGames[command.game]))\r\n  })\r\n})\r\n\r\nexport const diplayPlayerDeck = boardReducer<Commands.DiplayPlayerDeck>((command) => (board) => {\r\n  return copy(board, {\r\n    viewFlag: command.display === true ? ViewFlag.showPlayerCards : ViewFlag.normal\r\n  })\r\n})\r\n\r\nexport const updatePlayersState = boardReducer<Commands.UpdatePlayersState>((command) => (board) => {\r\n  return copy(board, {\r\n    players: board.player.map(cp => command.players.filter(pl => pl.self !== cp.self)).getOrElse(() => command.players)\r\n  })\r\n})\r\n\r\nexport const updateGameState = boardReducer<Commands.UpdateGameState>((command) => (board) => {\r\n  const gm = command.gameState\r\n  let res: Board = board\r\n  const currentGame = board.currentGame.fold<void>(\r\n    () => Option.some(gm),\r\n    (cgm) => {\r\n      if (gm.self === cgm.self) {\r\n        return Option.some(gm)\r\n      } else {\r\n        return Option.some(cgm)\r\n      }\r\n    })\r\n  if (gm instanceof ActiveGameState) {\r\n    res = copy(board, {\r\n      currentGame,\r\n      activeGames: JsMap.merge([board.activeGames, {\r\n        [gm.self]: gm\r\n      }])\r\n    });\r\n  } else if (gm instanceof FinalGameState) {\r\n    res = copy(board, {\r\n      currentGame,\r\n      finishedGames: JsMap.merge([board.finishedGames, {\r\n        [gm.self]: gm\r\n      }])\r\n    })\r\n    delete res.activeGames[gm.self];\r\n  }\r\n  return res;\r\n})\r\n\r\nexport const updateCompetionState = boardReducer<Commands.UpdateCompetitionState>((command) => (board) => {\r\n  return copy(board, {\r\n    engagedCompetitions: JsMap.merge([ board.engagedCompetitions, {\r\n      [command.competitionState.self]: command.competitionState\r\n    }])\r\n  })\r\n})\r\n\r\nexport const newDomainEvent = boardReducer<Commands.NewDomainEvent>((command) => (board) => {\r\n  return copy(board, {\r\n    eventsLog: [command.event].concat(board.eventsLog)\r\n  })\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/Reducers.ts\n **/","import { Card, Path, Input, GameState, CompetitionState, Player, BriscolaEvent, CompetitionEvent, PlayerEvent } from \"ddd-briscola-model\"\r\n\r\nexport type Command = StarApplication | CreatePlayer | PlayerLogon | CompetitionCommand | PlayCard | SelectPlayerForCompetition |\r\n  SetCompetitionKind | SetCompetitionDeadline | SetCurrentGame | DiplayPlayerDeck |\r\n  UpdateGameState | UpdatePlayersState | UpdateCompetitionState | NewDomainEvent\r\n\r\nexport class StarApplication {\r\n  public type: \"startApplication\" = \"startApplication\"\r\n  constructor() { }\r\n}\r\n\r\nexport class CreatePlayer {\r\n  public type: \"createPlayer\" = \"createPlayer\"\r\n  constructor(public playerName: string, public password: string) { }\r\n}\r\n\r\nexport class PlayerLogon {\r\n  public type: \"playerLogon\" = \"playerLogon\"\r\n  constructor(public playerName: string, public password: string) { }\r\n}\r\n\r\nexport class StartCompetition {\r\n  public type: \"startCompetition\" = \"startCompetition\"\r\n  constructor() { }\r\n}\r\n\r\nexport class AcceptCompetition {\r\n  public type: \"acceptCompetition\" = \"acceptCompetition\"\r\n  constructor(public competition: Path) { }\r\n}\r\n\r\nexport class DeclineCompetition {\r\n  public type: \"declineCompetition\" = \"declineCompetition\"\r\n  constructor(public competition: Path) { }\r\n}\r\n\r\nexport type CompetitionCommand = StartCompetition | AcceptCompetition | DeclineCompetition\r\n\r\nexport class PlayCard {\r\n  public type: \"playCard\" = \"playCard\"\r\n  constructor(public card: Card) { }\r\n}\r\n\r\nexport class SelectPlayerForCompetition {\r\n  public type: \"selectPlayerForCompetition\" = \"selectPlayerForCompetition\"\r\n  constructor(public player: Path, public selected: boolean) { }\r\n}\r\n\r\nexport class SetCompetitionKind {\r\n  public type: \"setCompetitionKind\" = \"setCompetitionKind\"\r\n  constructor(public kind: Input.MatchKind) { }\r\n}\r\n\r\nexport class SetCompetitionDeadline {\r\n  public type: \"setCompetitionDeadline\" = \"setCompetitionDeadline\"\r\n  constructor(public deadlineKind: Input.CompetitionStartDeadline) { }\r\n}\r\n\r\nexport class SetCurrentGame {\r\n  public type: \"setCurrentGame\" = \"setCurrentGame\"\r\n  constructor(public game: Path) { }\r\n}\r\n\r\nexport class DiplayPlayerDeck {\r\n  public type: \"diplayPlayerDeck\" = \"diplayPlayerDeck\"\r\n  constructor(public game: Path, public display: boolean) { }\r\n}\r\n\r\nexport class UpdateGameState {\r\n  public type: \"updateGameState\" = \"updateGameState\"\r\n  constructor(public gameState: GameState) { }\r\n}\r\n\r\nexport class UpdatePlayersState {\r\n  public type: \"updatePlayersState\" = \"updatePlayersState\"\r\n  constructor(public players: Player[]) { }\r\n}\r\n\r\nexport class UpdateCompetitionState {\r\n  public type: \"updateCompetitionState\" = \"updateCompetitionState\"\r\n  constructor(public competitionState: CompetitionState) { }\r\n}\r\n\r\nexport class NewDomainEvent {\r\n  public type: \"newDomainEvent\" = \"newDomainEvent\"\r\n  constructor(public event: (BriscolaEvent | CompetitionEvent | PlayerEvent)) { }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/Command.ts\n **/","import {Path, Player,Card, CompetitionState, Board} from \"ddd-briscola-model\"\r\nimport {Commands} from \"ddd-briscola-app\"\r\n\r\nimport Command = Commands.Command\r\n\r\nexport interface Clickable {\r\n  onClick?():void  \r\n}\r\n\r\nexport interface StartCompetitionListener {\r\n  onStartCompetition(): void\r\n}\r\n\r\nexport interface PlayerLoginListener {\r\n  onCreatePlayer(name: string, password: string): void\r\n  onPlayerLogin(name: string, password: string): void\r\n}\r\n\r\nexport interface PlayerSelectionListener {\r\n  onPlayerSelection(player: Player, selected: boolean): void\r\n}\r\n\r\nexport interface CompetionJoinListener {\r\n  onAcceptCompetition(cid:CompetitionState):void\r\n  onDeclineCompetition(cid:CompetitionState):void\r\n}\r\n\r\nexport interface CardSelectionListener {\r\n  onSelectedCard(c:Card):void  \r\n}\r\n\r\nexport interface PlayCardListener {\r\n  onPlayCard(c:Card):void  \r\n}\r\n\r\nexport interface PlayerDeckSelectionListener {\r\n  onPlayerDeck(gameId:Path, display:boolean):void  \r\n}\r\n\r\nexport interface GameListener {\r\n  onSelectedGame(gm:Path):void\r\n}\r\n\r\nexport interface BoardListener extends PlayerLoginListener, StartCompetitionListener, PlayerSelectionListener, CompetionJoinListener, GameListener, PlayCardListener, PlayerDeckSelectionListener {\r\n}\r\n\r\nexport function createBoardCommandListener(board: Board, commandListener: (cmd: Command) => void) {\r\n  return {\r\n    board:board,\r\n    onStartCompetition: () => {\r\n      commandListener(new Commands.StartCompetition())\r\n    },\r\n    onCreatePlayer: (name: string, password:string) => {\r\n      commandListener(new Commands.CreatePlayer(name, password))\r\n    },\r\n    onPlayerLogin: (name: string, password:string) => {\r\n      commandListener(new Commands.PlayerLogon(name, password))\r\n    },\r\n    onPlayerSelection: (player: Player, selected: boolean) => {\r\n      commandListener(new Commands.SelectPlayerForCompetition(player.self, selected));\r\n    },\r\n    onAcceptCompetition:(cid:CompetitionState) => {\r\n      commandListener(new Commands.AcceptCompetition(cid.self))\r\n    },\r\n    onDeclineCompetition:(cid:CompetitionState) => {\r\n      commandListener(new Commands.DeclineCompetition(cid.self))\r\n    },\r\n    onSelectedGame:(gm:Path) => {\r\n      commandListener(new Commands.SetCurrentGame(gm))\r\n    },\r\n    onPlayCard:(c:Card) => {\r\n      commandListener(new Commands.PlayCard(c))       \r\n    },\r\n    onPlayerDeck:(game:Path, display:boolean) => {\r\n      commandListener(new Commands.DiplayPlayerDeck(game, display))\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/listeners.ts\n **/","import {isNull} from \"flib\"\r\nimport {GameState, ActiveGameState} from \"ddd-briscola-model\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport {GameListener, BoardListener, StartCompetitionListener, PlayerDeckSelectionListener, PlayCardListener} from \"./listeners\"\r\nimport cssClasses from \"./cssClasses\"\r\nimport {Card, EmptyCard, CardBack} from \"./cards\"\r\nimport {EventsLog} from \"./EventsLog\"\r\nimport {GameResult} from \"./GameResult\"\r\nimport {PlayerDeckSummary} from \"./PlayerDeck\"\r\nimport {PlayerLogin} from \"./PlayerLogin\"\r\nimport {CurrentPlayer, Players} from \"./Players\"\r\n\r\nclass StartCompetition extends React.Component<StartCompetitionListener, void> {\r\n  constructor() {\r\n    super()\r\n  }\r\n  render() {\r\n    const props = this.props\r\n    return (\r\n      <input type=\"button\"\r\n        onClick = { e => props.onStartCompetition() }\r\n        value=\"Create Competition\"></input>\r\n    )\r\n  }\r\n}\r\n\r\nexport interface GameProps<G extends GameState> extends PlayerDeckSelectionListener, PlayCardListener {\r\n  game: G\r\n}\r\n\r\nexport class GameTable extends React.Component<{ game:ActiveGameState }, void> {\r\n  render() {\r\n    const gm = this.props.game\r\n    let elemEvs = gm.moves.map((mv, idx) =>\r\n      <div key={idx}>\r\n        <Card card={mv.card} />\r\n        <span>{mv.player.name}</span>\r\n      </div>\r\n    )\r\n    elemEvs = elemEvs.concat(gm.nextPlayers.map((p, idx) =>\r\n      <div key={idx + gm.moves.length}>\r\n        <EmptyCard />\r\n        <span>{p.name}</span>\r\n      </div>\r\n    ))\r\n    elemEvs.push(\r\n      <div key={gm.nextPlayers.length + gm.moves.length + 1}>\r\n        <Card card={gm.briscolaCard} classes={[cssClasses.halfCard]} />\r\n        <CardBack classes={[cssClasses.halfCard]}/>\r\n        <span>{gm.deckCardsNumber}</span>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={cssClasses.cards}>\r\n        {elemEvs}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport interface BoardProps extends BoardListener {\r\n  board: Model.Board\r\n}\r\n\r\nfunction showCompetitionButton(board: Model.Board): boolean {\r\n  const len = Object.keys(board.competitionSelectedPlayers).length + 1\r\n  return (len >= board.config.minPlayersNumber) && (len <= board.config.maxPlayersNumber)\r\n}\r\n\r\nexport class PlayerCards extends React.Component<GameProps<ActiveGameState>, void> {\r\n  render() {\r\n    const props = this.props\r\n    const gameId = props.game.self\r\n    const playerState = props.game.playerState\r\n    const elems = playerState.map(ps =>\r\n      ps.cards.map((card, idx) => <div key={idx}><Card card={card} onClick={ () => props.onPlayCard(card) } /></div>)\r\n    ).getOrElse(() => [<span key=\"0\">Player has no cards</span>])\r\n\r\n    return (\r\n      <div className={cssClasses.cards}>\r\n        {elems}\r\n        <div>\r\n          <CardBack onClick={ () => props.onPlayerDeck(gameId, true) } />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass Game extends React.Component<GameProps<Model.GameState>, void> {\r\n  render() {\r\n    const props = this.props\r\n    const gm = props.game\r\n    return Model.GameState.fold(gm,\r\n      (gm: Model.ActiveGameState) =>\r\n        <section>\r\n          <GameTable game={gm} />\r\n          <PlayerCards game={gm} onPlayerDeck={props.onPlayerDeck} onPlayCard={props.onPlayCard}/>\r\n        </section>,\r\n      (gm: Model.FinalGameState) =>\r\n        <section>\r\n          <GameResult game={gm} />\r\n        </section>,\r\n      (gm: Model.DroppedGameState) =>\r\n        <section>\r\n          <h1>Dropped Game !!!</h1>\r\n        </section>\r\n    )\r\n  }\r\n}\r\n\r\n\r\ninterface GamesNavProps extends GameListener {\r\n  classes?:string[]\r\n  current:Model.Path\r\n  games:Model.Path[]\r\n}\r\n\r\nclass GamesNav extends React.Component<GamesNavProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const games = props.games\r\n    const clss = ([cssClasses.gamesNav].concat( isNull(props.classes) ? [] : props.classes)).join(\" \")\r\n    return games.length == 0 ?\r\n      <noscript /> :\r\n      <div className={clss}>\r\n        {games.map( (gm, idx) => {\r\n          const selectedClassName = props.current === gm ? cssClasses.selected : \"\"\r\n          return <span className={selectedClassName} onClick={ ev => props.onSelectedGame(gm) } key={gm}>{idx}</span>\r\n        })}\r\n      </div>;\r\n  }\r\n}\r\n\r\nexport class Board extends React.Component<BoardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const board = this.props.board;\r\n\r\n    const gameSection = board.currentGame.map(gm =>\r\n      <section>\r\n        <Game game={gm} onPlayerDeck={props.onPlayerDeck} onPlayCard={props.onPlayCard} />\r\n        <GamesNav current={gm.self} games={Object.keys(board.activeGames)} onSelectedGame={props.onSelectedGame} />\r\n        <GamesNav current={gm.self} games={Object.keys(board.finishedGames)} onSelectedGame={props.onSelectedGame} />\r\n      </section>\r\n    ).getOrElse(() => <noscript /> )\r\n\r\n    const playerDeckDialog = board.viewFlag === Model.ViewFlag.showPlayerCards ?\r\n      board.currentGame.map( gm =>\r\n        Model.GameState.fold(gm,\r\n          (gm) => <PlayerDeckSummary cards={gm.playerState.map(ps => ps.score.cards).getOrElse( () => []) } onClose={ () => props.onPlayerDeck(gm.self, false) } />,\r\n          (gm) => <noscript />,\r\n          (gm) => <noscript /> )\r\n      ).getOrElse( () => <noscript /> ) : <noscript />\r\n\r\n    const startCompetitionButton = showCompetitionButton(board) ? <StartCompetition onStartCompetition={props.onStartCompetition} /> : <noscript />\r\n    return board.player.map(pl => (\r\n      <div>\r\n        {playerDeckDialog}\r\n        <CurrentPlayer {...pl} />\r\n        <Players players={board.players}\r\n          selectedPlayers={ board.competitionSelectedPlayers }\r\n          onPlayerSelection={ props.onPlayerSelection } />\r\n        {startCompetitionButton}\r\n        {gameSection}\r\n        <EventsLog events={board.eventsLog}\r\n          onAcceptCompetition={ props.onAcceptCompetition }\r\n          onDeclineCompetition={ props.onDeclineCompetition }\r\n          onSelectedGame={ props.onSelectedGame } />\r\n      </div>\r\n    )).getOrElse(() => (\r\n      <PlayerLogin onCreatePlayer={ props.onCreatePlayer } onPlayerLogin={ props.onPlayerLogin }/>\r\n    ))\r\n\r\n  }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Board.tsx\n **/","export default  {\r\n  card: \"card\",\r\n  emptyCard: \"card-empty\",\r\n  cardBack: \"card-back\",\r\n  halfCard: \"card-half\",\r\n  cards: \"cards\",\r\n  currentPlayer: \"current-player\",\r\n  players: \"players\",\r\n  createPlayer: \"create-player\",\r\n  eventLog: \"event-log\",\r\n  \r\n  playerDeckLayer:\"player-deck-layer\",\r\n  playerDeckSummary:\"player-deck-summary\",\r\n  \r\n  gamesNav:\"games-nav\",\r\n  \r\n  selected:\"selected\"\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/cssClasses.ts\n **/","import {Clickable} from \"./listeners\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport cssClasses from \"./cssClasses\"\r\nimport {isNull} from \"flib\"\r\n\r\nexport interface CardProps extends Clickable {\r\n  classes?: string[]\r\n  key?: string | number\r\n  card: Model.Card\r\n}\r\n\r\nexport class Card extends React.Component<CardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const card = props.card;\r\n    const clss = isNull(props.classes) ? \"\" : props.classes.join(\" \")\r\n    const className = `${cssClasses.card} ${clss} card_${Model.Seed[card.seed]}_${card.number}`\r\n    const extra = isNull(props.key) ? {} : { key: props.key };\r\n    const onClick = (ev:React.MouseEvent) => {\r\n      console.log(\"triggered card onClick\")\r\n      props.onClick && props.onClick()\r\n    }\r\n    return (\r\n      <img\r\n        {...extra}\r\n        className={className}\r\n        onClick={onClick} />\r\n    );\r\n  }\r\n}\r\n\r\nexport interface EmptyCardProps extends Clickable {\r\n  classes?: string[]\r\n}\r\n\r\nexport class EmptyCard extends React.Component<EmptyCardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const clss = isNull(props.classes) ? \"\" : props.classes.join(\" \")\r\n    return (\r\n      <img className={`${cssClasses.card} ${clss} ${cssClasses.emptyCard}`}\r\n        onClick={ev => !isNull(props.onClick) ? props.onClick() : undefined } />\r\n    );\r\n  }\r\n}\r\n\r\nexport class CardBack extends React.Component<EmptyCardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const clss = isNull(props.classes) ? \"\" : props.classes.join(\" \")\r\n    return (\r\n      <img className={`${cssClasses.card} ${clss} ${cssClasses.cardBack}`}\r\n        onClick={ev => !isNull(props.onClick) ? props.onClick() : undefined } />\r\n    );\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/cards.tsx\n **/","import * as Model from \"ddd-briscola-model\"\r\n\r\nimport {CompetionJoinListener, GameListener} from \"./listeners\"\r\n\r\nimport PlayerEventKind = Model.PlayerEventKind\r\nimport BriscolaEventKind = Model.BriscolaEventKind\r\nimport CompetitionEventKind = Model.CompetitionEventKind\r\nimport cssClasses from \"./cssClasses\"\r\n\r\nexport type EventLogEvent = Model.BriscolaEvent | Model.CompetitionEvent | Model.PlayerEvent\r\n\r\nexport interface EventLogProps extends CompetionJoinListener, GameListener {\r\n  events: EventLogEvent[]\r\n}\r\n\r\nexport class EventsLog extends React.Component<EventLogProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const events = props.events\r\n    const elemEvs = events.map((event, i) => {\r\n      switch (event.eventName) {\r\n        case PlayerEventKind[PlayerEventKind.playerLogOn]: {\r\n          const ev = event as Model.PlayerLogOn\r\n          return (\r\n            <div key={i}>Player <b>{ev.player.name}</b> log on</div>\r\n          )\r\n        }\r\n\r\n        case PlayerEventKind[PlayerEventKind.playerLogOff]: {\r\n          const ev = event as Model.PlayerLogOff\r\n          return (\r\n            <div key={i}>Player <b>{ev.player.name}</b> log off</div>\r\n          )\r\n        }\r\n\r\n        case CompetitionEventKind[CompetitionEventKind.createdCompetition]: {\r\n          const ev = event as Model.CreatedCompetition\r\n          return (\r\n            <div key={i}>\r\n              <p>Player {ev.issuer.name} invited you !!!</p>\r\n              <p>players are {ev.competition.competition.players.map(pl => <b>{pl.name} </b>) } of kind <b>{Model.MatchKindKind[ev.competition.competition.kind.kind]}</b> </p>\r\n              <p>\r\n              {ev.competition.accept.map(url =>\r\n                <button onClick={ clkEv => props.onAcceptCompetition(ev.competition) } key=\"1\" >Accept competiton</button>\r\n              ).getOrElse( () => <noscript /> )}\r\n              {ev.competition.decline.map(url =>\r\n                <button onClick={ clkEv => props.onDeclineCompetition(ev.competition) } key=\"1\" >Decline competiton</button>\r\n              ).getOrElse( () => <noscript /> )}\r\n              </p>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        case BriscolaEventKind[BriscolaEventKind.gameStarted]: {\r\n          const ev = event as Model.GameStarted\r\n          return (\r\n            <div key={i}>\r\n              <a href=\"#\" onClick={ cev => props.onSelectedGame(ev.game.self) } >A game has started</a>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        case BriscolaEventKind[BriscolaEventKind.cardPlayed]: {\r\n          const ev = event as Model.CardPlayed\r\n          return (\r\n            <div key={i}>\r\n              <a href=\"#\" onClick={ cev => props.onSelectedGame(ev.game.self) } >{ev.player.name} played {ev.card.number} {Model.Seed[ev.card.seed]}</a>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        default: {\r\n          return (\r\n            <div key={i}>\r\n              <textarea rows={4} cols={80} defaultValue={JSON.stringify(event)}></textarea>\r\n            </div>\r\n          )\r\n        }\r\n      }\r\n    })\r\n\r\n    return (\r\n      <div className={cssClasses.eventLog}>\r\n        {elemEvs}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/EventsLog.tsx\n **/","import * as Model from \"ddd-briscola-model\"\r\nimport cssClasses from \"./cssClasses\"\r\nimport {TabPane, TabPaneItem} from \"./TabPane\"\r\nimport {PlayerDeckSummaryCards} from \"./PlayerDeck\"\r\n\r\nfunction playersGameResultTabPaneItems(gameRes:Model.PlayersGameResult):TabPaneItem[] {\r\n  return gameRes.playersOrderByPoints.map( pl => {\r\n    const r:TabPaneItem = {\r\n      activator:(selected:boolean, selectItem:() => void, idx:number) => {\r\n        return <span key={idx}><button onClick={ ev => selectItem() }>{pl.player.name}</button></span>\r\n      },\r\n      content:() => {\r\n        return (\r\n          <div>\r\n            <PlayerDeckSummaryCards cards={pl.score.cards} />\r\n            <div className={cssClasses.playerDeckSummary}>\r\n              <span>{pl.points}</span>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return r;\r\n  })\r\n}\r\n\r\nfunction teamGameResultTabPaneItems(gameRes:Model.TeamsGameResult):TabPaneItem[] {\r\n  return gameRes.teamsOrderByPoints.map( teamScore => {\r\n    const total = teamScore.points\r\n    const r:TabPaneItem = {\r\n      activator:(selected:boolean, selectItem:() => void, idx:number) => {\r\n        return <span key={idx}><button onClick={ ev => selectItem() }>{teamScore.teamName} : {teamScore.players.map( pl => pl.name ).join(\", \")}</button></span>\r\n      },\r\n      content:() => {\r\n        return (\r\n          <div>\r\n            <PlayerDeckSummaryCards cards={teamScore.cards} />\r\n            <div className={cssClasses.playerDeckSummary}>\r\n              <span>{total}</span>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return r;\r\n  })\r\n}\r\n\r\nfunction playersResultsTabPaneItems(gm: Model.FinalGameState):TabPaneItem[] {\r\n  const gmRes = gm.gameResult\r\n  if (gmRes instanceof Model.TeamsGameResult) return teamGameResultTabPaneItems(gmRes)\r\n  else if (gmRes instanceof Model.PlayersGameResult) return playersGameResultTabPaneItems(gmRes)\r\n  throw new Error(\"unexcepted \"+gm)\r\n}\r\n\r\nexport class GameResult extends React.Component<{ game:Model.FinalGameState }, void> {\r\n  render() {\r\n    const props = this.props\r\n    const gm = props.game\r\n    return <TabPane panes={playersResultsTabPaneItems(gm)} />\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/GameResult.tsx\n **/","import ReactElement = React.ReactElement\r\nimport {isNull} from \"flib\"\r\n\r\nexport interface TabPaneProps {\r\n  /**\r\n   * fixme: remove classes, replace with function layout(mainArea, activators) => ReactElement\r\n   */\r\n  classes?:TabPaneClasses\r\n  panes:TabPaneItem[]\r\n}\r\n\r\nexport interface TabPaneClasses {\r\n  container?:string\r\n  mainArea?:string\r\n  activatorsContainer?:string\r\n}\r\n\r\nexport interface TabPaneItem {\r\n  activator(selected:boolean, selectItem:() => void, index:number):ReactElement<any>\r\n  content(index:number):ReactElement<any>\r\n}\r\n\r\nexport interface TabPaneState {\r\n  current:number\r\n}\r\n\r\nexport class TabPane extends React.Component<TabPaneProps, TabPaneState> {\r\n  state = {\r\n    current:0\r\n  }\r\n  render() {\r\n    const props = this.props\r\n    const currIdx = this.state.current\r\n    const curr = props.panes[currIdx]\r\n    const mainArea:ReactElement<any> = isNull(curr) ? (<div>missing pane</div>) : (curr.content(currIdx));\r\n    const activators:ReactElement<any>[] = props.panes.map( (pane, idx) =>\r\n      pane.activator((idx === currIdx), () => { this.setState({ current:idx }) }, idx )\r\n    )\r\n    return (\r\n      <div className={props.classes && props.classes.container || \"\"}>\r\n        <div className={props.classes && props.classes.mainArea || \"\"}>\r\n          {mainArea}\r\n        </div>\r\n        <div className={props.classes && props.classes.activatorsContainer || \"\"}>\r\n          {activators}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/TabPane.tsx\n **/","import {Arrays} from \"flib\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport {Card} from \"./cards\"\r\nimport cssClasses from \"./cssClasses\"\r\n\r\nexport interface PlayerDeckProps {\r\n  cards:Model.Card[]\r\n  onClose():void\r\n}\r\n\r\nexport class PlayerDeckSummaryCards  extends React.Component<{ cards:Model.Card[] }, void> {\r\n  render() {\r\n    const cards = this.props.cards\r\n    const cardsBySeed = Arrays.groupBy(cards, c => Model.Seed[c.seed])\r\n    const items = Object.keys(cardsBySeed).map( (seed, idx) => {\r\n      const cards = cardsBySeed[seed];\r\n      cards.sort( (ca, cb) => {\r\n        const r = cb.points - ca.points\r\n        return (r !== 0) ? r : (cb.number - ca.number);\r\n      });\r\n      const total = Arrays.foldLeft(cards, 0, (acc, card) => acc + card.points);\r\n      return (\r\n        <div key={idx} className={cssClasses.playerDeckSummary}>\r\n          <span>{total}</span>\r\n          {cards.map( (card, idx) => <Card key={idx} card={card} /> )}\r\n        </div>\r\n      );\r\n    })\r\n    return <div>{items}</div>\r\n  }\r\n}\r\n\r\nexport class PlayerDeckSummary extends React.Component<PlayerDeckProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const total = Arrays.foldLeft(props.cards, 0, (acc, card) => acc + card.points)\r\n    return (\r\n      <div>\r\n      <div className={cssClasses.playerDeckLayer}>\r\n        <PlayerDeckSummaryCards cards={props.cards} />\r\n        <div>\r\n          <span>{total}</span>\r\n        </div>\r\n        <div>\r\n          <button onClick={props.onClose}>Close</button>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/PlayerDeck.tsx\n **/","import {PlayerLoginListener} from \"./listeners\"\r\n\r\nexport class PlayerLogin extends React.Component<PlayerLoginListener, void> {\r\n  static playerNameRef = \"playerName\"\r\n  static playerPasswordRef = \"playerPasswordRef\"\r\n  constructor() {\r\n    super()\r\n  }\r\n  private inputRef(nm: string): HTMLInputElement {\r\n    return this.refs[nm] as HTMLInputElement;\r\n  }\r\n  private playerName(): HTMLInputElement {\r\n    return this.inputRef(PlayerLogin.playerNameRef);\r\n  }\r\n  private playerPassword(): HTMLInputElement {\r\n    return this.inputRef(PlayerLogin.playerPasswordRef);\r\n  }\r\n  render() {\r\n    const props = this.props\r\n    return (\r\n      <div className=\"{cssClasses.createPlayer} my-exp-style\">\r\n        <input ref={PlayerLogin.playerNameRef} type=\"text\" ></input>\r\n        <input ref={PlayerLogin.playerPasswordRef} type=\"password\" ></input>\r\n        <input type=\"button\"\r\n          onClick = { e => props.onCreatePlayer(this.playerName().value, this.playerPassword().value) }\r\n          value=\"Create Player\"></input>\r\n        <input type=\"button\"\r\n          onClick = { e => props.onPlayerLogin(this.playerName().value, this.playerPassword().value) }\r\n          value=\"Log in\"></input>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/PlayerLogin.tsx\n **/","import {JsMap} from \"flib\"\r\nimport {Player} from \"ddd-briscola-model\"\r\nimport {PlayerSelectionListener} from \"./listeners\"\r\nimport cssClasses from \"./cssClasses\"\r\n\r\nexport class CurrentPlayer extends React.Component<Player, void> {\r\n  render() {\r\n    var player = this.props;\r\n    return (\r\n      <div className={cssClasses.currentPlayer}>\r\n        <h5>Current player: </h5>\r\n        <h4>{player.name}</h4>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport interface PlayersProps extends PlayerSelectionListener {\r\n  players: Player[]\r\n  selectedPlayers: JsMap<boolean>\r\n}\r\n\r\nexport class Players extends React.Component<PlayersProps, void> {\r\n  render() {\r\n    const players = this.props.players;\r\n    const selectedPlayers = this.props.selectedPlayers\r\n    const playersElems = players.map((pl, idx) =>\r\n      <div key={idx}>\r\n        <input type=\"checkbox\"\r\n          onChange={ (e) => this.props.onPlayerSelection(pl, !(selectedPlayers[pl.self] === true)) }\r\n          defaultChecked={selectedPlayers[pl.self]}>\r\n          </input>\r\n        <span>{pl.name}</span>\r\n      </div>\r\n    )\r\n    return (\r\n      <div className={cssClasses.players}>\r\n        {playersElems}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Players.tsx\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./styles/App.styl\n ** module id = 50\n ** module chunks = 0\n **/"],"sourceRoot":""}