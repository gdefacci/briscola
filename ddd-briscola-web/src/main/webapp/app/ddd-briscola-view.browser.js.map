{"version":3,"sources":["webpack:///webpack/bootstrap f26bb58f9b3a0db55728","webpack:///./Main.tsx","webpack:///../~/ddd-briscola-app/src/index.ts","webpack:///../~/ddd-briscola-app/src/lib/App.ts","webpack:///../~/ddd-briscola-app/src/lib/CommandID.ts","webpack:///../~/ddd-briscola-app/src/lib/Reducers.ts","webpack:///../~/flib/src/index.ts","webpack:///../~/flib/src/lib/Arrays.ts","webpack:///../~/flib/src/lib/Option.ts","webpack:///../~/flib/src/lib/isNull.ts","webpack:///../~/flib/src/lib/JsMap.ts","webpack:///../~/flib/src/lib/lazy.ts","webpack:///../~/flib/src/lib/fail.ts","webpack:///../~/ddd-briscola-app/src/lib/commands.ts","webpack:///../~/ddd-briscola-app/src/lib/PlayersService.ts","webpack:///../~/ddd-briscola-model/src/index.ts","webpack:///../~/ddd-briscola-model/src/lib/board.ts","webpack:///../~/ddd-briscola-model/src/lib/competition.ts","webpack:///../~/ddd-briscola-model/src/lib/model.ts","webpack:///../~/rest-fetch/src/index.ts","webpack:///../~/rest-fetch/src/lib/Link.ts","webpack:///../~/rest-fetch/src/lib/types.ts","webpack:///../~/rest-fetch/src/lib/SimpleConverter.ts","webpack:///../~/rest-fetch/src/lib/Selector.ts","webpack:///../~/rest-fetch/src/lib/TypeExpr.ts","webpack:///../~/rest-fetch/src/lib/Meta.ts","webpack:///../~/rest-fetch/src/lib/EntriesMap.ts","webpack:///../~/rest-fetch/src/lib/Fetch.ts","webpack:///../~/rest-fetch/src/lib/ResponseReader.ts","webpack:///../~/rest-fetch/src/lib/RequestFactory.ts","webpack:///../~/rest-fetch/src/lib/cache.ts","webpack:///../~/rest-fetch/src/lib/Converter.ts","webpack:///../~/rest-fetch/src/lib/InternalConversion.ts","webpack:///../~/rest-fetch/src/lib/Util.ts","webpack:///../~/rest-fetch/src/lib/ObjectsCache.ts","webpack:///../~/ddd-briscola-model/src/lib/player.ts","webpack:///../~/ddd-briscola-model/src/lib/competitionEvents.ts","webpack:///../~/ddd-briscola-model/src/lib/game.ts","webpack:///../~/ddd-briscola-model/src/lib/gameEvents.ts","webpack:///../~/ddd-briscola-model/src/lib/sitemap.ts","webpack:///../~/ddd-briscola-model/src/lib/EventAndState.ts","webpack:///../~/ddd-briscola-model/src/lib/input.ts","webpack:///../~/ddd-briscola-app/src/lib/Util.ts","webpack:///../~/ddd-briscola-app/src/lib/PlayerService.ts","webpack:///../~/ddd-briscola-app/src/lib/CommandsDispatcher.ts","webpack:///./lib/listeners.ts","webpack:///./lib/Board.tsx","webpack:///./lib/cssClasses.ts","webpack:///./lib/cards.tsx","webpack:///./lib/EventsLog.tsx","webpack:///./lib/GameResult.tsx","webpack:///./lib/TabPane.tsx","webpack:///./lib/PlayerDeck.tsx","webpack:///./lib/PlayerLogin.tsx","webpack:///./lib/Players.tsx","webpack:///./styles/App.styl"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,8CAA4B,CAC5B,CAAC,CAD6C;AAC9C,uCAAyC,EACzC,CAAC,CADyD;AAC1D,mCAAoB,EAEpB,CAAC,CAFgC;AAEjC,qBAAO,EAAmB,CAAC;AAE3B,KAAI,GAAO;AAEX,KAAM,cAAc,GAAG,iBAAiB;AAExC;KACI,GAAG,GAAG,sBAAG,CAAC,MAAM,CAAC,UAAU,CAAC;KAC5B,IAAM,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC;KAClD,GAAG,CAAC,cAAc,CAAC,SAAS,CAAE,eAAK;SACjC,IAAM,UAAU,GAAG,sCAA0B,CAAC,KAAK,EAAE,UAAC,GAAG,IAAK,UAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAb,CAAa,CAAC;SAC5E,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;SAC1B,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;SACvB,QAAQ,CAAC,MAAM,CAAC,oBAAC,aAAK,qBAAK,UAAU,EAAU,EAAE,EAAE,CAAC;KACtD,CAAC,CAAC;KACF,GAAG,CAAC,IAAI,CAAC,IAAI,2BAAQ,CAAC,eAAe,EAAE,CAAC;AAC5C,EAAC;AAVe,aAAI,OAUnB;AAED,OAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAC,KAAK,IAAK,WAAI,EAAE,EAAN,CAAM,CAAC;;;;;;;;;;;ACtBlD,wCAAuC;AACvC,uCAAsC;AACtC,8BAAc,CAEd,CAAC,EAFwB;AAEzB,KAAY,QAAQ,uBAAM,EAE1B,CAAC,CAFyC;AAEtB,iBAAQ;;;;;;;;ACF5B,uCAAsB,CACtB,CAAC,CADkC;AAGnC,KAAY,QAAQ,uBAAM,CAC1B,CAAC,CADqC;AACtC,gDAA8B,EAE9B,CAAC,CAFmD;AASpD,KAAc,GAAG,CAIhB;AAJD,YAAc,GAAG,EAAC,CAAC;KACjB,gBAAuB,UAAiB;SACtC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAU,CAAC;KAChC,CAAC;KAFe,UAAM,SAErB;AACH,EAAC,EAJa,GAAG,GAAH,WAAG,KAAH,WAAG,QAIhB;AAED;KA2BE,iBAAY,UAAkB;SAC5B,IAAM,YAAY,GAAG,QAAQ,CAAC,YAAY,CAAC,UAAU,CAAC;SACtD,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,IAAI,CAAE,eAAK;aACxC,WAAI,4BAAiB,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC;SAA9C,CAA8C,CAC/C;SACD,IAAI,CAAC,cAAc,GAAI,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAE,WAAC,IAAI,QAAC,CAAC,OAAO,EAAE,CAAC,GAAG,CAAE,WAAC,IAAI,QAAC,CAAC,KAAK,EAAP,CAAO,CAAE,EAA/B,CAA+B,CAAE,CAAC;SAClH,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,YAAE;aAC9B,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC;aAC/B,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;aACf,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC;SAChC,CAAC,EAAE,aAAG;aACJ,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;SACpB,CAAC,CAAC;KACJ,CAAC;KAtCM,gBAAQ,GAAf,UAAgB,GAAoB;SAClC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;aACjB,KAAK,mBAAS,CAAC,gBAAgB,EAAG,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,YAAE,IAAI,SAAE,EAAF,CAAE,CAAE;aAC1E,KAAK,mBAAS,CAAC,YAAY,CAAC;aAC5B,KAAK,mBAAS,CAAC,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,WAAW;aACvD,KAAK,mBAAS,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ;aACjD,KAAK,mBAAS,CAAC,iBAAiB,CAAC;aACjC,KAAK,mBAAS,CAAC,kBAAkB,CAAC;aAClC,KAAK,mBAAS,CAAC,gBAAgB,EAAE,MAAM,CAAC,QAAQ,CAAC,mBAAmB;aACpE,KAAK,mBAAS,CAAC,gBAAgB,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,gBAAgB,CAAE;aAC1F,KAAK,mBAAS,CAAC,cAAc,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,cAAc,CAAE;aACtF,KAAK,mBAAS,CAAC,0BAA0B,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,0BAA0B,CAAE;aAC9G,KAAK,mBAAS,CAAC,sBAAsB,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,sBAAsB,CAAE;aACtG,KAAK,mBAAS,CAAC,kBAAkB,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,kBAAkB,CAAE;aAC9F,KAAK,mBAAS,CAAC,cAAc,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,cAAc,CAAE;aACtF,KAAK,mBAAS,CAAC,sBAAsB,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,oBAAoB,CAAE;aACpG,KAAK,mBAAS,CAAC,eAAe,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,eAAe,CAAE;aACxF,KAAK,mBAAS,CAAC,kBAAkB,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAE,QAAQ,CAAC,kBAAkB,CAAE;aAC9F;iBACE,MAAM,IAAI,KAAK,CAAC,qBAAmB,GAAK,CAAC,CAAC;SAC9C,CAAC;KACH,CAAC;KAmBD,sBAAI,GAAJ,UAAK,GAAY;SACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAE,WAAC;aACrB,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,CAAE,aAAG,IAAI,cAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAE;SACpD,CAAC,CAAC,CAAC;KACL,CAAC;KACH,cAAC;AAAD,EAAC;;;;;;;;ACtED,KAAK,SAYJ;AAZD,YAAK,SAAS;KACZ,iEAAgB;KAChB,yDAAY;KAAE,uDAAW;KACzB,iEAAgB;KAAE,mEAAiB;KAAE,qEAAkB;KACvD,iDAAQ;KACR,qFAA0B;KAC1B,qEAAkB;KAClB,6EAAsB;KACtB,8DAAc;KACd,kEAAgB;KAChB,gEAAe;KAAE,sEAAkB;KAAE,8EAAsB;KAC3D,8DAAc;AAChB,EAAC,EAZI,SAAS,KAAT,SAAS,QAYb;AAED;mBAAe,SAAS;;;;;;;;ACdxB,kCAAqB,CACrB,CAAC,CAD0B;AAC3B,KAAY,QAAQ,uBAAM,EAC1B,CAAC,CADqC;AACtC,4CAA6B,EAC7B,CAAC,CAD8C;AAC/C,2CAA4B,EAC5B,CAAC,CAD4C;AAC7C,wCAAoB,EACpB,CAAC,CAD+B;AAChC,gDAA4H,EAC5H,CAAC,CAD+I;AAChJ,kCAAmB,EAEnB,CAAC,CAF0B;AAU3B,uBAA6B,UAAkB;KAC7C,MAAM,CAAC,kBAAK,CAAC,4BAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,iBAAO;SACjD,MAAM,CAAC;aACL,cAAc,EAAE,IAAI,+BAAc,CAAC,OAAO,CAAC;aAC3C,aAAa,EAAE,aAAM,CAAC,IAAI,EAAiB;aAC3C,KAAK,EAAE,0BAAK,CAAC,KAAK,EAAE;UACrB;KACH,CAAC,CAAC;AACJ,EAAC;AARe,qBAAY,eAQ3B;AAKD,uBAA6B,EAAe;KAC1C,MAAM,CAAC,UAAC,KAAuB,EAAE,OAAgB,EAAE,QAAqD,IAAK,cAAO,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,EAA7C,CAA6C;AAC5J,EAAC;AAFe,qBAAY,eAE3B;AAEY,oBAAW,GAAsB,UAAC,KAAK,EAAE,OAAO,EAAE,QAAQ;KACrE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,WAAW,IAAI,OAAO,YAAY,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;SACxF,IAAM,EAAE,GAAG,KAAK,CAAC,cAAc;SAC/B,IAAM,YAAY,GAAG,CAAC,OAAO,YAAY,QAAQ,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC;SACvK,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAM;aAC7B,IAAM,aAAa,GAAG,IAAI,6BAAa,CAAC,MAAM,CAAC;aAC/C,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,eAAK;iBACrC,QAAQ,CAAC,IAAI,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;aAC9C,CAAC,CAAC;aAEF,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,YAAE;iBACrC,QAAQ,CAAC,IAAI,QAAQ,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;aACjD,CAAC,CAAC;aAEF,aAAa,CAAC,mBAAmB,CAAC,SAAS,CAAC,YAAE;iBAC5C,QAAQ,CAAC,IAAI,QAAQ,CAAC,sBAAsB,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;aAC/D,CAAC,CAAC;aAEF,aAAa,CAAC,cAAc,CAAC,SAAS,CAAC,YAAE;iBACvC,QAAQ,CAAC,IAAI,QAAQ,CAAC,kBAAkB,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;aACvD,CAAC,CAAC;aACF,IAAM,KAAK,GAAG,WAAI,CAAC,KAAK,CAAC,KAAK,EAAE;iBAC9B,MAAM,EAAC,aAAM,CAAC,IAAI,CAAC,MAAM,CAAC;cAC3B,CAAC;aACF,MAAM,CAAC;iBACL,cAAc,EAAE,KAAK,CAAC,cAAc;iBACpC,aAAa,EAAE,aAAM,CAAC,IAAI,CAAC,aAAa,CAAC;iBACzC,YAAK;cACN;SACH,CAAC,CAAC;KACJ,CAAC;KAAC,IAAI;SAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;AACtC,EAAC;AAEY,iBAAQ,GAAsB,UAAC,KAAK,EAAE,OAAO;KACxD,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;SACzC,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,uBAAa;aAC1C,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,WAAC,IAAI,cAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,EAAvB,CAAuB,CAAC,CAAC,SAAS,CAAC,cAAM,cAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAjC,CAAiC,CAAC;aACzH,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,cAAI;iBACnB,aAAa,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC;iBAC1C,MAAM,CAAC;qBACL,cAAc,EAAE,KAAK,CAAC,cAAc;qBACpC,aAAa,EAAE,aAAM,CAAC,IAAI,CAAC,aAAa,CAAC;qBACzC,KAAK,EAAE,KAAK,CAAC,KAAK;kBACnB;aACH,CAAC,CAAC;SACJ,CAAC,CAAC,CAAC,SAAS,CAAC,cAAM,cAAO,CAAC,MAAM,CAAC,6BAA6B,CAAC,EAA7C,CAA6C,CAAC;KACnE,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;KAC/B,CAAC;AACH,EAAC;AAED,8BAA6B,MAA6E;KACxG,MAAM,CAAC,UAAC,KAAK,EAAE,OAAO;SACpB,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,uBAAa;aAC1C,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE,OAAO,CAAC;aACrC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;SAC/B,CAAC,CAAC,CAAC,SAAS,CAAC,cAAM,cAAO,CAAC,MAAM,CAAC,6BAA6B,CAAC,EAA7C,CAA6C,CAAC;KACnE,CAAC;AACH,EAAC;AAEY,4BAAmB,GAAsB,UAAC,KAAK,EAAE,OAAO,EAAE,QAAQ;KAC7E,IAAI,GAAsB;KAC1B,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;SACjD,GAAG,GAAG,mBAAmB,CAAC,uBAAa;aACrC,oBAAa,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,0BAA0B,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,KAAK,CAAC,uBAAuB,CAAC;SAAtJ,CAAsJ,CACvJ;KACH,CAAC;KAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC;SACzD,GAAG,GAAG,mBAAmB,CAAC,uBAAa,IAAI,oBAAa,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,EAApD,CAAoD,CAAC;KAClG,CAAC;KAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC;SAC1D,GAAG,GAAG,mBAAmB,CAAC,uBAAa,IAAI,oBAAa,CAAC,kBAAkB,CAAC,OAAO,CAAC,WAAW,CAAC,EAArD,CAAqD,CAAC;KACnG,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,GAAG,GAAG,cAAM,cAAO,CAAC,MAAM,CAAC,qBAAmB,OAAO,CAAC,IAAI,MAAG,CAAC,EAAlD,CAAkD;KAChE,CAAC;KACD,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC;AACtC,EAAC;AAED,uBAAsB,EAA6C;KACjE,MAAM,CAAC,UAAC,KAAK,EAAE,OAAO;SACpB,MAAM,CAAC;aACL,cAAc,EAAE,KAAK,CAAC,cAAc;aACpC,aAAa,EAAE,KAAK,CAAC,aAAa;aAClC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,EAAE,OAAO,CAAC;UAChC;KACH,CAAC;AACH,EAAC;AAEY,mCAA0B,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACjF,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,0BAA0B,CAAC,CAAC,CAAC;SAC3D,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;aACrB,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;iBACjB,0BAA0B,EAAE;qBAC1B,GAAC,OAAO,CAAC,MAAM,CAAC,GAAE,IAAI;;kBACvB;cACF,CAAC;SACJ,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,IAAM,GAAG,GAAG,WAAI,CAAC,KAAK,EAAE,EAAE,CAAC;aAC3B,OAAO,GAAG,CAAC,0BAA0B,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aACtD,MAAM,CAAC,GAAG;SACZ,CAAC;KACH,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK;KACd,CAAC;;AACH,EAAC,CAAC;AAEW,2BAAkB,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACzE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC;SACnD,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,eAAe,EAAE,OAAO,CAAC,IAAI;UAC9B,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK;KACd,CAAC;AACH,EAAC,CAAC;AAEW,+BAAsB,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KAC7E,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC;SACvD,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,uBAAuB,EAAE,OAAO,CAAC,YAAY;UAC9C,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK;KACd,CAAC;AACH,EAAC,CAAC;AAEW,uBAAc,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACrE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;SAC/C,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,WAAW,EAAE,aAAM,CAAC,MAAM,CAAY,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,cAAM,oBAAM,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAhD,CAAgD,CAAC;UACtI,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;AACH,EAAC,CAAC;AAEW,yBAAgB,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACvE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;SACjD,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,QAAQ,EAAE,OAAO,CAAC,OAAO,KAAK,IAAI,GAAG,6BAAQ,CAAC,eAAe,GAAG,6BAAQ,CAAC,MAAM;UAChF,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;AACH,EAAC,CAAC;AAEW,2BAAkB,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACzE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC;SACnD,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,YAAE,IAAI,cAAO,CAAC,OAAO,CAAC,MAAM,CAAC,YAAE,IAAI,SAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,EAAnB,CAAmB,CAAC,EAAjD,CAAiD,CAAC,CAAC,SAAS,CAAC,cAAM,cAAO,CAAC,OAAO,EAAf,CAAe,CAAC;UACpH,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;AACH,EAAC,CAAC;AAEW,wBAAe,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACtE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC;SAChD,IAAM,IAAE,GAAG,OAAO,CAAC,SAAS;SAC5B,IAAI,GAAG,GAAU,KAAK;SACtB,IAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CACxC,cAAM,oBAAM,CAAC,IAAI,CAAC,IAAE,CAAC,EAAf,CAAe,EACrB,UAAC,GAAG;aACF,EAAE,CAAC,CAAC,IAAE,CAAC,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;iBACzB,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,IAAE,CAAC;aACxB,CAAC;aAAC,IAAI,CAAC,CAAC;iBACN,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,GAAG,CAAC;aACzB,CAAC;SACH,CAAC,CAAC;SACJ,EAAE,CAAC,CAAC,IAAE,YAAY,oCAAe,CAAC,CAAC,CAAC;aAClC,GAAG,GAAG,WAAI,CAAC,KAAK,EAAE;iBAChB,wBAAW;iBACX,WAAW,EAAE;qBACX,GAAC,IAAE,CAAC,IAAI,CAAC,GAAE,IAAE;;kBACd;cACF,CAAC,CAAC;SACL,CAAC;SAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAE,YAAY,mCAAc,CAAC,CAAC,CAAC;aACxC,GAAG,GAAG,WAAI,CAAC,KAAK,EAAE;iBAChB,wBAAW;iBACX,aAAa,EAAE;qBACb,GAAC,IAAE,CAAC,IAAI,CAAC,GAAE,IAAE;;kBACd;cACF,CAAC;aACF,OAAO,GAAG,CAAC,WAAW,CAAC,IAAE,CAAC,IAAI,CAAC,CAAC;SAClC,CAAC;SACD,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;;AACH,EAAC,CAAC;AAEW,6BAAoB,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KAC3E,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC;SACvD,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,mBAAmB,EAAE;iBACnB,GAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAE,OAAO,CAAC,gBAAgB;;cAC1D;UACF,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;;AACH,EAAC,CAAC;AAEW,uBAAc,GAAgB,YAAY,CAAC,UAAC,KAAK,EAAE,OAAO;KACrE,EAAE,CAAC,CAAC,OAAO,YAAY,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;SAC/C,MAAM,CAAC,WAAI,CAAC,KAAK,EAAE;aACjB,SAAS,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC;UACnD,CAAC;KACJ,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;AACH,EAAC,CAAC;;;;;;;;AClPF,oCAAgC,CAChC,CAAC;AADO,mCAAsC;AAC9C,mCAA+B,CAC/B,CAAC;AADO,iCAAoC;AAC5C,oCAAgC,CAChC,CAAC;AADO,mCAAsC;AAC9C,kCAA8B,EAC9B,CAAC;AADO,+BAAkC;AAC1C,kCAA8B,EAE9B,CAAC;AAFO,+BAAkC;AAE1C,oCAAmB,CAEnB,CAAC,CAFgC;AAEzB,eAAM;;;;;;;;ACRd,oCAAgC,CAChC,CAAC,CADyC;AAE1C,oCAAmB,CAEnB,CAAC,CAF4B;AAE7B,KAAO,MAAM,CAmEZ;AAnED,YAAO,MAAM,EAAC,CAAC;KAEb,iBAA6B,GAAO,EAAE,CAAc;SAClD,IAAI,GAAG,GAAO,EAAE,CAAC;SACjB,GAAG,CAAC,OAAO,CAAE,WAAC,IAAI,UAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAtB,CAAsB,CAAC;SACzC,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAJe,cAAO,UAItB;KAED,cAAwB,GAAQ,EAAE,IAAuB;SACvD,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,GAAG,CAAE,aAAG,IAAI,UAAG,CAAC,GAAG,CAAC,EAAR,CAAQ,CAAE;KACpD,CAAC;KAFe,WAAI,OAEnB;KAED,mBAA6B,GAAQ,EAAE,IAAuB;SAC5D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;aACpC,IAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;aAChB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAC,gBAAM,CAAC,IAAI,CAAS,CAAC,CAAC;SAC5C,CAAC;SACD,MAAM,CAAC,gBAAM,CAAC,IAAI,EAAU,CAAC;KAC/B,CAAC;KANe,gBAAS,YAMxB;KAED,eAAyB,GAAO,EAAE,IAAqB;SACrD,IAAM,IAAI,GAAO,EAAE;SACnB,IAAM,IAAI,GAAO,EAAE;SACnB,GAAG,CAAC,OAAO,CAAE,WAAC;aACZ,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACzB,IAAI;iBAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACnB,CAAC,CAAC;SACF,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KACtB,CAAC;KARe,YAAK,QAQpB;KAED,gBAA0B,GAAO,EAAE,IAAqB;SACtD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;aACpC,IAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;aAChB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAC,IAAI;SAC1B,CAAC;SACD,MAAM,CAAC,KAAK,CAAC;KACf,CAAC;KANe,aAAM,SAMrB;KAED,kBAA8B,GAAO,EAAE,CAAG,EAAE,CAAkB;SAC5D,IAAI,GAAG,GAAG,CAAC;SACX,GAAG,CAAC,OAAO,CAAE,WAAC,IAAI,UAAG,GAAG,CAAC,CAAC,GAAG,EAAC,CAAC,CAAC,EAAd,CAAc,CAAC;SACjC,MAAM,CAAC,GAAG;KACZ,CAAC;KAJe,eAAQ,WAIvB;KAED,mBAA+B,GAAO,EAAE,CAAG,EAAE,CAAmB;SAC9D,IAAI,GAAG,GAAG,CAAC;SACX,IAAM,GAAG,GAAG,GAAG,CAAC,MAAM;SACtB,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,GAAG,GAAC,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC;aACtC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC;SACxB,CAAC;SACD,MAAM,CAAC,GAAG;KACZ,CAAC;KAPe,gBAAS,YAOxB;KAED,iBAA2B,GAAO,EAAE,KAAqB;SACvD,IAAM,GAAG,GAAc,EAAE;SACzB,IAAM,QAAQ,GAAG,UAAC,CAAQ,EAAE,CAAG;aAC7B,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;aAChB,EAAE,CAAC,CAAC,gBAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;iBAChB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;aACd,CAAC;aAAC,IAAI,CAAC,CAAC;iBACN,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;aACb,CAAC;SACH,CAAC;SACD,GAAG,CAAC,OAAO,CAAE,WAAC,IAAI,eAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAArB,CAAqB,CAAC;SACxC,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAZe,cAAO,UAYtB;AAEH,EAAC,EAnEM,MAAM,KAAN,MAAM,QAmEZ;AAED;mBAAe,MAAM;;;;;;;;;;;;;ACzErB;KAAA;KAwCA,CAAC;KAvCQ,WAAI,GAAX,UAAe,CAAI;SACjB,MAAM,CAAC,IAAI,QAAQ,CAAI,CAAC,CAAC;KAC3B,CAAC;KACM,WAAI,GAAX;SACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;KACvB,CAAC;KACM,aAAM,GAAb,UAAiB,CAAI;SACnB,MAAM,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,SAAS,CAAC,GAAG,MAAM,CAAC,IAAI,CAAI,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,EAAK,CAAC;KAChF,CAAC;KAED,qBAAI,GAAJ,UAAQ,KAAc,EAAE,KAAkB;SACxC,MAAM,CAAC,KAAK,EAAE;KAChB,CAAC;KACD,oBAAG,GAAH,UAAO,CAAc;SACnB,MAAM,CAAC,MAAM,CAAC,IAAI,EAAK;KACzB,CAAC;KACD,wBAAO,GAAP,UAAW,CAAiB;KAC5B,CAAC;KACD,wBAAO,GAAP,UAAW,CAAsB;SAC/B,MAAM,CAAC,MAAM,CAAC,IAAI,EAAK;KACzB,CAAC;KACD,0BAAS,GAAT,UAAU,CAAU;SAClB,MAAM,CAAC,CAAC,EAAE;KACZ,CAAC;KACD,uBAAM,GAAN,UAAO,CAAkB;SACvB,MAAM,CAAC,CAAC,EAAE;KACZ,CAAC;KACD,wBAAO,GAAP;SACE,MAAM,CAAC,IAAI;KACb,CAAC;KACD,0BAAS,GAAT;SACE,MAAM,CAAC,KAAK;KACd,CAAC;KACD,oBAAG,GAAH,UAAO,CAAY;SACjB,MAAM,CAAC,MAAM,CAAC,IAAI,EAAU;KAC9B,CAAC;KACD,wBAAO,GAAP;SACE,MAAM,CAAC,EAAE;KACX,CAAC;KACH,aAAC;AAAD,EAAC;AAxCqB,eAAM,SAwC3B;AAED;KAAsB,wBAAS;KAA/B;SAAsB,8BAAS;KAE/B,CAAC;KADQ,aAAQ,GAAG,IAAI,IAAI,EAAO;KACnC,WAAC;AAAD,EAAC,CAFqB,MAAM,GAE3B;AAED;KAA0B,4BAAS;KACjC,kBAAmB,KAAQ;SACzB,iBAAO;SADU,UAAK,GAAL,KAAK,CAAG;KAE3B,CAAC;KACD,0BAAO,GAAP,cAAqB,MAAM,CAAC,KAAK,EAAC,CAAC;KACnC,4BAAS,GAAT,cAAuB,MAAM,CAAC,IAAI,EAAC,CAAC;KACpC,uBAAI,GAAJ,UAAQ,KAAc,EAAE,KAAqB;SAC3C,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;KAC1B,CAAC;KACD,0BAAO,GAAP,UAAW,CAAiB;SAC1B,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;KACf,CAAC;KACD,sBAAG,GAAH,UAAO,CAAc;SACnB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACtC,CAAC;KACD,0BAAO,GAAP,UAAW,CAAsB;SAC/B,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;KACtB,CAAC;KACD,4BAAS,GAAT,UAAU,CAAU;SAClB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;KACpB,CAAC;KACD,yBAAM,GAAN,UAAO,CAAkB;SACvB,MAAM,CAAC,IAAI,CAAC;KACd,CAAC;KACD,sBAAG,GAAH,UAAO,CAAY;SAAnB,iBAEC;SADC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAS,YAAE,IAAI,QAAC,KAAI,CAAC,KAAK,EAAE,EAAE,CAAC,EAAhB,CAAgB,CAAC;KAC9C,CAAC;KACD,0BAAO,GAAP;SACE,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;KACrB,CAAC;KACD,2BAAQ,GAAR;SACE,MAAM,CAAC,UAAQ,IAAI,CAAC,KAAK,MAAG;KAC9B,CAAC;KACH,eAAC;AAAD,EAAC,CAjCyB,MAAM,GAiC/B;AAED;mBAAe,MAAM;;;;;;;;ACjFrB,oBAAwB,CAAK;KAC5B,MAAM,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,IAAI,CAAC;AACtC,EAAC;AAFD;4BAEC;;;;;;;;ACED,KAAO,KAAK,CA0BX;AA1BD,YAAO,KAAK,EAAE,CAAC;KAGb,gBAA0B,GAAc;SACtC,IAAM,GAAG,GAAY,EAAE;SACvB,GAAG,CAAC,OAAO,CAAE,YAAE,IAAI,UAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,KAAK,EAAtB,CAAsB,CAAC,CAAC;SAC3C,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAJe,YAAM,SAIrB;KACD,iBAA2B,EAAW,EAAE,CAAyB;SAC/D,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAE,WAAC,IAAI,QAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAX,CAAW,CAAE;KAC7C,CAAC;KAFe,aAAO,UAEtB;KACD,aAAyB,EAAW,EAAE,CAAsB;SAC1D,IAAM,GAAG,GAAY,EAAE;SACvB,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,UAAC,CAAC,EAAC,CAAC,IAAK,UAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAf,CAAe,CAAE,CAAC;SAC7C,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAJe,SAAG,MAIlB;KACD,eAAyB,GAAc;SACrC,IAAM,GAAG,GAAY,EAAE;SACvB,GAAG,CAAC,OAAO,CAAE,YAAE,IAAI,YAAK,CAAC,OAAO,CAAC,EAAE,EAAE,UAAC,CAAC,EAAC,CAAC,IAAK,UAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAV,CAAU,CAAE,EAAvC,CAAuC,CAAC;SAC3D,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAJe,WAAK,QAIpB;KACD,iBAA6B,EAAW,EAAE,CAA6B;SACrE,IAAM,GAAG,GAAY,EAAE;SACvB,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,UAAC,CAAC,EAAC,CAAC,IAAK,YAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAE,UAAC,CAAC,EAAC,CAAC,IAAK,UAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAV,CAAU,CAAC,EAA1C,CAA0C,CAAE,CAAC;SACxE,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAJe,aAAO,UAItB;AACH,EAAC,EA1BM,KAAK,KAAL,KAAK,QA0BX;AAED;mBAAe,KAAK;;;;;;;;AChCpB,oCAAgC,CAEhC,CAAC,CAFyC;AAE1C,eAAiB,CAAS;KACxB,IAAI,KAAK,GAAa,gBAAM,CAAC,IAAI,EAAK,CAAC;KACvC,MAAM,CAAC;SACL,MAAM,CAAC,KAAK,CAAC,IAAI,CACf;aACE,IAAM,CAAC,GAAK,CAAC,EAAE;aACf,KAAK,GAAG,gBAAM,CAAC,IAAI,CAAC,CAAC,CAAC;aACtB,MAAM,CAAC,CAAC,CAAC;SACX,CAAC,EACD,UAAC,CAAC,IAAK,QAAC,EAAD,CAAC,CACT;KACH,CAAC;AACH,EAAC;AAED;mBAAe,IAAI,CAAC;;;;;;;;AChBpB,eAAiB,GAAU;KACzB,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;AACvB,EAAC;AAED;mBAAe,IAAI;;;;;;;;;;;;;ACHnB,uCAAsB,CAEtB,CAAC,CAFkC;AAEnC;KAAA;KAEA,CAAC;KAAD,cAAC;AAAD,EAAC;AAFqB,gBAAO,UAE5B;AAED;KAAqC,mCAAO;KAE1C;SACE,iBAAO;SAFF,SAAI,GAAG,mBAAS,CAAC,gBAAgB;KAGxC,CAAC;KACH,sBAAC;AAAD,EAAC,CALoC,OAAO,GAK3C;AALY,wBAAe,kBAK3B;AAED;KAAkC,gCAAO;KAEvC,sBAAmB,UAAkB,EAAS,QAAe;SAC3D,iBAAO;SADU,eAAU,GAAV,UAAU,CAAQ;SAAS,aAAQ,GAAR,QAAQ,CAAO;SADtD,SAAI,GAAG,mBAAS,CAAC,YAAY;KAGpC,CAAC;KACH,mBAAC;AAAD,EAAC,CALiC,OAAO,GAKxC;AALY,qBAAY,eAKxB;AAED;KAAiC,+BAAO;KAEtC,qBAAmB,UAAkB,EAAS,QAAe;SAC3D,iBAAO;SADU,eAAU,GAAV,UAAU,CAAQ;SAAS,aAAQ,GAAR,QAAQ,CAAO;SADtD,SAAI,GAAG,mBAAS,CAAC,WAAW;KAGnC,CAAC;KACH,kBAAC;AAAD,EAAC,CALgC,OAAO,GAKvC;AALY,oBAAW,cAKvB;AAED;KAAsC,oCAAO;KAE3C;SACE,iBAAO;SAFF,SAAI,GAAG,mBAAS,CAAC,gBAAgB;KAGxC,CAAC;KACH,uBAAC;AAAD,EAAC,CALqC,OAAO,GAK5C;AALY,yBAAgB,mBAK5B;AAED;KAAuC,qCAAO;KAE5C,2BAAmB,WAAiB;SAClC,iBAAO;SADU,gBAAW,GAAX,WAAW,CAAM;SAD7B,SAAI,GAAG,mBAAS,CAAC,iBAAiB;KAGzC,CAAC;KACH,wBAAC;AAAD,EAAC,CALsC,OAAO,GAK7C;AALY,0BAAiB,oBAK7B;AAED;KAAwC,sCAAO;KAE7C,4BAAmB,WAAiB;SAClC,iBAAO;SADU,gBAAW,GAAX,WAAW,CAAM;SAD7B,SAAI,GAAG,mBAAS,CAAC,kBAAkB;KAG1C,CAAC;KACH,yBAAC;AAAD,EAAC,CALuC,OAAO,GAK9C;AALY,2BAAkB,qBAK9B;AAED;KAA8B,4BAAO;KAEnC,kBAAmB,IAAU;SAC3B,iBAAO;SADU,SAAI,GAAJ,IAAI,CAAM;SADtB,SAAI,GAAG,mBAAS,CAAC,QAAQ;KAGhC,CAAC;KACH,eAAC;AAAD,EAAC,CAL6B,OAAO,GAKpC;AALY,iBAAQ,WAKpB;AAED;KAAgD,8CAAO;KAErD,oCAAmB,MAAY,EAAS,QAAgB;SACtD,iBAAO;SADU,WAAM,GAAN,MAAM,CAAM;SAAS,aAAQ,GAAR,QAAQ,CAAQ;SADjD,SAAI,GAAG,mBAAS,CAAC,0BAA0B;KAGlD,CAAC;KACH,iCAAC;AAAD,EAAC,CAL+C,OAAO,GAKtD;AALY,mCAA0B,6BAKtC;AAED;KAAwC,sCAAO;KAE7C,4BAAmB,IAAqB;SACtC,iBAAO;SADU,SAAI,GAAJ,IAAI,CAAiB;SADjC,SAAI,GAAG,mBAAS,CAAC,kBAAkB;KAG1C,CAAC;KACH,yBAAC;AAAD,EAAC,CALuC,OAAO,GAK9C;AALY,2BAAkB,qBAK9B;AAED;KAA4C,0CAAO;KAEjD,gCAAmB,YAA4C;SAC7D,iBAAO;SADU,iBAAY,GAAZ,YAAY,CAAgC;SADxD,SAAI,GAAG,mBAAS,CAAC,sBAAsB;KAG9C,CAAC;KACH,6BAAC;AAAD,EAAC,CAL2C,OAAO,GAKlD;AALY,+BAAsB,yBAKlC;AAED;KAAoC,kCAAO;KAEzC,wBAAmB,IAAU;SAC3B,iBAAO;SADU,SAAI,GAAJ,IAAI,CAAM;SADtB,SAAI,GAAG,mBAAS,CAAC,cAAc;KAGtC,CAAC;KACH,qBAAC;AAAD,EAAC,CALmC,OAAO,GAK1C;AALY,uBAAc,iBAK1B;AAED;KAAsC,oCAAO;KAE3C,0BAAmB,IAAS,EAAS,OAAe;SAClD,iBAAO;SADU,SAAI,GAAJ,IAAI,CAAK;SAAS,YAAO,GAAP,OAAO,CAAQ;SAD7C,SAAI,GAAG,mBAAS,CAAC,gBAAgB;KAGxC,CAAC;KACH,uBAAC;AAAD,EAAC,CALqC,OAAO,GAK5C;AALY,yBAAgB,mBAK5B;AAED;KAAqC,mCAAO;KAE1C,yBAAmB,SAAmB;SACpC,iBAAO;SADU,cAAS,GAAT,SAAS,CAAU;SAD/B,SAAI,GAAG,mBAAS,CAAC,eAAe;KAGvC,CAAC;KACH,sBAAC;AAAD,EAAC,CALoC,OAAO,GAK3C;AALY,wBAAe,kBAK3B;AAED;KAAwC,sCAAO;KAE7C,4BAAmB,OAAgB;SACjC,iBAAO;SADU,YAAO,GAAP,OAAO,CAAS;SAD5B,SAAI,GAAG,mBAAS,CAAC,kBAAkB;KAG1C,CAAC;KACH,yBAAC;AAAD,EAAC,CALuC,OAAO,GAK9C;AALY,2BAAkB,qBAK9B;AAED;KAA4C,0CAAO;KAEjD,gCAAmB,gBAAiC;SAClD,iBAAO;SADU,qBAAgB,GAAhB,gBAAgB,CAAiB;SAD7C,SAAI,GAAG,mBAAS,CAAC,sBAAsB;KAG9C,CAAC;KACH,6BAAC;AAAD,EAAC,CAL2C,OAAO,GAKlD;AALY,+BAAsB,yBAKlC;AAED;KAAoC,kCAAO;KAEzC,wBAAmB,KAAsD;SACvE,iBAAO;SADU,UAAK,GAAL,KAAK,CAAiD;SADlE,SAAI,GAAG,mBAAS,CAAC,cAAc;KAGtC,CAAC;KACH,qBAAC;AAAD,EAAC,CALmC,OAAO,GAK1C;AALY,uBAAc,iBAK1B;;;;;;;;ACrHD,gDAAuE,EAEvE,CAAC,CAF0F;AAE3F,wCAAoB,EACpB,CAAC,CAD+B;AAChC,kCAAmB,EAEnB,CAAC,CAF0B;AAE3B;KACC,wBAAoB,OAAgB;SAAhB,YAAO,GAAP,OAAO,CAAS;KACpC,CAAC;KACD,mCAAU,GAAV;SACK,MAAM,CAAC,kBAAK,CAAC,sCAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAE,WAAC,IAAI,QAAC,CAAC,OAAO,EAAT,CAAS,CAAE;KACnF,CAAC;KACJ,+BAAM,GAAN,UAAO,UAAkB;SACpB,MAAM,CAAC,kBAAK,CAAC,2BAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;KACvC,CAAC;KACJ,qCAAY,GAAZ,UAAa,IAAY,EAAE,QAAe;SACrC,MAAM,CAAC,WAAI,CAAC,IAAI,CAAe,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;aACnD,IAAI,EAAE,IAAI;aACV,QAAQ,EAAC,QAAQ;UAClB,CAAC,CAAC,IAAI,CAAE,cAAI;aACT,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAE,YAAE,IAAI,yBAAK,CAAC,kCAAa,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,EAAnC,CAAmC,CAAE;SACxE,CAAC,CAAC;KACJ,CAAC;KACD,8BAAK,GAAL,UAAM,IAAY,EAAE,QAAe;SACjC,MAAM,CAAC,WAAI,CAAC,IAAI,CAAe,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE;aACvD,IAAI,EAAE,IAAI;aACV,QAAQ,EAAC,QAAQ;UAClB,CAAC,CAAC,IAAI,CAAE,cAAI,IAAI,WAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAE,YAAE,IAAI,yBAAK,CAAC,kCAAa,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,EAAnC,CAAmC,CAAE,EAA7D,CAA6D,CAAE;KAClF,CAAC;KAEL,qBAAC;AAAD,EAAC;AAxBY,uBAAc,iBAwB1B;;;;;;;;;;;AC7BD,8BAAc,EACd,CAAC,EAD0B;AAC3B,8BAAc,EACd,CAAC,EADgC;AACjC,8BAAc,EACd,CAAC,EADsC;AACvC,8BAAc,EACd,CAAC,EADyB;AAC1B,8BAAc,EACd,CAAC,EAD+B;AAChC,8BAAc,EACd,CAAC,EAD0B;AAC3B,8BAAc,EACd,CAAC,EAD2B;AAC5B,8BAAc,EACd,CAAC,EAD4B;AAC7B,8BAAc,EAEd,CAAC,EAFkC;AAEnC,KAAY,KAAK,uBAAM,EAAa,CAAC;AAE7B,cAAK;;;;;;;;ACZb,kCAA4B,CAC5B,CAAC,CADiC;AAQlC,KAAc,KAAK,CAoBlB;AApBD,YAAc,KAAK,EAAC,CAAC;KACnB;SACE,MAAM,CAAC;aACL,MAAM,EAAC,aAAM,CAAC,IAAI,EAAU;aAC5B,OAAO,EAAC,EAAE;aACV,WAAW,EAAC,aAAM,CAAC,IAAI,EAAmB;aAC1C,WAAW,EAAC,EAAE;aACd,aAAa,EAAC,EAAE;aAChB,mBAAmB,EAAC,EAAE;aACtB,0BAA0B,EAAC,EAAE;aAC7B,eAAe,EAAC,cAAc;aAC9B,uBAAuB,EAAE,aAAa;aACtC,SAAS,EAAC,EAAE;aACZ,QAAQ,EAAC,QAAQ,CAAC,MAAM;aACxB,MAAM,EAAC;iBACL,gBAAgB,EAAC,CAAC;iBAClB,gBAAgB,EAAC,CAAC;cACnB;UACF;KACH,CAAC;KAlBe,WAAK,QAkBpB;AACH,EAAC,EApBa,KAAK,GAAL,aAAK,KAAL,aAAK,QAoBlB;AAUD,YAAY,QAAQ;KAClB,2CAAM;KAAE,6DAAe;AACzB,EAAC,EAFW,gBAAQ,KAAR,gBAAQ,QAEnB;AAFD,KAAY,QAAQ,GAAR,gBAEX;;;;;;;;;;;;;;;;;ACxCD,kCAA4B,CAC5B,CAAC,CADiC;AAClC,mCAA4D,EAC5D,CAAC,CADoE;AACrE,oCAAqB,EACrB,CAAC,CAD8B;AAC/B,wCAAqG,EAErG,CAAC,CAFgH;AAEjH,YAAY,aAAa;KACvB,+DAAW;KAAE,qFAAsB;KAAE,mFAAqB;AAC5D,EAAC,EAFW,qBAAa,KAAb,qBAAa,QAExB;AAFD,KAAY,aAAa,GAAb,qBAEX;AAED,YAAY,oBAAoB;KAC9B,+DAAI;KAAE,qEAAO;KAAE,2EAAU;AAC3B,EAAC,EAFW,4BAAoB,KAApB,4BAAoB,QAE/B;AAFD,KAAY,oBAAoB,GAApB,4BAEX;AAED,YAAY,4BAA4B;KACtC,2FAAU;KAAE,iGAAa;AAC3B,EAAC,EAFW,oCAA4B,KAA5B,oCAA4B,QAEvC;AAFD,KAAY,4BAA4B,GAA5B,oCAEX;AAIY,mCAA0B,GAAG,qBAAQ,CAAC,MAAM,CAAC,UAAC,GAAiB;KAC1E,MAAM,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;SAChB,KAAK,4BAA4B,CAAC,4BAA4B,CAAC,UAAU,CAAC,EAAG,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,UAAU,CAAC;SAC3G,KAAK,4BAA4B,CAAC,4BAA4B,CAAC,aAAa,CAAC,EAAE,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,aAAa,CAAC;SAChH,SAAS,MAAM,IAAI,KAAK,CAAC,wCAAsC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAG,CAAC;KACvF,CAAC;AACH,EAAC,CAAC;AAEF,KAAM,oCAAoC,GAAG,4BAAe,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAS,CAAC,MAAM,CAA+B,4BAA4B,EAAE,8BAA8B,CAAC,CAAC;AAE7L;KAAA;KAIA,CAAC;KAHC,sBAAI,4BAAI;cAAR;aACE,MAAM,CAAC,4BAA4B,CAAC,UAAU;SAChD,CAAC;;;QAAA;KACH,iBAAC;AAAD,EAAC;AAJY,mBAAU,aAItB;AAED;KAAA;KAKA,CAAC;KAHC,sBAAI,+BAAI;cAAR;aACE,MAAM,CAAC,4BAA4B,CAAC,aAAa;SACnD,CAAC;;;QAAA;KACH,oBAAC;AAAD,EAAC;AALY,sBAAa,gBAKzB;AAKY,oBAAW,GAAG,qBAAQ,CAAC,MAAM,CAAC,UAAC,GAAiB;KAC3D,MAAM,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;SAChB,KAAK,aAAa,CAAC,aAAa,CAAC,WAAW,CAAC,EAAG,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,WAAW,CAAC;SAC/E,KAAK,aAAa,CAAC,aAAa,CAAC,sBAAsB,CAAC,EAAE,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC;SACpG,KAAK,aAAa,CAAC,aAAa,CAAC,qBAAqB,CAAC,EAAE,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC;SAClG,SAAS,MAAM,CAAC,aAAM,CAAC,IAAI,EAAsB;KACnD,CAAC;AACH,EAAC,EAAE,YAAY,CAAE;AAEjB,KAAM,qBAAqB,GAAG,4BAAe,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAS,CAAC,MAAM,CAAgB,aAAa,EAAE,eAAe,CAAC,CAAC;AAEjI;KAAA;KAIA,CAAC;KAHC,sBAAI,6BAAI;cAAR;aACE,MAAM,CAAC,aAAa,CAAC,WAAW;SAClC,CAAC;;;QAAA;KACH,kBAAC;AAAD,EAAC;AAJY,oBAAW,cAIvB;AAED;KAAA;KAKA,CAAC;KAHC,sBAAI,wCAAI;cAAR;aACE,MAAM,CAAC,aAAa,CAAC,sBAAsB;SAC7C,CAAC;;;QAAA;KACH,6BAAC;AAAD,EAAC;AALY,+BAAsB,yBAKlC;AAED;KAAA;KAKA,CAAC;KAHC,sBAAI,uCAAI;cAAR;aACE,MAAM,CAAC,aAAa,CAAC,sBAAsB;SAC7C,CAAC;;;QAAA;KACH,4BAAC;AAAD,EAAC;AALY,8BAAqB,wBAKjC;AAED;KAAA;KASA,CAAC;KARC;SAAC,iBAAI,CAAC,EAAC,OAAO,EAAC,eAAM,EAAC,CAAC;;iDAAA;KAGvB;SAAC,oBAAO,CAAC,mBAAW,CAAC;;8CAAA;KAGrB;SAAC,oBAAO,CAAC,kCAA0B,CAAC;;kDAAA;KAEtC,kBAAC;AAAD,EAAC;AATY,oBAAW,cASvB;AAED,KAAM,4BAA4B,GAAG,4BAAe,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAS,CAAC,MAAM,CAAuB,oBAAoB,EAAE,sBAAsB,CAAC,CAAC;AAE7J;KAAA;KAkBA,CAAC;KAfC;SAAC,oBAAO,CAAC,4BAA4B,CAAC;;mDAAA;KAGtC;SAAC,oBAAO,EAAE;;0DAAA;KAGV;SAAC,iBAAI,CAAC,EAAC,OAAO,EAAC,eAAM,EAAC,CAAC;;+DAAA;KAEvB;SAAC,iBAAI,CAAC,EAAC,OAAO,EAAC,eAAM,EAAC,CAAC;;+DAAA;KAGvB;SAAC,oBAAO,CAAC,4BAAe,CAAC,QAAQ,CAAC,4BAAe,CAAC,UAAU,CAAC,CAAC;;qDAAA;KAE9D;SAAC,oBAAO,CAAC,4BAAe,CAAC,QAAQ,CAAC,4BAAe,CAAC,UAAU,CAAC,CAAC;;sDAAA;KAEhE,uBAAC;AAAD,EAAC;AAlBY,yBAAgB,mBAkB5B;AAEY,+BAAsB,GAAG,oBAAY,CAAC,cAAM,QAAC;SACxD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,OAAO,CAAC;SACtD,KAAK,EAAC,gBAAgB;MACvB,EAAE;SACD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,UAAU,CAAC;SACzD,KAAK,EAAC,gBAAgB;MACvB,EAAE;SACD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC;SACnD,KAAK,EAAC,gBAAgB;MACvB,CAAC,EATuD,CASvD,EAAE,iBAAiB,CAAC;;;;;;;;ACtHtB,kCAA4B,CAC5B,CAAC,CADiC;AAClC,wCAA0D,EAE1D,CAAC,CAFqE;AAUtE,uBAA6B,GAAwB,EAAE,IAAW;KAChE,IAAM,EAAE,GAAG,YAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;KAC9B,MAAM,CAAC,+BAAkB,CAAC,WAAW,CAAE,UAAC,GAAmB,IAAK,UAAG,CAAC,IAAI,EAAR,CAAQ,EAAE,GAAG,EAAE,IAAI,CAAC;AACtF,EAAC;AAHe,qBAAY,eAG3B;;;;;;;;ACdD,kCAAmB,EACnB,CAAC;AADO,4BAAuB;AAC/B,mCAAiC,EACjC,CAAC;AADO,+BAAK;AAAE,2CAA+B;AAG9C,KAAY,SAAS,uBAAM,EAC3B,CAAC,CAD2C;AACvB,kBAAS;AAE9B,uCAAsB,EAEtB,CAAC;AAFO,uCAA+B;AAEvC,mCAAoC,EAEpC,CAAC;AAFkB,yCAA8B;AAEjD,6CAA8B,EAC9B,CAAC;AADO,6DAA6C;AACrD,sCAA2C,EAAgB,CAAC;AAApD,wCAAQ;AAAE,4DAAyC;;;;;;;;ACZ3D,mCAAoE,EACpE,CAAC,CAD4E;AAC7E,sCAAuB,EACvB,CAAC,CADkC;AACnC,kCAAmF,EACnF,CAAC,CAD0F;AAC3F,kCAA2B,CAE3B,CAAC,CAFgC;AAEjC;KACE,cAAmB,UAAoB,EAAS,cAA2B;SAAxD,eAAU,GAAV,UAAU,CAAU;SAAS,mBAAc,GAAd,cAAc,CAAa;SACzE,EAAE,CAAC,CAAC,aAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aACvB,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC;SACzC,CAAC;SACD,EAAE,CAAC,CAAC,aAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;aAC3B,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC;SAC7C,CAAC;KACH,CAAC;KACH,WAAC;AAAD,EAAC;AATY,aAAI,OAShB;AAED,yBAAwB,GAAgC,EAAE,QAA2B,EAAE,WAAwB;KAC7G,IAAM,SAAS,GAAG,aAAM,CAAC,GAAG,CAAC;KAE7B,IAAM,eAAe,GAAI,mBAAW,CAAC,QAAQ,CAAC;KAC9C,IAAM,qBAAqB,GAAG,mBAAW,CAAC,kBAAkB,CAAC,GAAG,CAAC;KACjE,EAAE,CAAC,CAAC,eAAe,IAAI,CAAC,qBAAqB,CAAC;SAAC,MAAM,IAAI,KAAK,CAAI,WAAW,EAAE,uDAAoD,CAAC;KACpI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,IAAI,qBAAqB,CAAC;SAAC,MAAM,IAAI,KAAK,CAAI,WAAW,EAAE,qEAAkE,CAAC;KAEvJ,IAAM,gBAAgB,GAAG,oBAAY,CAAC,QAAQ,CAAC;KAC/C,IAAM,sBAAsB,GAAG,mBAAW,CAAC,mBAAmB,CAAC,GAAG,CAAC;KACnE,EAAE,CAAC,CAAC,gBAAgB,IAAI,CAAC,sBAAsB,CAAC;SAAC,MAAM,IAAI,KAAK,CAAI,WAAW,EAAE,yDAAsD,CAAC;KACxI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,gBAAgB,IAAI,sBAAsB,CAAC;SAAC,MAAM,IAAI,KAAK,CAAI,WAAW,EAAE,uEAAoE,CAAC;KAE3J,IAAM,gBAAgB,GAAG,mBAAW,CAAC,aAAa,CAAC,GAAG,CAAC;KACvD,IAAM,QAAQ,GAAe,gBAAgB,GAAgB,GAAG,GAAG,QAAQ,CAAC;KAE5E,EAAE,CAAC,CAAC,aAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACrB,MAAM,IAAI,KAAK,CAAI,WAAW,EAAE,4BAAyB,CAAC;KAC5D,CAAC;KACD,IAAI,SAAkB;KACtB,IAAI,CAAC;SACD,SAAS,GAAG,mBAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC;KAClD,CAAE;KAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;SACV,MAAM,IAAI,KAAK,CAAI,WAAW,EAAE,WAAM,CAAC,CAAC,OAAS,CAAC;KACpD,CAAC;KACD,MAAM,CAAC,SAAS,CAAC;AACnB,EAAC;AAGD,eAAqB,GAAkC,EAAE,KAAqB;KAC5E,MAAM,CAAC,UAAC,MAAW,EAAE,GAAoB;SACvC,IAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE,GAAG,CAAC;SAChE,IAAM,WAAW,GAAG,WAAI,CAAC,cAAM,gCAAsB,GAAG,oBAAe,MAAM,CAAC,WAAW,CAAC,IAAI,OAAG,EAAlE,CAAkE,CAAC;SAClG,IAAM,SAAS,GAAG,cAAc,CAAC,GAAG,EAAE,QAAQ,EAAE,WAAW,CAAC;SAC5D,IAAM,QAAQ,GAAG,2BAAoB,CAAC,MAAM,CAAC,WAAW,CAAC;SACzD,IAAM,cAAc,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,GAAG,CAAC;SAEpF,uBAAgB,CAAC,QAAQ,EAAE,cAAc,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;KACtE,CAAC;AACH,EAAC;AAVe,aAAI,OAUnB;;;;;;;;ACvDD,6CAA8B,EAC9B,CAAC,CADgD;AACjD,sCAAuB,EACvB,CAAC,CADkC;AACnC,kCAA6B,CAE7B,CAAC,CAFkC;AAenC;KACE,wBAAmB,OAAiC;SAAjC,YAAO,GAAP,OAAO,CAA0B;KACpD,CAAC;KACD,gCAAO,GAAP,UAAW,CAAc;SAAzB,iBAEC;SADC,MAAM,CAAC,IAAI,cAAc,CAAI,WAAC,IAAI,QAAC,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAC;KACvD,CAAC;KACH,qBAAC;AAAD,EAAC;AANY,uBAAc,iBAM1B;AAKD,KAAc,WAAW,CAiExB;AAjED,YAAc,WAAW,EAAC,CAAC;KACzB,uBAA8B,CAAK;SACjC,IAAM,SAAS,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC;SACrC,MAAM,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,IAAI,SAAS,IAAI,CAChC,CAAC,OAAO,CAAC,KAAK,UAAU,CAAC;aACzB,CAAC,CAAC,YAAY,iCAAe,CAAC,IAAI,CAAC,CAAC,YAAY,mBAAQ,CAAC,IAAI,CAAC,CAAC,YAAY,cAAc,CAAC;aAC1F,kBAAkB,CAAC,CAAC,CAAC,IAAI,mBAAmB,CAAC,CAAC,CAAC,CAChD;KACH,CAAC;KAPe,yBAAa,gBAO5B;KAED,qBAAqB,CAAe;SAClC,IAAI,CAAC;aACH,MAAM,CAAC,CAAC,EAAE;SACZ,CAAE;SAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;aACV,MAAM,CAAC,KAAK,CAAC;SACf,CAAC;KACH,CAAC;KAED,gCAAgC,CAAK,EAAE,QAAe,EAAE,IAAW;SACjE,EAAE,CAAC,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aAC7C,IAAM,OAAO,GAAG,CAAC,CAAC,QAAQ,CAAC;aAC3B,IAAM,UAAU,GAAG,aAAa,CAAC,OAAO,CAAC;aACzC,oEAAoE;aACpE,MAAM,CAAC,UAAU,CAAC;SACpB,CAAC;SAAC,IAAI;aACJ,MAAM,CAAC,KAAK;KAChB,CAAC;KAED,4BAAmC,CAAK;SACtC,MAAM,CAAC,sBAAsB,CAAC,CAAC,EAAE,SAAS,EAAE,mBAAmB,CAAC;KAClE,CAAC;KAFe,8BAAkB,qBAEjC;KAED,6BAAoC,CAAK;SACvC,MAAM,CAAC,sBAAsB,CAAC,CAAC,EAAE,UAAU,EAAE,oBAAoB,CAAC;KACpE,CAAC;KAFe,+BAAmB,sBAElC;KAED,cAAwB,GAAiC,EACvD,MAA6C,EAC7C,KAAiC,EACjC,MAAmC,EACnC,MAA0B,EAC1B,WAA0C;SAE1C,MAAM,CAAC,UAAC,CAAc;aACpB,EAAE,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC;aACxD,EAAE,CAAC,CAAC,CAAC,YAAY,iCAAe,CAAC;iBAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;aAClD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,mBAAQ,CAAC;iBAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;aAChD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,cAAc,CAAC;iBAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;aAC3D,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC;iBACjC,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;qBAAC,MAAM,CAAC,GAAG,CAAM,CAAC,CAAC;iBAC3C,IAAI;qBAAC,MAAM,IAAI,KAAK,CAAC,8BAA4B,CAAG,CAAC;aACvD,CAAC;aAAC,IAAI,CAAC,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAC,KAAK,CAAM,CAAC,CAAC;aACtD,IAAI,CAAC,EAAE,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAC,MAAM,CAAM,CAAC,CAAC;aACtD,IAAI;iBAAC,MAAM,IAAI,KAAK,CAAC,8BAA4B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAG,CAAC;SACvE,CAAC;KACH,CAAC;KAnBe,gBAAI,OAmBnB;KAEY,uBAAW,GACtB,IAAI,CACF,UAAC,EAAE,IAAK,oBAAU,EAAE,CAAC,IAAI,CAAE,EAAnB,CAAmB,EAC3B,UAAC,SAAS,IAAK,8BAAoB,SAAS,CAAC,WAAW,CAAE,EAA3C,CAA2C,EAC1D,UAAC,OAAO,IAAK,sBAAY,uBAAW,CAAC,OAAO,CAAC,OAAO,CAAC,CAAE,EAA1C,CAA0C,EACvD,UAAC,SAAS,IAAK,uBAAa,uBAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAE,EAA9C,CAA8C,EAC7D,UAAC,MAAM,IAAK,oBAAU,MAAM,CAAC,WAAW,CAAE,EAA9B,CAA8B,EAC1C,UAAC,OAAO,IAAK,qBAAc,EAAd,CAAc,CAAC;AAClC,EAAC,EAjEa,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAiExB;AAGD,0BAAgC,CAAK;KACjC,MAAM,CAAC,CAAC,KAAK,MAAM,IAAI,CAAC,KAAK,MAAM,IAAI,CAAC,KAAK,OAAO;AACtD,EAAC;AAFa,wBAAe,kBAE5B;AAEH,aAAY,CAAC,EAAC,CAAC;KACb,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC;AACjB,EAAC;AAED,uBAA6B,CAAoB;KAC/C,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,aAAM,CAAC;AACtB,EAAC;AAFe,qBAAY,eAE3B;AAED,sBAA4B,CAAoB;KAC9C,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC;AACrB,EAAC;AAFe,oBAAW,cAE1B;;;;;;;;;;;;;AC9GD,kCAA6B,CAE7B,CAAC,CAFkC;AAEnC;KAEE,yBAAmB,OAAkB,EAAS,WAAmB;SAA9C,YAAO,GAAP,OAAO,CAAW;SAAS,gBAAW,GAAX,WAAW,CAAQ;KACjE,CAAC;KACD,iCAAO,GAAP,UAAW,CAAY;SAAvB,iBAEC;SADC,MAAM,CAAC,IAAI,eAAe,CAAO,WAAC,IAAI,QAAC,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAE;KAC5D,CAAC;KACD,iCAAO,GAAP,UAAW,CAAY;SAAvB,iBAEC;SADC,MAAM,CAAC,IAAI,eAAe,CAAO,WAAC,IAAI,YAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAE;KAC5D,CAAC;KACH,sBAAC;AAAD,EAAC;AAVY,wBAAe,kBAU3B;AAED;KAAmC,qCAAsB;KACvD,2BAAY,IAAuB,EAAS,WAAkB;SAC5D,kBAAO,WAAC;aACN,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAI,CAAC,CAAC;aACzB,IAAI;iBAAC,MAAM,IAAI,KAAK,CAAC,YAAU,CAAC,kBAAa,WAAa,CAAC;SAC7D,CAAC,CAAC;SAJwC,gBAAW,GAAX,WAAW,CAAO;KAK9D,CAAC;KACH,wBAAC;AAAD,EAAC,CAPkC,eAAe,GAOjD;AAED,KAAc,eAAe,CA4B5B;AA5BD,YAAc,eAAe,EAAC,CAAC;KAEhB,wBAAQ,GAAG,IAAI,eAAe,CAAU,YAAE,IAAI,SAAE,EAAF,CAAE,EAAE,UAAU,CAAC;KAE1E,oBAA8B,UAAiB;SAC7C,MAAM,CAAC,IAAI,iBAAiB,CAAI,WAAC,IAAI,cAAO,CAAC,KAAK,UAAU,EAAvB,CAAuB,EAAE,UAAU,CAAC;KAC3E,CAAC;KAFe,0BAAU,aAEzB;KAEY,0BAAU,GAAgC,UAAU,CAAS,QAAQ,CAAC;KACtE,0BAAU,GAAgC,UAAU,CAAS,QAAQ,CAAC;KACtE,2BAAW,GAAiC,UAAU,CAAU,SAAS,CAAC;KAC1E,6BAAa,GAA6B,UAAU,CAAM,WAAW,CAAC;KAEnF,kBAA8B,GAAwB;SACpD,MAAM,CAAC,IAAI,eAAe,CAAe,WAAC;aACxC,EAAE,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAC,aAAM,CAAC,IAAI,EAAK;aACtC,IAAI;iBAAC,MAAM,CAAC,aAAM,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SAC3C,CAAC,CAAC;KACJ,CAAC;KALe,wBAAQ,WAKvB;KAED,mBAA6B,CAAyB;SACpD,IAAM,IAAI,GAAG,aAAM,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,OAAO,GAAG,cAAY,CAAC,CAAC,WAAa;SAC1E,MAAM,CAAC,IAAI,eAAe,CAAY,WAAC;aACrC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;iBAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAZ,CAAY,CAAC,CAAC;aACtD,IAAI;iBAAC,MAAO,IAAI,KAAK,CAAC,YAAU,CAAC,kBAAa,IAAM,CAAC;SACvD,CAAC,EAAE,IAAI,CAAC;KACV,CAAC;KANe,yBAAS,YAMxB;AAEH,EAAC,EA5Ba,eAAe,GAAf,uBAAe,KAAf,uBAAe,QA4B5B;;;;;;;;;;;;;AClDD,kCAAkD,CAElD,CAAC,CAFuD;AAExD;KACE,kBAAmB,OAA8C,EAAS,WAAmB;SAA1E,YAAO,GAAP,OAAO,CAAuC;SAAS,gBAAW,GAAX,WAAW,CAAQ;KAC7F,CAAC;KACH,eAAC;AAAD,EAAC;AAHY,iBAAQ,WAGpB;AAED,KAAc,QAAQ,CAgBrB;AAhBD,YAAc,QAAQ,EAAC,CAAC;KAEtB,gBAAuB,CAAwC,EAAE,WAAmB;SAClF,MAAM,CAAC,IAAI,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC;KACrC,CAAC;KAFe,eAAM,SAErB;KAED,eAAsB,EAAsB;SAC1C,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,oBAAM,CAAC,IAAI,CAAC,EAAE,CAAC,EAAf,CAAe,CAAC;KACrC,CAAC;KAFe,cAAK,QAEpB;KAED,0BAAiC,OAA0C,EAAE,WAAmB;SAC9F,MAAM,CAAC,IAAI,QAAQ,CACjB,YAAE,IAAI,oBAAM,CAAC,IAAI,CAAC,OAAO,EAAE,WAAC,IAAI,QAAC,aAAM,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAlB,CAAkB,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,EAAP,CAAO,CAAC,EAA/D,CAA+D,EACrE,WAAW,CAAC;KAChB,CAAC;KAJe,yBAAgB,mBAI/B;AAEH,EAAC,EAhBa,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAgBrB;AAED;KAAwC,sCAAQ;KAC9C,4BAAY,IAAsB,EAAU,KAAsC,EAAE,IAAW;SAC7F,kBAAO,UAAC,CAAC;aACP,IAAM,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;aAClB,MAAM,CAAC,aAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACpC,CAAC,EAAE,IAAI,CAAE;SAJiC,UAAK,GAAL,KAAK,CAAiC;KAKlF,CAAC;KACD,qCAAQ,GAAR,UAAS,EAAS;SAChB,MAAM,CAAC,CAAC,aAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;KAClC,CAAC;KACH,yBAAC;AAAD,EAAC,CAVuC,QAAQ,GAU/C;AAVY,2BAAkB,qBAU9B;AAED,KAAc,kBAAkB,CAO/B;AAPD,YAAc,kBAAkB,EAAC,CAAC;KAEhC,qBAA4B,IAAsB,EAAE,GAA4C,EAAE,IAAW;SAC3G,IAAM,EAAE,GAAG,WAAI,CAAE,cAAM,mBAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAnB,CAAmB,CAAC;SAC3C,MAAM,CAAC,IAAI,kBAAkB,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC;KAC/C,CAAC;KAHe,8BAAW,cAG1B;AAEH,EAAC,EAPa,kBAAkB,GAAlB,0BAAkB,KAAlB,0BAAkB,QAO/B;;;;;;;;AC5CD,mCAAyD,EACzD,CAAC,CADiE;AAClE,6CAA8B,EAC9B,CAAC,CADgD;AACjD,sCAAuB,EAEvB,CAAC,CAFkC;AAEnC,YAAY,YAAY;KACtB,6EAAuB;KACvB,qEAAmB;KACnB,iDAAS;KACT,mDAAU;KACV,mDAAU;KACV,mEAAkB;AACpB,EAAC,EAPW,oBAAY,KAAZ,oBAAY,QAOvB;AAPD,KAAY,YAAY,GAAZ,oBAOX;AAMD;KACE,kBAAmB,IAAiB,EAAS,OAAc,EAAS,IAAiB;SAAlE,SAAI,GAAJ,IAAI,CAAa;SAAS,YAAO,GAAP,OAAO,CAAO;SAAS,SAAI,GAAJ,IAAI,CAAa;KAErF,CAAC;KACD,0BAAO,GAAP,UAAQ,CAAU;SAChB,MAAM,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI;KACnF,CAAC;KACD,sBAAI,2BAAK;cAAT;aACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC;iBAAC,MAAM,CAAC,IAAI,CAAC,IAAI;aAC/C,IAAI,CAAC,CAAC;iBACJ,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;iBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;qBACpB,IAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;qBACzB,MAAM,EAAC,EAAE,CAAC,CAAC,CAAC;yBACV,KAAK,GAAG,EAAE,MAAM,CAAC,IAAI,QAAQ,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC;yBAClE,KAAK,GAAG,EAAE,MAAM,CAAC,IAAI,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC;yBACnE,SAAS,MAAM,IAAI,KAAK,CAAC,kBAAkB,GAAC,EAAE,CAAC;qBACjD,CAAC;iBACH,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACN,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;iBAC5C,CAAC;aACH,CAAC;SACH,CAAC;;;QAAA;KACD,sBAAI,iCAAW;cAAf;aAAA,iBAiBC;aAhBC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAClB,UAAC,EAAE,IAAK,mBAAY,CAAC,WAAW,CAAC,EAAE,CAAC,EAA5B,CAA4B,EACpC,UAAC,GAAG,IAAK,mBAAY,CAAC,WAAW,CAAC,GAAG,CAAC,EAA7B,CAA6B,EACtC;iBACE,IAAM,CAAC,GAAG,KAAI,CAAC,KAAK;iBACpB,EAAE,CAAC,CAAC,CAAC,YAAY,QAAQ,CAAC;qBAAC,MAAM,CAAC,WAAS,CAAC,CAAC,WAAW,MAAG,CAAC;iBAC5D,IAAI;qBAAC,MAAM,CAAC,YAAY,CAAC,WAAW,CAAM,CAAC,CAAC;aAC9C,CAAC,EACD;iBACE,IAAM,CAAC,GAAG,KAAI,CAAC,KAAK;iBACpB,EAAE,CAAC,CAAC,CAAC,YAAY,QAAQ,CAAC;qBAAC,MAAM,CAAC,YAAU,CAAC,CAAC,WAAW,MAAG,CAAC;iBAC7D,IAAI;qBAAC,MAAM,CAAC,YAAY,CAAC,WAAW,CAAM,CAAC,CAAC;aAC9C,CAAC,EACD,UAAC,GAAG,IAAK,iBAAU,EAAV,CAAU,EACnB,UAAC,EAAE,IAAK,mBAAY,CAAC,WAAW,CAAC,EAAE,CAAC,EAA5B,CAA4B,CACrC,CAAC,IAAI,CAAC;SACT,CAAC;;;QAAA;KACH,eAAC;AAAD,EAAC;AAzCY,iBAAQ,WAyCpB;AAED,KAAc,YAAY,CA0BzB;AA1BD,YAAc,YAAY,EAAC,CAAC;KAE1B,cAAwB,GAAiC,EACvD,MAA6C,EAC7C,MAA2B,EAC3B,WAA0C;SAE1C,MAAM,CAAC,WAAC;aACN,EAAE,CAAC,CAAC,CAAC,YAAY,iCAAe,CAAC;iBAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;aAClD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,mBAAQ,CAAC,CAAC,CAAC;iBAC/B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;aAClB,CAAC;aAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,sBAAc,CAAC;iBAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;aAC7D,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,UAAU,CAAC;iBAAC,MAAM,CAAC,GAAG,CAAM,CAAC,CAAC;aACpD,IAAI;iBAAC,MAAM,IAAI,KAAK,CAAC,yBAAyB,GAAC,CAAC,CAAC;SACnD,CAAC;KACH,CAAC;KAbe,iBAAI,OAanB;KAED,qBAA4B,CAAc;SACxC,MAAM,CAAC,IAAI,CACT,UAAC,EAAE,IAAK,SAAE,CAAC,IAAI,EAAP,CAAO,EACf,UAAC,GAAG,IAAK,UAAG,CAAC,WAAW,IAAI,mBAAmB,EAAtC,CAAsC,EAC/C,UAAC,GAAG,IAAK,UAAG,CAAC,WAAW,IAAI,YAAY,EAA/B,CAA+B,EACxC,cAAM,oBAAa,EAAb,CAAa,CACpB,CAAC,CAAC,CAAC;KACN,CAAC;KAPe,wBAAW,cAO1B;AAEH,EAAC,EA1Ba,YAAY,GAAZ,oBAAY,KAAZ,oBAAY,QA0BzB;AAED,KAAc,QAAQ,CAmErB;AAnED,YAAc,QAAQ,EAAC,CAAC;KAEtB,gBAAuB,EAAqB;SAC1C,MAAM,CAAC,IAAI,QAAQ,CAAC,YAAY,CAAC,mBAAmB,EAAE,EAAE,EAAE,EAAE,CAAC;KAC/D,CAAC;KAFe,eAAM,SAErB;KAEY,wBAAe,GAA+B,mBAAW,CAAC,IAAI,CACzE,UAAC,EAAE,IAAK,WAAI,QAAQ,CAAC,YAAY,CAAC,mBAAmB,EAAE,EAAE,EAAE,EAAE,CAAC,EAAtD,CAAsD,EAC9D,UAAC,GAAG,IAAK,WAAI,QAAQ,CAAC,YAAY,CAAC,eAAe,EAAE,EAAE,EAAE,GAAG,CAAC,EAAnD,CAAmD,EAC5D,UAAC,GAAG;SACF,IAAM,WAAW,GAAG,wBAAe,CAAC,GAAG,CAAC,OAAO,CAAC;SAChD,MAAM,CAAC,IAAI,QAAQ,CAAC,YAAY,CAAC,KAAK,EAAE,MAAI,WAAW,CAAC,OAAS,EAAE,WAAW,CAAC,IAAI,CAAC;KACtF,CAAC,EACD,UAAC,GAAG;SACF,IAAM,WAAW,GAAG,wBAAe,CAAC,GAAG,CAAC,QAAQ,CAAC;SACjD,MAAM,CAAC,IAAI,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,MAAI,WAAW,CAAC,OAAS,EAAE,WAAW,CAAC,IAAI,CAAC;KACvF,CAAC,EACD,UAAC,GAAG,IAAK,WAAI,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,EAAE,GAAG,CAAC,EAA1C,CAA0C,EACnD,UAAC,GAAG,IAAK,WAAI,QAAQ,CAAC,YAAY,CAAC,cAAc,EAAE,EAAE,EAAE,GAAG,CAAC,EAAlD,CAAkD,CAC5D;KAEF,cAAwB,GAAiC,EACtD,MAA6C,EAC7C,KAAyB,EACzB,MAA0B,EAC1B,MAA6C,EAC7C,WAA0C;SAE1C,MAAM,CAAC,WAAC;aACN,MAAM,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;iBACd,KAAK,YAAY,CAAC,mBAAmB,EAAE,MAAM,CAAC,GAAG,CAAM,CAAC,CAAC,KAAK,CAAC;iBAC/D,KAAK,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,MAAM,CAAM,CAAC,CAAC,KAAK,CAAC;iBAC9D,KAAK,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;iBACxC,KAAK,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;iBAC1C,KAAK,YAAY,CAAC,MAAM;qBACtB,IAAM,OAAK,GAAa,CAAC,CAAC,KAAK;qBAC/B,IAAM,CAAC,GAAgC,UAAC,EAAE;yBACxC,cAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,GAAG,CAAE,WAAC,IAAI,+BAAe,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAC;qBAA/C,CAA+C;qBACjD,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;iBAClB,KAAK,YAAY,CAAC,cAAc,EAAE,MAAM,CAAC,WAAW,CAAM,CAAC,CAAC,KAAK,CAAC;aACpE,CAAC;SACH,CAAC;KACH,CAAC;KArBc,aAAI,OAqBlB;KAED,iBAA2B,GAAiC,EAC1D,MAA6C,EAC7C,KAAyB,EACzB,MAA0B,EAC1B,MAA6C,EAC7C,WAA0C;SAE1C,MAAM,CAAC,WAAC;aACN,EAAE,CAAC,CAAC,CAAC,YAAY,QAAQ,CAAC;iBAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;aAC1F,IAAI;iBAAC,YAAY,CAAC,IAAI,CACpB,UAAC,EAAE,IAAK,UAAG,CAAC,EAAE,CAAC,EAAP,CAAO,EACf,UAAC,GAAG,IAAK,aAAM,CAAC,GAAG,CAAC,EAAX,CAAW,EACpB,UAAC,GAAG;qBACF,IAAM,KAAK,GAAG,CAAC;qBACf,IAAM,CAAC,GAAgC,UAAC,EAAE,IAAK,UAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,GAAG,CAAE,WAAC,IAAI,eAAQ,CAAC,eAAe,CAAC,CAAC,CAAC,EAA3B,CAA2B,CAAC,EAAtD,CAAsD;qBACrG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;iBAClB,CAAC,EACD,UAAC,EAAE,IAAK,kBAAW,CAAC,EAAE,CAAC,EAAf,CAAe,CACxB;SACH,CAAC;KACH,CAAC;KApBe,gBAAO,UAoBtB;AAGH,EAAC,EAnEa,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAmErB;;;;;;;;AC5JD,kCAA4B,CAC5B,CAAC,CADiC;AAGlC,wCAAyB,EACzB,CAAC,CADsC;AAevC;KAEE;SACE,IAAI,CAAC,SAAS,GAAG,IAAI,uBAAU,CAAqC,UAAC,CAAC,EAAC,CAAC,IAAK,QAAC,KAAK,CAAC,EAAP,CAAO,CAAE;KACxF,CAAC;KACD,0BAAG,GAAH,UAAI,EAAqB;SACvB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC;KACxC,CAAC;KACD,4BAAK,GAAL,UAAM,EAAqB,EAAE,CAAe;SAC1C,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;KACtC,CAAC;KACH,mBAAC;AAAD,EAAC;AAXY,qBAAY,eAWxB;AAGD,KAAc,gBAAgB,CAkC7B;AAlCD,YAAc,gBAAgB,EAAC,CAAC;KAC9B;;;OAGE;KACF,IAAM,SAAS,GAAG,IAAI,YAAY,EAAE;KAEpC,2BAA2B,CAAe;SACxC,IAAM,GAAG,GAAiB,EAAE;SAC5B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAE,WAAC,IAAI,UAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,EAAD,CAAC,CAAC,EAAzB,CAAyB,CAAE;SACxD,MAAM,CAAC,GAAG,CAAC;KACb,CAAC;KAED,+BAA+B,CAAoB;SACjD,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC;KAC3C,CAAC;KAED,sBAAgC,CAAkB;SAChD,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;KACzB,CAAC;KAFe,6BAAY,eAE3B;KAGD,8BAAwC,CAAkB;SACxD,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAC1B;aACE,IAAM,GAAG,GAAG,YAAY,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;aAClD,IAAM,IAAI,GAAiB,GAAG,CAAC,GAAG,CAAE,aAAG,IAAI,wBAAiB,CAAC,GAAG,CAAC,EAAtB,CAAsB,CAAC,CAAC,SAAS,CAAC,cAAQ,MAAM,CAAC,EAAE,EAAC,CAAC,CAAC;aACjG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC;aACxB,MAAM,CAAC,IAAI;SACb,CAAC,EACD,UAAC,CAAC,IAAK,QAAC,EAAD,CAAC,CACT;KACH,CAAC;KAVe,qCAAoB,uBAUnC;AAEH,EAAC,EAlCa,gBAAgB,GAAhB,wBAAgB,KAAhB,wBAAgB,QAkC7B;AAED,2BAAiC,EAAgB,EAAE,CAAc,EAAE,CAAkB;KACnF,aAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CACvB,cAAM,SAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAX,CAAW,EACjB,UAAC,OAAO,IAAK,cAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAf,CAAe,CAC7B;AACH,EAAC;AALe,yBAAgB,mBAK/B;AAEY,qBAAY,GAAG,gBAAgB,CAAC,YAAY;AAC5C,6BAAoB,GAAG,gBAAgB,CAAC,oBAAoB;;;;;;;;AC5EzE,kCAAoC,CAEpC,CAAC,CAFyC;AAO1C;KAEE,oBAAoB,YAAkC;SAAlC,iBAAY,GAAZ,YAAY,CAAsB;SADtD,UAAK,GAAuB,EAAE;KAE9B,CAAC;KACD,wBAAG,GAAH,UAAI,EAAS,EAAE,CAAG;SAAlB,iBAIC;SAHC,MAAM,CAAC,aAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAE,iBAAO;aACnD,MAAM,CAAC,aAAM,CAAC,IAAI,CAAa,OAAO,EAAE,WAAC,IAAI,YAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAA3B,CAA2B,CAAE;SAC5E,CAAC,CAAE,CAAC,GAAG,CAAE,WAAC,IAAI,QAAC,CAAC,KAAK,EAAP,CAAO,CAAE;KACzB,CAAC;KACD,0BAAK,GAAL,UAAS,EAAS,EAAE,CAAG,EAAE,CAAG;SAA5B,iBAYC;SAXC,aAAM,CAAC,MAAM,CAAe,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAC9C,cAAQ,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,EAAC,GAAG,EAAC,CAAC,EAAE,KAAK,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAC7C,UAAC,OAAO;aACL,aAAM,CAAC,IAAI,CAAa,OAAO,EAAE,WAAC,IAAI,YAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAA3B,CAA2B,CAAC,CAAC,IAAI,CACtE,cAAM,cAAO,CAAC,IAAI,CAAC,EAAC,GAAG,EAAC,CAAC,EAAE,KAAK,EAAC,CAAC,EAAC,CAAC,EAA9B,CAA8B,EACpC,UAAC,QAAQ;iBACP,MAAM,IAAI,KAAK,CAAC,8BAA4B,EAAE,aAAQ,CAAG,CAAC;aAC5D,CAAC,CACF;SACH,CAAC,CACF;KACH,CAAC;KACH,iBAAC;AAAD,EAAC;AAtBY,mBAAU,aAsBtB;;;;;;;;AC7BD,kCAA0C,CAC1C,CAAC,CAD+C;AAChD,4CAAiD,EACjD,CAAC,CADkE;AACnE,4CAAmD,EACnD,CAAC,CADoE;AACrE,mCAAoC,EACpC,CAAC,CAD4C;AAC7C,kCAA0C,EAC1C,CAAC,CADiD;AAClD,kCAAmB,EACnB,CAAC,CAD0B;AAC3B,uCAAwB,EACxB,CAAC,CADoC;AAErC,mCAAuD,EACvD,CAAC,CAD+D;AAChE,kCAAmB,EACnB,CAAC,CAD0B;AAC3B,gDAA+D,EAC/D,CAAC,CADoF;AAErF,0CAA2B,EAC3B,CAAC,CAD0C;AAC3C,sCAAkD,EAElD,CAAC,CAF6D;AAiB9D,kCAAiC,GAAe,EAAE,IAAe;KAC/D,MAAM,CAAC,IAAI,qBAAqB,CAAC,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,CAAC;AAC5D,EAAC;AAED,gBAAyB,GAAoB,EAAE,IAAe;KAC5D,MAAM,CAAC,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC;AAC3C,EAAC;AAFe,cAAK,QAEpB;AAED,qBAA8B,GAAoB,EAAE,IAAe;KACjE,MAAM,CAAC,uBAAuB,CAAC,EAAE,OAAO,EAAC,GAAG,EAAE,EAAE,IAAI,CAAC;AACvD,EAAC;AAFe,mBAAU,aAEzB;AAED,sBAA4B,EAAW,EAAE,IAAe;KACtD,MAAM,CAAC,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC;AAC1C,EAAC;AAFe,oBAAW,cAE1B;AAED,wBAAuB,IAAgB;KACrC,IAAM,cAAc,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,qCAAoB,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;KAC/F,IAAM,SAAS,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,IAAI,kBAAU,EAAE;KAClF,IAAM,KAAK,GAAG,IAAI,2BAAY,EAAE;KAChC,IAAM,cAAc,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,mCAAkB;KAE1E,IAAM,OAAO,GAAY,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAC,cAAc,EAAE,cAAc,EAAE,EAAE,EAAE;KAClJ,MAAM,CAAC,OAAO,CAAC;AACjB,EAAC;AAED,4BAA8B,OAAe;KAC3C,MAAM,CAAC,UAAI,GAAqB,EAAE,GAAO;SACvC,MAAM,CAAC,eAAe,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC;KAC3C,CAAC;AACH,EAAC;AAED;KAKE,+BAAoB,GAAe,EAAU,OAAe;SAL9D,iBAyCC;SApCqB,QAAG,GAAH,GAAG,CAAY;SAAU,YAAO,GAAP,OAAO,CAAQ;SAC1D,IAAI,CAAC,aAAa,GAAG,WAAI,CAAC,cAAM,wBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,EAA/B,CAA+B,CAAC;SAChE,IAAI,CAAC,QAAQ,GAAG,WAAI,CAAC,cAAM,0BAAQ,CAAC,eAAe,CAAC,KAAI,CAAC,GAAG,CAAC,EAAlC,CAAkC,CAAC;SAC9D,IAAI,CAAC,GAAG,GAAG,WAAI,CAAC,cAAM,sDAA0B,CAAC,KAAI,CAAC,GAAG,CAAC,EAApC,CAAoC,CAAC;SAC3D,IAAI,CAAC,kBAAkB,GAAG,WAAI,CAAC,cAAM,YAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,KAAK,uBAAY,CAAC,KAAK,EAA3C,CAA2C,CAAC;KACnF,CAAC;KACO,4DAA4B,GAApC,UAAqC,CAAK;SACxC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,cAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAC;KAC/E,CAAC;KACD,0CAAU,GAAV,UAAW,GAAO;SAAlB,iBAEC;SADC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,YAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,EAApC,CAAoC,CAAC;KACzG,CAAC;KACD,yCAAS,GAAT,UAAU,IAAU;SAApB,iBAMC;SALC,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;aAC9B,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,YAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,EAApC,CAAoC,CAAC;SAC1G,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,MAAM,CAAC,IAAI,qBAAqB,CAAC,EAAC,OAAO,EAAC,IAAI,CAAC,GAAG,EAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC;SACpF,CAAC;KACH,CAAC;KACD,oCAAI,GAAJ,UAAK,GAAU,EAAE,GAAiB;SAAlC,iBAQC;SAPC,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;aAC9B,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,4CAA0C,GAAK,CAAC,CAAC;SACnF,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,IAAM,EAAE,GAAG,GAAG,KAAK,SAAS,GAAG,IAAI,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;aACxF,IAAI,KAAG,GAAO,SAAS;aACvB,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,EAAG,IAAI,CAAC,QAAQ,EAAE,EAAE,UAAC,CAAC,IAAK,YAAG,GAAG,CAAC,EAAP,CAAO,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,YAAI,CAAC,4BAA4B,CAAC,KAAG,CAAC,EAAtC,CAAsC,CAAC;SACpI,CAAC;KACH,CAAC;KACD,wCAAQ,GAAR,UAAS,IAAa;SAAtB,iBAOC;SANC,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;aAC9B,IAAI,KAAG,GAAG,SAAS;aACnB,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,UAAC,CAAC,IAAK,YAAG,GAAG,CAAC,EAAP,CAAO,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,YAAI,CAAC,4BAA4B,CAAC,KAAG,CAAC,EAAtC,CAAsC,CAAC;SACpI,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,MAAM,CAAC,IAAI,qBAAqB,CAAC,EAAC,OAAO,EAAC,IAAI,CAAC,GAAG,EAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;SACnF,CAAC;KACH,CAAC;KACH,4BAAC;AAAD,EAAC;AAED,oBAAmB,GAAY,EAAE,SAAoB,EAAE,cAA6B;KAClF,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAC5B;SACE,IAAM,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,cAAI,IAAI,qBAAc,CAAC,IAAI,EAAE,GAAG,CAAC,EAAzB,CAAyB,CAAC;SAC5E,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;SACvB,MAAM,CAAC,CAAC,CAAC;KACX,CAAC,EACD,UAAC,CAAC,IAAK,QAAC,EAAD,CAAC,CAAC;AACb,EAAC;AAMD,sBAAqB,GAAO,EAAE,IAAoB;KAChD,IAAM,CAAC,GAAG,MAAM,CAAC,wBAAwB,CAAC,GAAG,EAAO,IAAI,CAAC,CAAC;KAC1D,MAAM,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,CAAC,QAAQ,KAAK,IAAI;AAC/C,EAAC;AAED,sBAAqB,GAAO,EAAE,IAAoB,EAAE,CAAK;KACvD,IAAI,CAAC;SACH,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;KACf,CAAE;KAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;KACZ,CAAC;AACH,EAAC;AAED,0BAA4B,OAAgB,EAAE,GAAqB,EAAE,KAAU,EAAE,SAAiB;KAEhG,IAAM,KAAK,GAAiC,mBAAY,CAAC,GAAG,CAAC,CAAC,SAAS,CAAE,cAAQ,MAAM,CAAC,EAAE,EAAC,CAAC,CAAC;KAC7F,IAAM,CAAC,GAAG,IAAI,GAAG,EAAE;KAEnB,IAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,YAAK,CAAC,KAAK,CAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;KAChE,IAAM,QAAQ,GAAmB,UAAU,CAAC,GAAG,CAAC,WAAC;SAC/C,IAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;SAClB,IAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;SAErB,EAAE,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAE/B,IAAM,KAAK,GAAkB,IAAI,CAAC,GAAG,CAAE,mBAAS;iBAC9C,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;qBAC7C,EAAE,CAAC,CAAC,SAAS,YAAY,qBAAS,CAAC,CAAC,CAAC;yBAEnC,IAAM,UAAU,GAAG,UAAC,GAAS,IAAK,sBAAY,CAAC,YAAO,GAAG,CAAC,IAAI,8BAAyB,GAAG,CAAC,OAAO,CAAE,EAAlE,CAAkE;yBAEpG,MAAM,CAAC,WAAI,CAAC,cAAM,gBAAS,CAAC,UAAU,CAAC,SAAS,EAAE,iBAAiB,CAAC,OAAO,CAAC,EAAE,aAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,EAArF,CAAqF,EAAE,UAAU,CAAC,CAAC,IAAI,CAAE,WAAC;6BAC1H,kBAAW,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,EAAE,CAAC,CAAC;yBAA3C,CAA2C,CAC5C;qBAEH,CAAC;qBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,YAAY,WAAI,CAAC,CAAC,CAAC;yBAErC,IAAM,QAAQ,GAAG,SAAS,CAAC,UAAU,CAAC,IAAI,KAAK,uBAAY,CAAC,MAAM,IAAI,oBAAY,CAAM,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;yBACpH,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;6BACb,WAAW,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,EAAE,aAAM,CAAC,IAAI,EAAE,CAAC;6BACvD,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE;yBAC1B,CAAC;yBAAC,IAAI,CAAC,CAAC;6BACN,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,mBAAiB,CAAC,YAAO,GAAG,CAAC,IAAI,kBAAe,CAAC,CAAC;yBACpF,CAAC;qBACH,CAAC;iBACH,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACN,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE;iBAC1B,CAAC;aACH,CAAC,CAAC;aACF,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;SAEtE,CAAC;SAAC,IAAI,CAAC,CAAC;aAEN,MAAM,CAAC,aAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAC7B;iBACE,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;qBAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBAC3C,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE;aAC1B,CAAC,EACD,UAAC,IAAI;iBACH,IAAM,KAAK,GAAkB,IAAI,CAAC,GAAG,CAAE,WAAC;qBACtC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;yBAAC,MAAM,CAAC,aAAa,CAAC,OAAO,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,WAAC,IAAM,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;qBAC/H,IAAI;yBAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;iBAChC,CAAC,CAAC;iBACF,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;aAC3B,CAAC,CACF;SACH,CAAC;KACH,CAAC,CAAC;KAEF,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,EAAD,CAAC,CAAC;AAC3C,EAAC;AAGD,sBAAwB,GAAU,EAAE,OAAe,EAAE,UAA2B,EAAE,QAAsB;KACtG,MAAM,CAAC,aAAa,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC;AACxF,EAAC;AAED,mBAAkB,GAAU,EAAE,OAAe;KAC3C,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,cAAc,CAAC;AAC1F,EAAC;AAED,oBAAmB,GAAqB,EAAE,OAAe,EAAE,MAAkB,EAAE,QAAwB,EAAE,OAAc;KACrH,IAAM,iBAAiB,GAAG,WAAI,CAAC,cAAM,cAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,gCAA8B,GAAK,CAAC,CAAC,EAA9D,CAA8D,CAAC;KACpG,IAAM,kBAAkB,GAAG,WAAI,CAAC,cAAM,cAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,iCAA+B,GAAK,CAAC,CAAC,EAA/D,CAA+D,CAAC;KAEtG,MAAM,CAAC,mBAAQ,CAAC,OAAO,CACrB,UAAC,UAAU,IAAK,cAAO,GAAG,KAAK,QAAQ,GAAG,WAAW,CAAC,GAAG,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,CAAC,GAAG,kBAAkB,EAAE,EAAhG,CAAgG,EAChH,UAAC,GAAG;SACF,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;aAE5B,IAAM,MAAI,GAAG,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,IAAI,CAAE,WAAC,IAAI,kBAAI,CAAE;iBACnD,IAAM,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;iBACxB,QAAQ,CAAC,CAAC,CAAC;iBACX,MAAM,CAAC,CAAC,CAAC;aACX,CAAC,CAAC,EAJ6C,CAI7C,CAAC;aAEH,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE,mBAAQ,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,cAAM,aAAI,EAAJ,CAAI,EAAE,OAAO,EAAE,QAAQ,CAAE;SAE5F,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,MAAM,CAAC,kBAAkB,EAAE;SAC7B,CAAC;KACH,CAAC,EACD,UAAC,GAAG;SACF,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACxB,MAAM,CAAC,iBAAiB,EAAE;SAC5B,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,IAAM,KAAG,GAAS,EAAE;aACpB,IAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAE,UAAC,CAAC,EAAE,GAAG;iBAC5B,IAAM,EAAE,GAAG,SAAS,CAAC,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,KAAK,EAAE,WAAC,IAAM,KAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAC,CAAC,EAAE,OAAO,CAAC;iBAC3E,MAAM,CAAC,EAAE,CAAC,IAAI,CAAE,WAAC,IAAI,cAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAlB,CAAkB,EAAE,aAAG,IAAI,cAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,oBAAkB,GAAG,gBAAW,GAAG,CAAC,OAAS,CAAC,CAAE,EAAzE,CAAyE,CAAC;aAC5H,CAAC,CAAC;aACF,MAAM,CAAC,OAAO,CAAC,GAAG,CAAE,KAAK,CAAE,CAAC,IAAI,CAAE,WAAC,IAAI,eAAQ,CAAC,KAAG,CAAC,EAAb,CAAa,CAAE;SACxD,CAAC;KACH,CAAC,EACD,UAAC,GAAG;SACF,EAAE,CAAC,CAAC,aAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aAChB,QAAQ,CAAC,aAAM,CAAC,IAAI,EAAE,CAAC;aACvB,MAAM,CAAC,OAAO,CAAC,OAAO,EAAQ;SAChC,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC,KAAK,EAAE,WAAC,IAAI,eAAQ,CAAC,aAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAxB,CAAwB,EAAE,OAAO,CAAC;SACnF,CAAC;KACH,CAAC,EACD,UAAC,MAAM;SACL,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,QAAS,CAAC,CAAC,CAAC;aAC7B,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,IAAI,CAAE,aAAG;iBACrC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CACrB,cAAM,cAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,yBAAuB,GAAK,CAAC,CAAC,EAAvD,CAAuD,EAC7D,UAAC,GAAG,IAAK,gBAAS,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,CAAC,EAA/C,CAA+C,CACzD;aACH,CAAC,CAAC;SACJ,CAAC;SAAC,IAAI;aACJ,MAAM,CAAC,kBAAkB,EAAE;KAC/B,CAAC,EACD,UAAC,EAAE;SACD,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,aAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;SAC5C,MAAM,CAAC,OAAO,CAAC,OAAO,EAAQ;KAChC,CAAC,CACF,CAAC,MAAM,CAAC;AACX,EAAC;AAED,wBAAuB,OAAgB,EAAE,QAAe,EAAE,YAAmB,EAAE,SAAa,EAAE,SAAgB,EAAE,CAAmB,EAAE,QAA0B;KAC7J,IAAI,GAAgB;KACpB,EAAE,CAAC,CAAC,CAAC,YAAY,WAAI,CAAC,CAAC,CAAC;SAEtB,EAAE,CAAC,CAAC,CAAC,OAAO,SAAS,KAAK,QAAQ,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;aAChE,GAAG,GAAG,SAAS,CAAC,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC,UAAU,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC,IAAI,CAAE,WAAC,IAAI,cAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAlB,CAAkB,EAAE,aAAG;iBAEzG,IAAM,GAAG,GAAG,8BAA4B,YAAY,YAAO,QAAQ,kBAAa,GAAG,CAAC,OAAS;iBAC7F,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;aACvC,CAAC,CAAC;SACF,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,8BAA4B,YAAY,YAAO,QAAQ,8BAAyB,SAAW,CAAC,CAAC;SAC9H,CAAC;KAEH,CAAC;KAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,qBAAS,CAAC,CAAC,CAAC;SAElC,GAAG,GAAG,CAAC,CAAC,UAAU,CAAC,SAAS,EAAE,iBAAiB,CAAC,OAAO,CAAC,EAAE,aAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,WAAC;aACxF,QAAQ,CAAC,CAAC,CAAC,CAAC;aACZ,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;SAC3B,CAAC,EAAE,aAAG;aAEJ,IAAM,GAAG,GAAG,2CAAyC,YAAY,YAAO,QAAQ,UAAK,GAAG,CAAC,OAAS;aAClG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;SACvC,CAAC,CAAC;KACJ,CAAC;KACD,MAAM,CAAC,GAAG,CAAC;AACb,EAAC;AAED,0BAAyB,GAAW,EAAE,GAAY,EAAE,CAAoB,EAAE,OAAgB,EAAE,QAAwB;KAClH,oBAAuB,GAAW,EAAE,KAAmB,EAAE,GAAY,EAAE,CAAa;SAClF,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;SACxB,MAAM,CAAC,CAAC,CAAC;KACX,CAAC;KAED,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,IAAI,CACrC,cAAM,iBAAU,CAAC,GAAG,EAAE,OAAO,CAAC,KAAK,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAxC,CAAwC,EAC9C,UAAC,UAAU;SAET,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAC;aAC3C,QAAQ,CAAC,CAAC,CAAC;aACX,MAAM,CAAC,CAAC,CAAC;SACX,CAAC,CAAC,CAAC;SAEH,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE;KAC1B,CAAC,CACF;AACH,EAAC;AAED,wBAA0B,OAAgB,EAAE,GAAqB;KAE/D,EAAE,CAAC,CAAC,aAAM,CAAC,GAAG,CAAC,CAAC;SAAC,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC;KAEjE,IAAM,SAAS,GAAG,GAAG,IAAI,mBAAY,CAAC,GAAG,CAAC;KAC1C,IAAM,OAAO,GAAG,mBAAQ,CAAC,eAAe,CAAC,GAAG,CAAC;KAC7C,MAAM,CAAC;SACL,KAAK,EAAE,UAAC,GAAY,EAAE,QAAwB;aAE5C,IAAM,IAAI,GAAG,cAAM,gBAAS,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,WAAC;iBACjF,MAAM,CAAC,SAAS,CAAC,IAAI,CACnB;qBACE,IAAM,CAAC,GAAM,IAAI,GAAG,EAAE;qBACtB,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAE,WAAC;yBACvB,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;6BAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC/C,CAAC,CAAC;qBACF,QAAQ,CAAC,CAAC,CAAC;qBACX,MAAM,CAAC,CAAC,CAAC;iBACX,CAAC,EACD,UAAC,SAAS,IAAK,sBAAe,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,WAAC;qBAC7D,QAAQ,CAAC,CAAC,CAAC,CAAC;qBACZ,MAAM,CAAC,CAAC,CAAC;iBACX,CAAC,CAAC,EAHa,CAGb,CACH;aACH,CAAC,CAAC,EAfiB,CAejB;aAEF,MAAM,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC;SAEnE,CAAC;MACF;AACH,EAAC;;;;;;;;AC5UD,oBAAmB,GAAU;KAC3B,IAAI,CAAC;SACH,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACzC,CAAE;KAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACX,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,wBAAsB,CAAC,CAAC,OAAO,gBAAW,GAAK,CAAC,CAAC;KACnF,CAAC;AACH,EAAC;AAED,mBAAkB,IAAa;KAC7B,IAAM,EAAE,GAAG,IAAI,CAAC,MAAM;KACtB,MAAM,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,EAAE,GAAE,GAAG,CAAC,CAAC;AAChC,EAAC;AAED,kBAAiB,GAAW;KAC1B,MAAM,CAAI,GAAG,CAAC,MAAM,SAAI,GAAG,CAAC,GAAK;AACnC,EAAC;AAEY,2BAAkB,GAAkB,UAAC,IAAa,EAAE,GAAW;KAC1E,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACnB,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC;KACpC,CAAC;KAAC,IAAI,CAAC,CAAC;SACN,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAI,OAAO,CAAC,GAAG,CAAC,yBAAoB,IAAI,CAAC,MAAQ,CAAC,CAAC;KACpF,CAAC;AACH,EAAC;;;;;;;;ACvBD,+BAAqC,OAAoB;KACvD,MAAM,CAAC,aAAG;SACR,MAAM,CAAC,IAAI,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;KACnC,CAAC;AACH,EAAC;AAJe,6BAAoB,uBAInC;;;;;;;;ACPD,kCAAqB,CAErB,CAAC,CAF0B;AAS3B;KAAA;SACU,UAAK,GAAY,EAAE;KAQ7B,CAAC;KANC,wBAAG,GAAH,UAAI,GAAW;SACb,MAAM,CAAC,aAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;KAC3C,CAAC;KACD,0BAAK,GAAL,UAAM,GAAW,EAAE,OAAoB;SACrC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;KAChC,CAAC;KACH,iBAAC;AAAD,EAAC;AATY,mBAAU,aAStB;AAEY,gBAAO,GAAG;KACrB,GAAG,YAAC,GAAW;SACb,MAAM,CAAC,aAAM,CAAC,IAAI,EAAgB;KACpC,CAAC;KACD,KAAK,YAAC,GAAW,EAAE,OAAoB;KACvC,CAAC;EACF;;;;;;;;AC3BD,kCAAgD,CAChD,CAAC,CADqD;AACtD,kCAAiH,EACjH,CAAC,CADwH;AACzH,mCAA0E,EAC1E,CAAC,CADkF;AACnF,gDAAyC,EACzC,CAAC,CAD8D;AAC/D,6CAA8B,EAE9B,CAAC,CAFgD;AAKjD;KACE,mBAAmB,UAAqB,EAAS,cAA4B,EAAS,UAA+B;SAAlG,eAAU,GAAV,UAAU,CAAW;SAAS,mBAAc,GAAd,cAAc,CAAc;SAAS,eAAU,GAAV,UAAU,CAAqB;KACrH,CAAC;KACH,gBAAC;AAAD,EAAC;AAHY,kBAAS,YAGrB;AAED,0BAAyB,UAAsB,EAAE,cAA4B,EAAE,UAA+B;KAC5G,MAAM,CAAC,IAAI,SAAS,CAAC,+CAA0B,CAAC,UAAU,CAAC,EAAE,cAAc,EAAE,UAAU,CAAC;AAC1F,EAAC;AAED,sCAAqC,EAAqB;KACxD,MAAM,CAAC,iCAAe,CAAC,MAAM,GAAC,EAAE,CAAC,IAAI,CAAC;AACxC,EAAC;AAED,kBAAwB,IAAkC,EAAE,IAAqB;KAC/E,MAAM,CAAC,UAAC,MAAW,EAAE,GAAoB;SACvC,IAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE,GAAG,CAAC;SAChE,IAAI,GAAG,GAAe,CAAC,aAAM,CAAC,IAAI,CAAC,IAAI,mBAAW,CAAC,aAAa,CAAC,IAAI,CAAC;aACpE,IAAI;aACJ,CAAC,aAAM,CAAC,QAAQ,CAAC,GAAG,iCAAe,CAAC,QAAQ,GAAG,CAAC,uBAAe,CAAC,QAAQ,CAAC,GAAG,2BAA2B,CAAC,QAAQ,CAAC,GAAE,QAAQ,CAAC,CAAC,CAAC;SAEhI,IAAM,QAAQ,GAAkB,2BAAoB,CAAC,MAAM,CAAC,WAAW,CAAC;SACxE,IAAM,cAAc,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,GAAG,CAAC;SACpF,uBAAgB,CAAC,QAAQ,EAAE,cAAc,EAAE,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;KACjF,CAAC;AACH,EAAC;AAXe,gBAAO,UAWtB;AAED,iBAA0B,CAAM,EAAE,IAAY;KAC5C,MAAM,CAAC,SAAS,CAAS,CAAC,EAAE,IAAI,CAAC,CAAC;AACpC,EAAC;AAFe,eAAM,SAErB;AAED,oBAA6B,EAAY,EAAE,IAAY;KACrD,MAAM,CAAC,UAAC,GAAW;SACjB,IAAM,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;SAClB,EAAE,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,CAAC;aAAC,MAAM,KAAK,CAAI,GAAG,kBAAa,IAAM,CAAC;SACrD,MAAM,CAAC,CAAC,CAAC;KACX,CAAC;AACH,EAAC;AANe,kBAAS,YAMxB;AAEY,oBAAW,GAAG,IAAI,sBAAc,CAAS,YAAE,IAAI,SAAE,CAAC,SAAS,CAAE,cAAM,kBAAI,CAAS,sBAAsB,CAAC,EAApC,CAAoC,CAAE,EAA1D,CAA0D,CAAE;AAC3G,4BAAmB,GAAG,IAAI,sBAAc,CAAiB,YAAE,IAAI,SAAE,EAAF,CAAE,CAAC;;;;;;;;AChD/E,mCAA8F,EAC9F,CAAC,CADsG;AAIvG,kCAA6B,CAC7B,CAAC,CADkC;AACnC,kCAAmB,EAEnB,CAAC,CAF0B;AAI3B,2BAA0B,GAAU;KAClC,MAAM,CAAC;SACL,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;KACvC,CAAC;AACH,EAAC;AAEY,mCAA0B,GACrC,mBAAW,CAAC,IAAI,CACd,UAAC,EAAE,IAAK,iBAAC,CAAK,EAAE,aAA2B,EAAE,SAAwB;KACjE,MAAM,CAAC,aAAa,CAAC,EAAE,EAAE,CAAC,CAAC;AAC/B,EAAC,EAFO,CAEP,EACD,UAAC,CAAC,IAAK,iBAAC,CAAK,EAAE,aAA2B,EAAE,SAAwB;KAClE,MAAM,CAAC,WAAI,CAAE,cAAM,QAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAZ,CAAY,CAAC;AAClC,EAAC,EAFM,CAEN,EACD,UAAC,GAAG;KACF,IAAM,MAAM,GAAG,kCAA0B,CAAC,GAAG,CAAC,OAAO,CAAC;KACtD,MAAM,CAAC,UAAC,CAAK,EAAE,aAA2B,EAAE,SAAwB;SAClE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;aAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;SAC7E,IAAI;aAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,aAAM,CAAC,CAAC,EAAE,aAAa,EAAE,SAAS,CAAC,EAAnC,CAAmC,CAAE,CAAC;KAC3E,CAAC;AACH,EAAC,EACD,UAAC,IAAI,IAAK,iBAAC,CAAK,EAAE,aAA2B,EAAE,SAAwB;KACrE,EAAE,CAAC,CAAC,aAAM,CAAC,CAAC,CAAC,CAAC;SAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,aAAM,CAAC,IAAI,EAAE,CAAC;KACpD,IAAI;SAAC,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAG,IAAI,oBAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC;AACpE,EAAC,EAHS,CAGT,EACD,UAAC,IAAI,IAAK,iBAAC,CAAK,EAAE,aAA2B,EAAE,SAAwB;KACrE,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,IAAI,CAAE,aAAG;SACvC,IAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,CAAE,WAAC;aAClC,yCAA0B,CAAC,CAAC,CAAC;SAA7B,CAA6B,CAAE,CAAC,SAAS,CAAE,cAAM,uBAAgB,CAAC,cAAW,aAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAE,CAAC,EAArF,CAAqF,CAAE;SAC1I,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,EAAE,SAAS,CAAC;KACzC,CAAC,CAAC;AACJ,EAAC,EANS,CAMT,EACD,UAAC,IAAI,IAAK,iBAAC,CAAC,EAAE,IAAI,EAAE,MAAM;KACxB,MAAM,CAAC,WAAI,CAAE,cAAM,WAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAApB,CAAoB,CAAE;AAC3C,EAAC,EAFS,CAET,CAAC;;;;;;;;AC3CN,eAAwB,CAAwB,EAAE,gBAA4C;KAC5F,IAAI,CAAC;SACH,IAAM,CAAC,GAAG,CAAC,EAAE;SACb,EAAE,CAAC,CAAC,CAAC,YAAY,OAAO,CAAC;aAAC,MAAM,CAAC,CAAC;SAClC,IAAI;aAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;KAChC,CAAE;KAAA,KAAK,EAAC,GAAG,CAAC,CAAC,CAAC;SACZ,IAAM,IAAI,GAAG,OAAO,gBAAgB,KAAK,UAAU,GAAG,gBAAgB,CAAC,GAAG,CAAC,GAAG,gBAAgB,CAAC;SAC/F,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,MAAG,IAAI,IAAI,GAAG,CAAC,OAAO,CAAE,CAAC,CAAC;KAC5D,CAAC;AACH,EAAC;AATe,aAAI,OASnB;;;;;;;;;;;;;ACRD,wCAA0C,EAE1C,CAAC,CAFuD;AAExD;KAAkC,gCAAkC;KAClE;SACE,kBAAM,UAAC,CAAC,EAAC,CAAC,IAAK,QAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAZ,CAAY,CAAC;KAC9B,CAAC;KACH,mBAAC;AAAD,EAAC,CAJiC,uBAAU,GAI3C;AAJY,qBAAY,eAIxB;;;;;;;;;;;;;;;;;;;;;;ACPD,mCAA4D,EAC5D,CAAC,CADoE;AAErE,wCAAuC,EAEvC,CAAC,CAFkD;AAEnD;KAAA;KAGA,CAAC;KAAD,aAAC;AAAD,EAAC;AAHY,eAAM,SAGlB;AAED;KAAmC,iCAAM;KAAzC;SAAmC,8BAAM;KAGzC,CAAC;KAAD,oBAAC;AAAD,EAAC,CAHkC,MAAM,GAGxC;AAHY,sBAAa,gBAGzB;AAED,YAAY,eAAe;KACzB,mEAAW;KAAE,qEAAY;AAC3B,EAAC,EAFW,uBAAe,KAAf,uBAAe,QAE1B;AAFD,KAAY,eAAe,GAAf,uBAEX;AAED;KAAA;KAKA,CAAC;KAFC;SAAC,iBAAI,CAAC,EAAE,OAAO,EAAC,MAAM,EAAE,CAAC;;0CAAA;KAE3B,WAAC;AAAD,EAAC;AALY,aAAI,OAKhB;AAID;KAAA;KAMA,CAAC;KALC,sBAAI,kCAAS;cAAb;aACG,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,WAAW,CAAC;SACtD,CAAC;;;QAAA;KACD;SAAC,iBAAI,EAAE;;gDAAA;KAET,kBAAC;AAAD,EAAC;AANY,oBAAW,cAMvB;AAED;KAAA;KAMA,CAAC;KALC,sBAAI,mCAAS;cAAb;aACG,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,YAAY,CAAC;SACvD,CAAC;;;QAAA;KACD;SAAC,iBAAI,EAAE;;iDAAA;KAET,mBAAC;AAAD,EAAC;AANY,qBAAY,eAMxB;AAEY,0BAAiB,GAAG,oBAAY,CAAC;KAC5C,QAAC;aACC,GAAG,EAAC,eAAe,CAAC,eAAe,CAAC,WAAW,CAAC;aAChD,KAAK,EAAC,WAAW;UAClB,EAAE;aACD,GAAG,EAAC,eAAe,CAAC,eAAe,CAAC,YAAY,CAAC;aACjD,KAAK,EAAC,YAAY;UACnB,CAAC;AANF,EAME,EAAE,cAAc,CAAC;AAErB;KAAA;KAGA,CAAC;KAFC;SAAC,iBAAI,CAAC,EAAC,OAAO,EAAC,MAAM,EAAC,CAAC;;uDAAA;KAEzB,wBAAC;AAAD,EAAC;AAHY,0BAAiB,oBAG7B;;;;;;;;;;;;;;;;;ACtDD,yCAA+B,EAC/B,CAAC,CAD6C;AAC9C,mCAA4D,EAC5D,CAAC,CADoE;AACrE,oCAAqB,EACrB,CAAC,CAD8B;AAC/B,wCAAgD,EAEhD,CAAC,CAF2D;AAE5D,YAAY,oBAAoB;KAC9B,2FAAkB;KAAE,+FAAoB;KAAE,mFAAc;KAAE,mFAAc;AAC1E,EAAC,EAFW,4BAAoB,KAApB,4BAAoB,QAE/B;AAFD,KAAY,oBAAoB,GAApB,4BAEX;AAID;KAAA;KAUA,CAAC;KATC,sBAAI,0CAAS;cAAb;aACG,MAAM,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,cAAc,CAAC;SACnE,CAAC;;;QAAA;KAED;SAAC,iBAAI,EAAE;;wDAAA;KAEP;SAAC,iBAAI,EAAE;;6DAAA;KAGT,0BAAC;AAAD,EAAC;AAVY,4BAAmB,sBAU/B;AAED;KAAA;KAQA,CAAC;KAPC,sBAAI,0CAAS;cAAb;aACG,MAAM,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,cAAc,CAAC;SACnE,CAAC;;;QAAA;KACD;SAAC,iBAAI,EAAE;;wDAAA;KAEP;SAAC,iBAAI,EAAE;;6DAAA;KAET,0BAAC;AAAD,EAAC;AARY,4BAAmB,sBAQ/B;AAED;KAAA;KAMA,CAAC;KALC,sBAAI,2CAAS;cAAb;aACG,MAAM,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,oBAAoB,CAAC;SACzE,CAAC;;;QAAA;KACD;SAAC,iBAAI,EAAE;;8DAAA;KAET,2BAAC;AAAD,EAAC;AANY,6BAAoB,uBAMhC;AAED;KAAA;KAQA,CAAC;KAPC,sBAAI,yCAAS;cAAb;aACG,MAAM,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,kBAAkB,CAAC;SACvE,CAAC;;;QAAA;KACD;SAAC,iBAAI,EAAE;;uDAAA;KAEP;SAAC,iBAAI,EAAE;;4DAAA;KAET,yBAAC;AAAD,EAAC;AARY,2BAAkB,qBAQ9B;AAEY,+BAAsB,GAAG,oBAAY,CAAC,cAAM,QAAC;SACtD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,kBAAkB,CAAC;SACjE,KAAK,EAAC,kBAAkB;MACzB,EAAE;SACD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,oBAAoB,CAAC;SACnE,KAAK,EAAC,oBAAoB;MAC3B,EAAE;SACD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,cAAc,CAAC;SAC7D,KAAK,EAAC,mBAAmB;MAC1B,EAAE;SACD,GAAG,EAAC,oBAAoB,CAAC,oBAAoB,CAAC,cAAc,CAAC;SAC7D,KAAK,EAAC,mBAAmB;MAC1B,CAAC,EAZqD,CAYrD,EAAE,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;AChE1B,kCAAkC,CAClC,CAAC,CADuC;AACxC,mCAA4D,EAC5D,CAAC,CADoE;AACrE,oCAAoC,EACpC,CAAC,CAD6C;AAC9C,wCAAqG,EAErG,CAAC,CAFgH;AAEjH,YAAY,aAAa;KACvB,qDAAM;KAAE,uDAAO;KAAE,yDAAQ;AAC3B,EAAC,EAFW,qBAAa,KAAb,qBAAa,QAExB;AAFD,KAAY,aAAa,GAAb,qBAEX;AAED,YAAY,IAAI;KACd,qCAAO;KAAE,iCAAK;KAAE,mCAAM;KAAE,iCAAK;AAC/B,EAAC,EAFW,YAAI,KAAJ,YAAI,QAEf;AAFD,KAAY,IAAI,GAAJ,YAEX;AAED,YAAY,cAAc;KACxB,+DAAU;AACZ,EAAC,EAFW,sBAAc,KAAd,sBAAc,QAEzB;AAFD,KAAY,cAAc,GAAd,sBAEX;AAED,KAAM,YAAY,GAAG,4BAAe,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAS,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AAEvF;KAAA;KAKA,CAAC;KAJC;SAAC,oBAAO,CAAC,YAAY,CAAC;;uCAAA;KAIxB,WAAC;AAAD,EAAC;AALY,aAAI,OAKhB;AAED;KAAA;KAMA,CAAC;KALC;SAAC,iBAAI,EAAE;;yCAAA;KAGP;SAAC,oBAAO,EAAE;;uCAAA;KAEZ,WAAC;AAAD,EAAC;AANY,aAAI,OAMhB;AAGD;KAAA;KAGA,CAAC;KAFC;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,IAAI,EAAE,CAAC;;+CAAA;KAE5B,kBAAC;AAAD,EAAC;AAHY,oBAAW,cAGvB;AAED;KAAA;KAQA,CAAC;KAPC;SAAC,iBAAI,EAAE;;qDAAA;KAKP;SAAC,oBAAO,EAAE;;oDAAA;KAEZ,uBAAC;AAAD,EAAC;AARY,yBAAgB,mBAQ5B;AAED;KAAA;KAaA,CAAC;KAXC;SAAC,oBAAO,CAAC,sBAAS,CAAC,WAAW,CAAC;;8CAAA;KAG/B;SAAC,iBAAI,EAAE;;gDAAA;KAGP;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,IAAI,EAAE,CAAC;;+CAAA;KAG1B;SAAC,oBAAO,EAAE;;+CAAA;KAEZ,kBAAC;AAAD,EAAC;AAbY,oBAAW,cAavB;AAMD;KAAA;KAMA,CAAC;KALC;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,gBAAgB,EAAE,CAAC;;oEAAA;KAGtC;SAAC,oBAAO,EAAE;;sDAAA;KAEZ,wBAAC;AAAD,EAAC;AANY,0BAAiB,oBAM7B;AAED;KAAA;KAUA,CAAC;KAPC;SAAC,iBAAI,CAAC,EAAE,OAAO,EAAC,eAAM,EAAE,CAAC;;+CAAA;KAGzB;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,IAAI,EAAE,CAAC;;6CAAA;KAI5B,gBAAC;AAAD,EAAC;AAVY,kBAAS,YAUrB;AAED;KAAA;KAMA,CAAC;KALC;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,SAAS,EAAE,CAAC;;gEAAA;KAG/B;SAAC,oBAAO,EAAE;;wDAAA;KAEZ,sBAAC;AAAD,EAAC;AANY,wBAAe,kBAM3B;AAED,KAAM,gBAAgB,GAAG,qBAAQ,CAAC,gBAAgB,CAAC,CAAC,EAAE,GAAG,EAAC,sBAAsB,EAAE,KAAK,EAAC,iBAAiB,EAAE,EAAE,EAAE,GAAG,EAAC,oBAAoB,EAAE,KAAK,EAAC,eAAe,EAAE,CAAC,CAAC;AAElK;KAAA;KAeA,CAAC;KAZC;SAAC,oBAAO,EAAE;;yDAAA;KAGV;SAAC,oBAAO,CAAC,gBAAgB,CAAC;;uDAAA;KAS5B,qBAAC;AAAD,EAAC;AAfY,uBAAc,iBAe1B;AAED;KAAA;KAsBA,CAAC;KApBC;SAAC,oBAAO,EAAE;;0DAAA;KAEV;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,IAAI,EAAE,CAAC;;mDAAA;KAG1B;SAAC,iBAAI,CAAC,EAAE,OAAO,EAAC,eAAM,EAAE,CAAC;;yDAAA;KAEzB;SAAC,iBAAI,EAAE;;2DAAA;KAMP;SAAC,iBAAI,CAAC,EAAC,OAAO,EAAC,eAAM,EAAC,CAAC;;qDAAA;KAGvB;SAAC,iBAAI,CAAC,EAAC,QAAQ,EAAC,WAAW,EAAC,CAAC;;yDAAA;KAI/B,sBAAC;AAAD,EAAC;AAtBY,wBAAe,kBAsB3B;AAED;KAAA;KACA,CAAC;KAAD,iBAAC;AAAD,EAAC;AADY,mBAAU,aACtB;AAEY,yBAAgB,GAAG,IAAI,qBAAQ,CAAE,YAAE,IAAI,oBAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAvB,CAAuB,CAAE;AAE7E;KAAgC,8BAAU;KAA1C;SAAgC,8BAAU;KAM1C,CAAC;KALC;SAAC,iBAAI,EAAE;;+CAAA;KAGP;SAAC,oBAAO,CAAC,4BAAe,CAAC,QAAQ,CAAC,4BAAe,CAAC,UAAU,CAAC,CAAC;;+CAAA;KAEhE,iBAAC;AAAD,EAAC,CAN+B,UAAU,GAMzC;AANY,mBAAU,aAMtB;AAED;KAAA;KAUA,CAAC;KALC;SAAC,iBAAI,CAAC,EAAC,OAAO,EAAC,eAAM,EAAC,CAAC;;0DAAA;KAGvB;SAAC,oBAAO,CAAC,wBAAgB,CAAC;;yDAAA;KAE5B,uBAAC;AAAD,EAAC;AAVY,yBAAgB,mBAU5B;AAEY,wBAAe,GAAG,oBAAY,CAAC,cAAM,QAAC;SAC/C,GAAG,EAAC,aAAa,CAAC,aAAa,CAAC,MAAM,CAAC;SACvC,KAAK,EAAC,eAAe;MACtB,EAAE;SACD,GAAG,EAAC,aAAa,CAAC,aAAa,CAAC,OAAO,CAAC;SACxC,KAAK,EAAC,gBAAgB;MACvB,EAAE;SACD,GAAG,EAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,CAAC;SACzC,KAAK,EAAC,cAAc;MACrB,CAAC,EAT8C,CAS9C,EAAE,mBAAmB,CAAC;AAE1B,KAAc,SAAS,CActB;AAdD,YAAc,SAAS,EAAC,CAAC;KACvB,cAAwB,CAAY,EAClC,eAAyC,EACzC,cAAuC,EACvC,gBAA2C;SACzC,EAAE,CAAC,CAAC,CAAC,YAAY,eAAe,CAAC;aAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC;SAC3D,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,cAAc,CAAC;aAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;SAC9D,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,gBAAgB,CAAC;aAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;SAClE,IAAI,CAAC,CAAC;aACJ,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;aACrC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;aACd,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC;SAC5C,CAAC;KACL,CAAC;KAZe,cAAI,OAYnB;AACH,EAAC,EAda,SAAS,GAAT,iBAAS,KAAT,iBAAS,QActB;;;;;;;;;;;;;;;;;AC9LD,kCAA8F,EAC9F,CAAC,CADqG;AACtG,wCAAgD,EAChD,CAAC,CAD2D;AAC5D,mCAAsD,EACtD,CAAC,CAD8D;AAC/D,oCAAqB,EAErB,CAAC,CAF8B;AAE/B,YAAY,iBAAiB;KAC3B,uEAAW;KAAE,qEAAU;KAAE,uEAAW;AACtC,EAAC,EAFW,yBAAiB,KAAjB,yBAAiB,QAE5B;AAFD,KAAY,iBAAiB,GAAjB,yBAEX;AAID;KAAA;KAWA,CAAC;KAVC,sBAAI,iCAAS;cAAb;aACG,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,UAAU,CAAC;SACzD,CAAC;;;QAAA;KAED;SAAC,iBAAI,CAAC,sBAAe,CAAC;;6CAAA;KAEtB;SAAC,iBAAI,EAAE;;+CAAA;KAEP;SAAC,oBAAO,EAAE;;6CAAA;KAEZ,iBAAC;AAAD,EAAC;AAXY,mBAAU,aAWtB;AAED;KAAA;KAMA,CAAC;KALC,sBAAI,kCAAS;cAAb;aACG,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC;SAC1D,CAAC;;;QAAA;KACD;SAAC,oBAAO,CAAC,sBAAe,CAAC;;8CAAA;KAE3B,kBAAC;AAAD,EAAC;AANY,oBAAW,cAMvB;AAED;KAAA;KAQA,CAAC;KAPC,sBAAI,kCAAS;cAAb;aACG,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC;SAC1D,CAAC;;;QAAA;KACD;SAAC,iBAAI,CAAC,sBAAe,CAAC;;8CAAA;KAEtB;SAAC,oBAAO,CAAC,uBAAgB,CAAC;;oDAAA;KAE5B,kBAAC;AAAD,EAAC;AARY,oBAAW,cAQvB;AAEY,4BAAmB,GAAG,oBAAY,CAAC;KAC9C,QAAC;aACC,GAAG,EAAC,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC;aACpD,KAAK,EAAC,WAAW;UAClB,EAAE;aACD,GAAG,EAAC,iBAAiB,CAAC,iBAAiB,CAAC,UAAU,CAAC;aACnD,KAAK,EAAC,UAAU;UACjB,EAAE;aACD,GAAG,EAAC,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC;aACpD,KAAK,EAAC,WAAW;UAClB,CAAC;AATF,EASE,EAAE,YAAY,CAAC;;;;;;;;AClDnB;KAAA;KAGA,CAAC;KAAD,cAAC;AAAD,EAAC;AAHY,gBAAO,UAGnB;;;;;;;;;;;;;;;;;ACLD,kCAAoC,CACpC,CAAC,CADyC;AAC1C,kCAAyC,EACzC,CAAC,CADgD;AACjD,wCAAiD,EACjD,CAAC,CAD8D;AAC/D,yCAAuD,EACvD,CAAC,CADqE;AACtE,+CAAuD,EACvD,CAAC,CAD2E;AAC5E,oCAAqD,EACrD,CAAC,CAD8D;AAC/D,wCAA8E,EAC9E,CAAC,CADyF;AAM1F;;;;;;;;;;;;;;;;;;;;;;;GAuBE;AAEW,4BAAmB,GAAG,qBAAQ,CAAC,MAAM,CAChD,UAAC,GAAoB;KACnB,IAAM,MAAM,GAAG,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK,CAAC,IAAI;KAC1C,EAAE,CAAC,CAAC,0BAAiB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC;KAC/E,IAAI,CAAC,EAAE,CAAC,CAAC,gCAAmB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;KACpF,IAAI,CAAC,EAAE,CAAC,CAAC,0CAAsB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC;KAC9F,MAAM,CAAC,aAAM,CAAC,IAAI,EAAsB,CAAC;AAC3C,EAAC,CAAC;AAEJ;KAAA;KAMA,CAAC;KALC;SAAC,oBAAO,CAAC,0BAAiB,CAAC;;uDAAA;KAG3B;SAAC,oBAAO,CAAC,EAAE,OAAO,EAAC,eAAM,EAAE,EAAE,EAAE,QAAQ,EAAC,OAAO,EAAE,CAAC;;yDAAA;KAEpD,0BAAC;AAAD,EAAC;AANY,4BAAmB,sBAM/B;AAED;KAAA;KAMA,CAAC;KALC;SAAC,oBAAO,CAAC,gCAAmB,CAAC;;qDAAA;KAG7B;SAAC,oBAAO,CAAC,sBAAe,EAAE,EAAC,QAAQ,EAAC,OAAO,EAAC,CAAC;;oDAAA;KAE/C,wBAAC;AAAD,EAAC;AANY,0BAAiB,oBAM7B;AAED;KAAA;KAMA,CAAC;KALC;SAAC,oBAAO,CAAC,0CAAsB,CAAC;;4DAAA;KAGhC;SAAC,oBAAO,CAAC,8BAAgB,EAAE,EAAC,QAAQ,EAAC,OAAO,EAAC,CAAC;;kEAAA;KAEhD,+BAAC;AAAD,EAAC;AANY,iCAAwB,2BAMpC;;;;;;;;ACnED,kCAAsC,EAEtC,CAAC,CAF6C;AAmC9C,eAAqB,CAAW;KAC5B,MAAM,CAAC;SACL,MAAM,EAAE,CAAC,CAAC,MAAM;SAChB,IAAI,EAAE,WAAI,CAAC,CAAC,CAAC,IAAI,CAAC;MACnB;AACH,EAAC;AALa,aAAI,OAKjB;;;;;;;;ACzCH,kCAA6B,CAE7B,CAAC,CAFkC;AAEnC,KAAc,IAAI,CA0BjB;AA1BD,YAAc,IAAI,EAAC,CAAC;KAEnB,uBAA0B,IAAW;SAChC,MAAM,CAAC,UAAC,GAAG,EAAE,IAAI;aACf,IAAM,GAAG,GAAG,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS;aACpF,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE;iBACvB,MAAM,EAAC,IAAI;iBACX,IAAI,EAAC,GAAG;cACT,CAAC;SACJ,CAAC;KACH,CAAC;KAED,cAAwB,GAAU,EAAE,IAAO;SACzC,MAAM,CAAC,aAAa,CAAI,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC;KAC5C,CAAC;KAFe,SAAI,OAEnB;KAED,aAAuB,GAAU,EAAE,IAAO;SACxC,MAAM,CAAC,aAAa,CAAI,KAAK,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC;KAC3C,CAAC;KAFe,QAAG,MAElB;KAED,gBAAuB,GAAU;SAC/B,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE;aACvB,MAAM,EAAC,QAAQ;UAChB,CAAC;KACJ,CAAC;KAJe,WAAM,SAIrB;AAEL,EAAC,EA1Ba,IAAI,GAAJ,YAAI,KAAJ,YAAI,QA0BjB;AAED,8BAAoC,GAAU,EAAE,QAA4B;KAC1E,EAAE,CAAC,CAAC,aAAM,CAAC,GAAG,CAAC,CAAC;SAAC,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC;KACrE,EAAE,CAAC,CAAC,aAAM,CAAC,SAAS,CAAC,CAAC;SAAC,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC;KAEzG,IAAM,OAAO,GAAG,IAAI,EAAE,CAAC,OAAO,EAAgB,CAAC;KAC/C,IAAM,MAAM,GAAG,CAAC,aAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC;KAErF,mBAAmB,CAAO;SACxB,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;SACrC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;KAChB,CAAC;KAED,MAAM,CAAC,OAAO,GAAG,SAAS;KAC1B,MAAM,CAAC,OAAO,GAAG,SAAS;KAC1B,MAAM,CAAC,MAAM,GAAG,SAAS;KACzB,MAAM,CAAC,SAAS,GAAG,WAAC;SAClB,SAAS,CAAC,CAAC,CAAC;SACZ,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;KACnB,CAAC;KAED,MAAM,CAAC,OAAO,CAAC;AACjB,EAAC;AArBe,4BAAmB,sBAqBlC;AAED,+BAA8B,GAAU,EAAE,QAA4B;KACpE,IAAM,OAAO,GAAG,IAAI,EAAE,CAAC,OAAO,EAAgB;KAC9C,IAAM,MAAM,GAAG,QAAQ,KAAK,SAAS,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC;KAE1F,mBAAmB,CAAO;SACxB,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;SACrC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;KAChB,CAAC;KAED,MAAM,CAAC,OAAO,GAAG,UAAC,CAAC;SACjB,SAAS,CAAC,CAAC,CAAC;SACZ,OAAO,CAAC,WAAW,EAAE;KACvB,CAAC;KAED,MAAM,CAAC,OAAO,GAAG,UAAC,CAAC;SACjB,SAAS,CAAC,CAAC,CAAC;SACZ,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;KACpB,CAAC;KAED,MAAM,CAAC,MAAM,GAAG,SAAS;KAEzB,MAAM,CAAC,SAAS,GAAG,WAAC;SAClB,SAAS,CAAC,CAAC,CAAC;SACZ,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;KACnB,CAAC;KAED,MAAM,CAAC,OAAO,CAAC;AACjB,EAAC;AAED,oBAA+B,GAAoB,EAAE,EAAqB;KACxE,MAAM,CAAC,GAAG,CAAC,OAAO,CAAE,WAAC;SACnB,SAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CACV,cAAM,SAAE,CAAC,UAAU,CAAC,KAAK,EAAK,EAAxB,CAAwB,EAC9B,UAAC,CAAC,IAAK,SAAE,CAAC,UAAU,CAAC,IAAI,CAAI,CAAC,CAAC,EAAxB,CAAwB,CAC9B;KAHD,CAGC,CACF;AACH,EAAC;AAPe,kBAAS,YAOxB;AAED;;GAEE;AACF,uBAAkC,MAAQ,EAAE,MAAQ;KAClD,EAAE,CAAC,CAAC,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;SAC5C,MAAM,IAAI,SAAS,CAAC,4CAA4C,CAAC,CAAC;KACpE,CAAC;KAED,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;KAC9B,EAAE,CAAC,CAAC,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;SAC5C,GAAG,CAAC,CAAC,IAAM,OAAO,IAAI,MAAM,CAAC,CAAC,CAAC;aAC7B,EAAE,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;iBACnC,MAAM,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;aACpC,CAAC;SACH,CAAC;KACH,CAAC;KACD,MAAM,CAAC,MAAM,CAAC;AAChB,EAAC;AAde,qBAAY,eAc3B;AAED,eAA0B,CAAG,EAAE,CAAG;KAChC,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC9C,EAAC;AAFe,aAAI,OAEnB;;;;;;;;AChHD,kCAAkC,EAElC,CAAC,CAFyC;AAE1C,KAAY,IAAI,uBAAM,EACtB,CAAC,CAD6B;AAC9B,kCAA4B,CAC5B,CAAC,CADiC;AAClC,gDAGiF,EAEjF,CAAC,CAFoG;AAErG,wCAAiC,EAEjC,CAAC,CAF4C;AAE7C,mBAAkB,EAAoC;KACpD,IAAM,UAAU,GAAqB,EAAE;KACvC,IAAM,YAAY,GAAG,UAAC,EAAa;SACjC,EAAE,CAAC,CAAC,EAAE,YAAY,oCAAe,CAAC,CAAC,CAAC;aAClC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;SAC1B,CAAC;SAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,YAAY,mCAAc,CAAC,CAAC,CAAC;aACxC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;SAC1B,CAAC;KACH,CAAC;KACD,EAAE,CAAC,SAAS,CAAC,YAAE,IAAI,mBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,EAArB,CAAqB,CAAC,CAAC;KAC1C,MAAM,CAAC,UAAC,CAAC,IAAK,oBAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAA5B,CAA4B;AAC5C,EAAC;AAED,0BAAyB,EAA2C;KAClE,IAAM,OAAO,GAA4B,EAAE;KAC3C,EAAE,CAAC,SAAS,CAAC,YAAE;SACb,IAAM,SAAS,GAAG,EAAE,CAAC,WAAW,CAAC;SACjC,EAAE,CAAC,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,KAAK,yCAAoB,CAAC,IAAI,CAAC,CAAC,CAAC;aACtD,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC;SACtC,CAAC;SAAC,IAAI,CAAC,CAAC;aACN,OAAO,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACjC,CAAC;KACH,CAAC,CAAC,CAAC;KACH,MAAM,CAAC,UAAC,CAAC,IAAK,oBAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAzB,CAAyB;AACzC,EAAC;AAED,8BAA6B,CAAK;KAChC,EAAE,CAAC,CAAC,CAAC,YAAY,sCAAiB,CAAC;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,CAAC,CAAC;KACzD,IAAI;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,EAAqB,CAAC;AAC/C,EAAC;AAED,qCAAoC,CAAK;KACvC,EAAE,CAAC,CAAC,CAAC,YAAY,6CAAwB,CAAC;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,CAAC,CAAC;KAChE,IAAI;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,EAA4B,CAAC;AACtD,EAAC;AAED,gCAA+B,CAAK;KAClC,EAAE,CAAC,CAAC,CAAC,YAAY,wCAAmB,CAAC;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,CAAC,CAAC,CAAC;KAC3D,IAAI;SAAC,MAAM,CAAC,aAAM,CAAC,IAAI,EAAuB,CAAC;AACjD,EAAC;AAED;KASC,uBAAmB,MAAoB;SAApB,WAAM,GAAN,MAAM,CAAc;SACrC,IAAM,SAAS,GAAqF,0BAAmB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,KAAmB;aACnK,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI;aACvB,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;iBAC7B,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;iBAC5B,MAAM,CAAC,wBAAW,CAAC,wCAAmB,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAC1D,UAAC,CAAC,IAAK,cAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAlB,CAAkB,EACzB,aAAG;qBACD,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC;qBAC/C,OAAO,CAAC,GAAG,CAAC,WAAS,GAAK,CAAC;qBAC3B,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC;yBAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;qBAC5C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;qBACjB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,oCAAkC,IAAI,kBAAa,GAAK,CAAC;iBACjF,CAAC,CACF;aACH,CAAC;aAAC,IAAI,CAAC,CAAC;iBACN,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;iBACpB,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;iBAC1B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;iBACjB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,kBAAkB,CAAC;aAC3C,CAAC;SACH,CAAC,CAAC;SAEF,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,mBAAmB,CAAC;SAClE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,0BAA0B,CAAC;SAChF,IAAI,CAAC,cAAc,GAAI,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,qBAAqB,CAAC;SACvE,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAE,YAAE,IAAI,SAAE,CAAC,KAAK,EAAR,CAAQ,CAAE;SAEhD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC5C,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;KACpE,CAAC;KAEA,yCAAiB,GAAjB,UAAkB,OAAe,EAAE,IAAqB,EAAE,YAA4C;SACpG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAoB,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE;aACtE,OAAO,EAAE,OAAO;aAChB,IAAI,EAAE,IAAI;aACV,QAAQ,EAAE,YAAY;UACvB,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,yBAAK,CAAC,qCAAgB,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAArC,CAAqC,CAAC;KACrD,CAAC;KAED,uCAAe,GAAf,UAAgB,QAAc;SAC5B,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,YAAE;aAChC,QAAC,EAAE,CAAC,IAAI,YAAa,oCAAe,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;iBAClE,CAAC,EAAE,CAAC,IAAI,YAAY,mCAAc,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;SADhE,CACgE,CACjE;KACH,CAAC;KAED,gCAAQ,GAAR,UAAS,QAAc,EAAE,KAAW;SAClC,wBAAwB,EAAa;aACnC,EAAE,CAAC,CAAC,EAAE,YAAY,oCAAe,CAAC,CAAC,CAAC;iBAClC,MAAM,CAAC,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,YAAE,IAAI,SAAE,CAAC,IAAI,EAAP,CAAO,CAAC;aAC1C,CAAC;aAAC,IAAI,CAAC,CAAC;iBACN,MAAM,CAAC,aAAM,CAAC,IAAI,EAAQ,CAAC;aAC7B,CAAC;SACH,CAAC;SACD,IAAM,IAAI,GAAG,0BAAK,CAAC,IAAI,CAAC,KAAK,CAAC;SAC9B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,YAAE;aACvC,IAAM,GAAG,GAAiB,cAAc,CAAC,EAAE,CAAC;aAE5C,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,aAAG;iBAChB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAa,GAAG,EAAE;qBACrC,QAAQ,EAAE,IAAI,CAAC,MAAM;qBACrB,IAAI,EAAE,IAAI,CAAC,IAAI;kBAChB,CAAC,CAAC,IAAI,CAAC,cAAI;qBACV,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAE,YAAE;yBACzB,MAAM,CAAC,wBAAW,CAAC,oCAAe,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC;qBACpD,CAAC,CAAC;iBACJ,CAAC,CAAC;aACJ,CAAC,CAAC;SACJ,CAAC,CAAC;KACJ,CAAC;KAED,yCAAiB,GAAjB,UAAkB,QAAc;SAC9B,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,YAAE;aAC9C,SAAE,CAAC,MAAM,CAAC,GAAG,CAAC,aAAG;iBACf,WAAI,CAAC,IAAI,CAAC,IAAI,CAAO,GAAG,CAAC,CAAC,IAAI,CAAC,cAAI;qBACjC,WAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAE,YAAE,IAAG,yBAAK,CAAC,qCAAgB,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,EAAtC,CAAsC,CAAE;iBAA/D,CAA+D,CAChE;aAFD,CAEC,CACF;SAJD,CAIC,CACF;KACH,CAAC;KAED,0CAAkB,GAAlB,UAAmB,QAAc;SAC/B,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,YAAE;aAC9C,SAAE,CAAC,OAAO,CAAC,GAAG,CAAC,aAAG;iBAChB,WAAI,CAAC,IAAI,CAAC,IAAI,CAAO,GAAG,CAAC,CAAC,IAAI,CAAC,cAAI;qBACjC,WAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAE,YAAE;yBAClB,yBAAK,CAAC,qCAAgB,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC;qBAAtC,CAAsC,CACvC;iBAFD,CAEC,CACF;aAJD,CAIC,CACF;SAND,CAMC,CACF;KACH,CAAC;KAEH,oBAAC;AAAD,EAAC;AAvGY,sBAAa,gBAuGzB;;;;;;;;AC3JD;KAIE,2BAAoB,MAA+E,EAAE,YAAc;SAA/F,WAAM,GAAN,MAAM,CAAyE;SAF3F,mBAAc,GAAE,IAAI,EAAE,CAAC,aAAa,EAAK;SAG/C,IAAI,CAAC,YAAY,GAAG,YAAY;KAClC,CAAC;KAED,oCAAQ,GAAR,UAAS,OAAS;SAAlB,iBAMC;SALC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,UAAC,GAAG,IAAK,YAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAE,CAAC,IAAI,CAAE,kBAAQ;aAClG,KAAI,CAAC,YAAY,GAAG,QAAQ;aAC5B,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC;aACpC,MAAM,CAAC,QAAQ;SACjB,CAAC,CAAC;KACJ,CAAC;KAED,mCAAO,GAAP;SACE,MAAM,CAAC,IAAI,CAAC,cAAc;KAC5B,CAAC;KACH,wBAAC;AAAD,EAAC;AAnBD;oCAmBC;;;;;;;;AClBD,8CAAuB,CAEvB,CAAC,CAFwC;AA6CzC,qCAA2C,KAAY,EAAE,eAAuC;KAC9F,MAAM,CAAC;SACL,KAAK,EAAC,KAAK;SACX,kBAAkB,EAAE;aAClB,eAAe,CAAC,IAAI,2BAAQ,CAAC,gBAAgB,EAAE,CAAC;SAClD,CAAC;SACD,cAAc,EAAE,UAAC,IAAY,EAAE,QAAe;aAC5C,eAAe,CAAC,IAAI,2BAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;SAC5D,CAAC;SACD,aAAa,EAAE,UAAC,IAAY,EAAE,QAAe;aAC3C,eAAe,CAAC,IAAI,2BAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;SAC3D,CAAC;SACD,iBAAiB,EAAE,UAAC,MAAc,EAAE,QAAiB;aACnD,eAAe,CAAC,IAAI,2BAAQ,CAAC,0BAA0B,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;SAClF,CAAC;SACD,mBAAmB,EAAC,UAAC,GAAoB;aACvC,eAAe,CAAC,IAAI,2BAAQ,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAC3D,CAAC;SACD,oBAAoB,EAAC,UAAC,GAAoB;aACxC,eAAe,CAAC,IAAI,2BAAQ,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAC5D,CAAC;SACD,cAAc,EAAC,UAAC,EAAO;aACrB,eAAe,CAAC,IAAI,2BAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;SAClD,CAAC;SACD,UAAU,EAAC,UAAC,CAAM;aAChB,eAAe,CAAC,IAAI,2BAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SAC3C,CAAC;SACD,YAAY,EAAC,UAAC,IAAS,EAAE,OAAe;aACtC,eAAe,CAAC,IAAI,2BAAQ,CAAC,gBAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SAC/D,CAAC;MACF;AAEH,EAAC;AAhCe,mCAA0B,6BAgCzC;;;;;;;;;;;;;AC9ED,kCAAqB,CACrB,CAAC,CAD0B;AAE3B,KAAY,KAAK,uBAAM,EACvB,CAAC,CAD0C;AAE3C,wCAAuB,EACvB,CAAC,CADoC;AACrC,mCAAwC,EACxC,CAAC,CADgD;AACjD,uCAAwB,EACxB,CAAC,CADoC;AACrC,wCAAyB,EACzB,CAAC,CADsC;AACvC,wCAAgC,EAChC,CAAC,CAD6C;AAC9C,yCAA0B,EAC1B,CAAC,CADwC;AACzC,qCAAqC,EAErC,CAAC,CAF+C;AAEhD;KAA+B,oCAA+C;KAC5E;SACE,iBAAO;KACT,CAAC;KACD,iCAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,MAAM,CAAC,CACL,qBAAC,KAAK,IAAC,IAAI,EAAC,QAAQ,EAClB,OAAO,EAAK,WAAC,IAAI,YAAK,CAAC,kBAAkB,EAAE,EAA1B,CAA4B,EAC7C,KAAK,EAAC,oBAAoB,EAAS,CACtC;KACH,CAAC;KACH,uBAAC;AAAD,EAAC,CAZ8B,KAAK,CAAC,SAAS,GAY7C;AAMD;KAA+B,6BAA+C;KAA9E;SAA+B,8BAA+C;KA6B9E,CAAC;KA5BC,0BAAM,GAAN;SACE,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI;SAC1B,IAAI,OAAO,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,EAAE,EAAE,GAAG;aACjC,4BAAC,GAAG,IAAC,GAAG,EAAE,GAAI,GACZ,oBAAC,YAAI,GAAC,IAAI,EAAE,EAAE,CAAC,IAAK,EAAG,EACvB,qBAAC,IAAI,SAAE,EAAE,CAAC,MAAM,CAAC,IAAK,CAAO,CACzB;SAHN,CAGM,CACP;SACD,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,GAAG;aACjD,4BAAC,GAAG,IAAC,GAAG,EAAE,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC,MAAO,GAC9B,oBAAC,iBAAS,OAAG,EACb,qBAAC,IAAI,SAAE,CAAC,CAAC,IAAK,CAAO,CACjB;SAHN,CAGM,CACP,CAAC;SACF,OAAO,CAAC,IAAI,CACV,qBAAC,GAAG,IAAC,GAAG,EAAE,EAAE,CAAC,WAAW,CAAC,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,CAAE,GACpD,oBAAC,YAAI,GAAC,IAAI,EAAE,EAAE,CAAC,YAAa,EAAC,OAAO,EAAE,CAAC,oBAAU,CAAC,QAAQ,CAAE,EAAG,EAC/D,oBAAC,gBAAQ,GAAC,OAAO,EAAE,CAAC,oBAAU,CAAC,QAAQ,CAAE,EAAE,EAC3C,qBAAC,IAAI,SAAE,EAAE,CAAC,eAAgB,CAAO,CAC7B,CACP,CAAC;SAEF,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,KAAM,GAC9B,OAAQ,CACL,CACP;KACH,CAAC;KACH,gBAAC;AAAD,EAAC,CA7B8B,KAAK,CAAC,SAAS,GA6B7C;AA7BY,kBAAS,YA6BrB;AAMD,gCAA+B,KAAkB;KAC/C,IAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC,MAAM,GAAG,CAAC;KACpE,MAAM,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,gBAAgB,CAAC;AACzF,EAAC;AAED;KAAiC,+BAAiD;KAAlF;SAAiC,8BAAiD;KAkBlF,CAAC;KAjBC,4BAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI;SAC9B,IAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW;SAC1C,IAAM,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,YAAE;aAC9B,SAAE,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,GAAG,IAAK,4BAAC,GAAG,IAAC,GAAG,EAAE,GAAI,GAAC,oBAAC,YAAI,GAAC,IAAI,EAAE,IAAK,EAAC,OAAO,EAAG,cAAM,YAAK,CAAC,UAAU,CAAC,IAAI,CAAC,EAAtB,CAAwB,EAAG,CAAM,EAAlF,CAAkF,CAAC;SAA/G,CAA+G,CAChH,CAAC,SAAS,CAAC,cAAM,QAAC,qBAAC,IAAI,IAAC,GAAG,EAAC,GAAG,yBAA2B,CAAC,EAA1C,CAA0C,CAAC;SAE7D,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,KAAM,GAC9B,KAAM,EACP,qBAAC,GAAG,SACF,oBAAC,gBAAQ,GAAC,OAAO,EAAG,cAAM,YAAK,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,EAAhC,CAAkC,EAAG,CAC3D,CACF,CACP;KACH,CAAC;KACH,kBAAC;AAAD,EAAC,CAlBgC,KAAK,CAAC,SAAS,GAkB/C;AAlBY,oBAAW,cAkBvB;AAED;KAAmB,wBAAiD;KAApE;SAAmB,8BAAiD;KAoBpE,CAAC;KAnBC,qBAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,EAAE,GAAG,KAAK,CAAC,IAAI;SACrB,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,EAC5B,UAAC,EAAyB;aACxB,4BAAC,OAAO,SACN,oBAAC,SAAS,GAAC,IAAI,EAAE,EAAG,EAAG,EACvB,oBAAC,WAAW,GAAC,IAAI,EAAE,EAAG,EAAC,YAAY,EAAE,KAAK,CAAC,YAAa,EAAC,UAAU,EAAE,KAAK,CAAC,UAAW,EAAE,CAChF;SAHV,CAGU,EACZ,UAAC,EAAwB;aACvB,4BAAC,OAAO,SACN,oBAAC,uBAAU,GAAC,IAAI,EAAE,EAAG,EAAG,CAChB;SAFV,CAEU,EACZ,UAAC,EAA0B;aACzB,4BAAC,OAAO,SACN,qBAAC,EAAE,4BAAsB,CACjB;SAFV,CAEU,CACb;KACH,CAAC;KACH,WAAC;AAAD,EAAC,CApBkB,KAAK,CAAC,SAAS,GAoBjC;AASD;KAAuB,4BAAoC;KAA3D;SAAuB,8BAAoC;KAc3D,CAAC;KAbC,yBAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,KAAK,GAAG,KAAK,CAAC,KAAK;SACzB,IAAM,IAAI,GAAG,CAAC,CAAC,oBAAU,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAE,aAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;SAClG,MAAM,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC;aACtB,qBAAC,QAAQ,QAAG;aACZ,qBAAC,GAAG,IAAC,SAAS,EAAE,IAAK,GAClB,KAAK,CAAC,GAAG,CAAE,UAAC,EAAE,EAAE,GAAG;iBAClB,IAAM,iBAAiB,GAAG,KAAK,CAAC,OAAO,KAAK,EAAE,GAAG,oBAAU,CAAC,QAAQ,GAAG,EAAE;iBACzE,MAAM,CAAC,qBAAC,IAAI,IAAC,SAAS,EAAE,iBAAkB,EAAC,OAAO,EAAG,YAAE,IAAI,YAAK,CAAC,cAAc,CAAC,EAAE,CAAC,EAAxB,CAA0B,EAAC,GAAG,EAAE,EAAG,GAAE,GAAI,CAAO;aAC7G,CAAC,CAAE,CACC,CAAC;KACX,CAAC;KACH,eAAC;AAAD,EAAC,CAdsB,KAAK,CAAC,SAAS,GAcrC;AAED;KAA2B,yBAAiC;KAA5D;SAA2B,8BAAiC;KA0C5D,CAAC;KAzCC,sBAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;SAE/B,IAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,YAAE;aAC1C,4BAAC,OAAO,SACN,oBAAC,IAAI,GAAC,IAAI,EAAE,EAAG,EAAC,YAAY,EAAE,KAAK,CAAC,YAAa,EAAC,UAAU,EAAE,KAAK,CAAC,UAAW,EAAG,EAClF,oBAAC,QAAQ,GAAC,OAAO,EAAE,EAAE,CAAC,IAAK,EAAC,KAAK,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAE,EAAC,cAAc,EAAE,KAAK,CAAC,cAAe,EAAG,EAC3G,oBAAC,QAAQ,GAAC,OAAO,EAAE,EAAE,CAAC,IAAK,EAAC,KAAK,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAE,EAAC,cAAc,EAAE,KAAK,CAAC,cAAe,EAAG,CACrG;SAJV,CAIU,CACX,CAAC,SAAS,CAAC,cAAM,4BAAC,QAAQ,QAAG,EAAZ,CAAY,CAAE;SAEhC,IAAM,gBAAgB,GAAG,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,CAAC,eAAe;aACxE,KAAK,CAAC,WAAW,CAAC,GAAG,CAAE,YAAE;iBACvB,YAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,EACrB,UAAC,EAAE,IAAK,2BAAC,8BAAiB,GAAC,KAAK,EAAE,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,YAAE,IAAI,SAAE,CAAC,KAAK,CAAC,KAAK,EAAd,CAAc,CAAC,CAAC,SAAS,CAAE,cAAM,SAAE,EAAF,CAAE,CAAG,EAAC,OAAO,EAAG,cAAM,YAAK,CAAC,YAAY,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,EAAlC,CAAoC,EAAG,EAAjJ,CAAiJ,EACzJ,UAAC,EAAE,IAAK,4BAAC,QAAQ,QAAG,EAAZ,CAAY,EACpB,UAAC,EAAE,IAAK,4BAAC,QAAQ,QAAG,EAAZ,CAAY,CAAE;aAHxB,CAGwB,CACzB,CAAC,SAAS,CAAE,cAAM,4BAAC,QAAQ,QAAG,EAAZ,CAAY,CAAE,GAAG,qBAAC,QAAQ,QAAG;SAElD,IAAM,sBAAsB,GAAG,qBAAqB,CAAC,KAAK,CAAC,GAAG,oBAAC,gBAAgB,GAAC,kBAAkB,EAAE,KAAK,CAAC,kBAAmB,EAAG,GAAG,qBAAC,QAAQ,QAAG;SAC/I,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,YAAE,IAAI,QAC5B,qBAAC,GAAG,SACD,gBAAiB,EAClB,oBAAC,uBAAa,qBAAK,EAAE,EAAI,EACzB,oBAAC,iBAAO,GAAC,OAAO,EAAE,KAAK,CAAC,OAAQ,EAC9B,eAAe,EAAG,KAAK,CAAC,0BAA4B,EACpD,iBAAiB,EAAG,KAAK,CAAC,iBAAmB,EAAG,EACjD,sBAAuB,EACvB,WAAY,EACb,oBAAC,qBAAS,GAAC,MAAM,EAAE,KAAK,CAAC,SAAU,EACjC,mBAAmB,EAAG,KAAK,CAAC,mBAAqB,EACjD,oBAAoB,EAAG,KAAK,CAAC,oBAAsB,EACnD,cAAc,EAAG,KAAK,CAAC,cAAgB,EAAG,CACxC,CACP,EAd6B,CAc7B,CAAC,CAAC,SAAS,CAAC,cAAM,QACjB,oBAAC,yBAAW,GAAC,cAAc,EAAG,KAAK,CAAC,cAAgB,EAAC,aAAa,EAAG,KAAK,CAAC,aAAe,EAAE,CAC7F,EAFkB,CAElB,CAAC;KAEJ,CAAC;KAEH,YAAC;AAAD,EAAC,CA1C0B,KAAK,CAAC,SAAS,GA0CzC;AA1CY,cAAK,QA0CjB;;;;;;;;ACjLD;mBAAgB;KACd,IAAI,EAAE,MAAM;KACZ,SAAS,EAAE,YAAY;KACvB,QAAQ,EAAE,WAAW;KACrB,QAAQ,EAAE,WAAW;KACrB,KAAK,EAAE,OAAO;KACd,aAAa,EAAE,gBAAgB;KAC/B,OAAO,EAAE,SAAS;KAClB,YAAY,EAAE,eAAe;KAC7B,QAAQ,EAAE,WAAW;KAErB,eAAe,EAAC,mBAAmB;KACnC,iBAAiB,EAAC,qBAAqB;KAEvC,QAAQ,EAAC,WAAW;KAEpB,QAAQ,EAAC,UAAU;EACpB;;;;;;;;;;;;;ACfD,KAAY,KAAK,uBAAM,EACvB,CAAC,CAD0C;AAC3C,wCAAuB,EACvB,CAAC,CADoC;AACrC,kCAAqB,CAErB,CAAC,CAF0B;AAQ3B;KAA0B,wBAAgC;KAA1D;SAA0B,8BAAgC;KAkB1D,CAAC;KAjBC,qBAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;SACxB,IAAM,IAAI,GAAG,aAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;SACjE,IAAM,SAAS,GAAM,oBAAU,CAAC,IAAI,SAAI,IAAI,cAAS,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAI,IAAI,CAAC,MAAQ;SAC3F,IAAM,KAAK,GAAG,aAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,GAAG,EAAE,CAAC;SAC1D,IAAM,OAAO,GAAG,UAAC,EAAE;aACjB,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;aACrC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,EAAE;SAClC,CAAC;SACD,MAAM,CAAC,CACL,qBAAC,GAAG,sBACE,KAAK,GACT,SAAS,EAAE,SAAU,EACrB,OAAO,EAAE,OAAQ,GAAG,CACvB,CAAC;KACJ,CAAC;KACH,WAAC;AAAD,EAAC,CAlByB,KAAK,CAAC,SAAS,GAkBxC;AAlBY,aAAI,OAkBhB;AAMD;KAA+B,6BAAqC;KAApE;SAA+B,8BAAqC;KASpE,CAAC;KARC,0BAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,IAAI,GAAG,aAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;SACjE,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAK,oBAAU,CAAC,IAAI,SAAI,IAAI,SAAI,oBAAU,CAAC,SAAY,EACnE,OAAO,EAAE,YAAE,IAAI,QAAC,aAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC,OAAO,EAAE,GAAG,SAAS,EAApD,CAAsD,EAAG,CAC3E,CAAC;KACJ,CAAC;KACH,gBAAC;AAAD,EAAC,CAT8B,KAAK,CAAC,SAAS,GAS7C;AATY,kBAAS,YASrB;AAED;KAA8B,4BAAqC;KAAnE;SAA8B,8BAAqC;KASnE,CAAC;KARC,yBAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,IAAI,GAAG,aAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;SACjE,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAK,oBAAU,CAAC,IAAI,SAAI,IAAI,SAAI,oBAAU,CAAC,QAAW,EAClE,OAAO,EAAE,YAAE,IAAI,QAAC,aAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC,OAAO,EAAE,GAAG,SAAS,EAApD,CAAsD,EAAG,CAC3E,CAAC;KACJ,CAAC;KACH,eAAC;AAAD,EAAC,CAT6B,KAAK,CAAC,SAAS,GAS5C;AATY,iBAAQ,WASpB;;;;;;;;;;;;;ACxDD,KAAY,KAAK,uBAAM,EAEvB,CAAC,CAF0C;AAI3C,KAAO,eAAe,GAAG,KAAK,CAAC,eAAe;AAC9C,KAAO,iBAAiB,GAAG,KAAK,CAAC,iBAAiB;AAClD,KAAO,oBAAoB,GAAG,KAAK,CAAC,oBAAoB;AACxD,wCAAuB,EAEvB,CAAC,CAFoC;AAQrC;KAA+B,6BAAoC;KAAnE;SAA+B,8BAAoC;KAwEnE,CAAC;KAvEC,0BAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM;SAC3B,IAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,UAAC,KAAK,EAAE,CAAC;aAClC,MAAM,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;iBACxB,KAAK,eAAe,CAAC,eAAe,CAAC,WAAW,CAAC,EAAE,CAAC;qBAClD,IAAM,EAAE,GAAG,KAA0B;qBACrC,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,CAAE,cAAQ,qBAAC,CAAC,SAAE,EAAE,CAAC,MAAM,CAAC,IAAK,CAAI,YAAa,CACzD;iBACH,CAAC;iBAED,KAAK,eAAe,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,CAAC;qBACnD,IAAM,EAAE,GAAG,KAA2B;qBACtC,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,CAAE,cAAQ,qBAAC,CAAC,SAAE,EAAE,CAAC,MAAM,CAAC,IAAK,CAAI,aAAc,CAC1D;iBACH,CAAC;iBAED,KAAK,oBAAoB,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,EAAE,CAAC;qBACnE,IAAM,IAAE,GAAG,KAAiC;qBAC5C,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,CAAE,GACV,qBAAC,CAAC,oBAAS,IAAE,CAAC,MAAM,CAAC,IAAK,qBAAoB,EAC9C,qBAAC,CAAC,yBAAc,IAAE,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,YAAE,IAAI,4BAAC,CAAC,SAAE,EAAE,CAAC,IAAK,MAAK,EAAjB,CAAiB,CAAG,eAAS,qBAAC,CAAC,SAAE,KAAK,CAAC,aAAa,CAAC,IAAE,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAE,CAAI,MAAK,EACjK,qBAAC,CAAC,SACD,IAAE,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,aAAG;yBAC5B,4BAAC,MAAM,IAAC,OAAO,EAAG,eAAK,IAAI,YAAK,CAAC,mBAAmB,CAAC,IAAE,CAAC,WAAW,CAAC,EAAzC,CAA2C,EAAC,GAAG,EAAC,GAAG,uBAA4B;qBAA1G,CAA0G,CAC3G,CAAC,SAAS,CAAE,cAAM,4BAAC,QAAQ,QAAG,EAAZ,CAAY,CAAG,EACjC,IAAE,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,aAAG;yBAC7B,4BAAC,MAAM,IAAC,OAAO,EAAG,eAAK,IAAI,YAAK,CAAC,oBAAoB,CAAC,IAAE,CAAC,WAAW,CAAC,EAA1C,CAA4C,EAAC,GAAG,EAAC,GAAG,wBAA6B;qBAA5G,CAA4G,CAC7G,CAAC,SAAS,CAAE,cAAM,4BAAC,QAAQ,QAAG,EAAZ,CAAY,CAAG,CAC9B,CACA,CACP;iBACH,CAAC;iBAED,KAAK,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC,EAAE,CAAC;qBACtD,IAAM,IAAE,GAAG,KAA0B;qBACrC,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,CAAE,GACV,qBAAC,CAAC,IAAC,IAAI,EAAC,GAAG,EAAC,OAAO,EAAG,aAAG,IAAI,YAAK,CAAC,cAAc,CAAC,IAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAlC,CAAoC,wBAAwB,CACrF,CACP;iBACH,CAAC;iBAED,KAAK,iBAAiB,CAAC,iBAAiB,CAAC,UAAU,CAAC,EAAE,CAAC;qBACrD,IAAM,IAAE,GAAG,KAAyB;qBACpC,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,CAAE,GACV,qBAAC,CAAC,IAAC,IAAI,EAAC,GAAG,EAAC,OAAO,EAAG,aAAG,IAAI,YAAK,CAAC,cAAc,CAAC,IAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAlC,CAAoC,GAAG,IAAE,CAAC,MAAM,CAAC,IAAK,cAAS,IAAE,CAAC,IAAI,CAAC,MAAO,OAAE,KAAK,CAAC,IAAI,CAAC,IAAE,CAAC,IAAI,CAAC,IAAI,CAAE,CAAI,CACtI,CACP;iBACH,CAAC;iBAED,SAAS,CAAC;qBACR,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,CAAE,GACV,qBAAC,QAAQ,IAAC,IAAI,EAAE,CAAE,EAAC,IAAI,EAAE,EAAG,EAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAE,EAAY,CACzE,CACP;iBACH,CAAC;aACH,CAAC;SACH,CAAC,CAAC;SAEF,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,QAAS,GACjC,OAAQ,CACL,CACP,CAAC;KACJ,CAAC;KACH,gBAAC;AAAD,EAAC,CAxE8B,KAAK,CAAC,SAAS,GAwE7C;AAxEY,kBAAS,YAwErB;;;;;;;;;;;;;ACrFD,KAAY,KAAK,uBAAM,EACvB,CAAC,CAD0C;AAE3C,wCAAuB,EACvB,CAAC,CADoC;AAErC,qCAAmC,EACnC,CAAC,CAD6C;AAE9C,wCAAqC,EAErC,CAAC,CAFkD;AAEnD,wCAAuC,OAA+B;KACpE,MAAM,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAE,YAAE;SACzC,IAAM,CAAC,GAAe;aACpB,SAAS,EAAC,UAAC,QAAgB,EAAE,UAAqB,EAAE,GAAU;iBAC5D,MAAM,CAAC,qBAAC,IAAI,IAAC,GAAG,EAAE,GAAI,GAAC,qBAAC,MAAM,IAAC,OAAO,EAAG,YAAE,IAAI,iBAAU,EAAE,EAAZ,CAAc,GAAE,EAAE,CAAC,MAAM,CAAC,IAAK,CAAS,CAAO;aAChG,CAAC;aACD,OAAO,EAAC;iBACN,MAAM,CAAC,CACL,qBAAC,GAAG,SACF,oBAAC,mCAAsB,GAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,KAAM,EAAG,EACjD,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,iBAAkB,GAC3C,qBAAC,IAAI,SAAE,EAAE,CAAC,MAAO,CAAO,CACpB,CACF,CACP,CAAC;aACJ,CAAC;UACF;SACD,MAAM,CAAC,CAAC,CAAC;KACX,CAAC,CAAC;AACJ,EAAC;AAED,qCAAoC,OAA6B;KAC/D,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAE,mBAAS;SAC9C,IAAM,KAAK,GAAG,SAAS,CAAC,MAAM;SAC9B,IAAM,CAAC,GAAe;aACpB,SAAS,EAAC,UAAC,QAAgB,EAAE,UAAqB,EAAE,GAAU;iBAC5D,MAAM,CAAC,qBAAC,IAAI,IAAC,GAAG,EAAE,GAAI,GAAC,qBAAC,MAAM,IAAC,OAAO,EAAG,YAAE,IAAI,iBAAU,EAAE,EAAZ,CAAc,GAAE,SAAS,CAAC,QAAS,SAAI,SAAS,CAAC,OAAO,CAAC,GAAG,CAAE,YAAE,IAAI,SAAE,CAAC,IAAI,EAAP,CAAO,CAAE,CAAC,IAAI,CAAC,IAAI,CAAE,CAAS,CAAO;aAC1J,CAAC;aACD,OAAO,EAAC;iBACN,MAAM,CAAC,CACL,qBAAC,GAAG,SACF,oBAAC,mCAAsB,GAAC,KAAK,EAAE,SAAS,CAAC,KAAM,EAAG,EAClD,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,iBAAkB,GAC3C,qBAAC,IAAI,SAAE,KAAM,CAAO,CAChB,CACF,CACP,CAAC;aACJ,CAAC;UACF;SACD,MAAM,CAAC,CAAC,CAAC;KACX,CAAC,CAAC;AACJ,EAAC;AAED,qCAAoC,EAAwB;KAC1D,IAAM,KAAK,GAAG,EAAE,CAAC,UAAU;KAC3B,EAAE,CAAC,CAAC,KAAK,YAAY,KAAK,CAAC,eAAe,CAAC;SAAC,MAAM,CAAC,0BAA0B,CAAC,KAAK,CAAC;KACpF,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,YAAY,KAAK,CAAC,iBAAiB,CAAC;SAAC,MAAM,CAAC,6BAA6B,CAAC,KAAK,CAAC;KAC9F,MAAM,IAAI,KAAK,CAAC,aAAa,GAAC,EAAE,CAAC;AACnC,EAAC;AAED;KAAgC,8BAAoD;KAApF;SAAgC,8BAAoD;KAMpF,CAAC;KALC,2BAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,EAAE,GAAG,KAAK,CAAC,IAAI;SACrB,MAAM,CAAC,oBAAC,iBAAO,GAAC,KAAK,EAAE,0BAA0B,CAAC,EAAE,CAAE,EAAG;KAC3D,CAAC;KACH,iBAAC;AAAD,EAAC,CAN+B,KAAK,CAAC,SAAS,GAM9C;AANY,mBAAU,aAMtB;;;;;;;;;;;;;ACjED,kCAAqB,CAErB,CAAC,CAF0B;AAyB3B;KAA6B,2BAA2C;KAAxE;SAA6B,8BAA2C;SACtE,UAAK,GAAG;aACN,OAAO,EAAC,CAAC;UACV;KAoBH,CAAC;KAnBC,wBAAM,GAAN;SAAA,iBAkBC;SAjBC,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO;SAClC,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC;SACjC,IAAM,QAAQ,GAAqB,aAAM,CAAC,IAAI,CAAC,GAAG,CAAC,qBAAC,GAAG,wBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;SACtG,IAAM,UAAU,GAAuB,KAAK,CAAC,KAAK,CAAC,GAAG,CAAE,UAAC,IAAI,EAAE,GAAG;aAChE,WAAI,CAAC,SAAS,CAAC,CAAC,GAAG,KAAK,OAAO,CAAC,EAAE,cAAQ,KAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAC,GAAG,EAAE,CAAC,EAAC,CAAC,EAAE,GAAG,CAAE;SAAjF,CAAiF,CAClF;SACD,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAE,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,IAAI,EAAG,GAC7D,qBAAC,GAAG,IAAC,SAAS,EAAE,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,IAAI,EAAG,GAC3D,QAAS,CACN,EACN,qBAAC,GAAG,IAAC,SAAS,EAAE,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,mBAAmB,IAAI,EAAG,GACtE,UAAW,CACR,CACF,CACP,CAAC;KACJ,CAAC;KACH,cAAC;AAAD,EAAC,CAvB4B,KAAK,CAAC,SAAS,GAuB3C;AAvBY,gBAAO,UAuBnB;;;;;;;;;;;;;ACjDD,kCAAqB,CACrB,CAAC,CAD0B;AAC3B,KAAY,KAAK,uBAAM,EACvB,CAAC,CAD0C;AAC3C,mCAAmB,EACnB,CAAC,CAD2B;AAC5B,wCAAuB,EAEvB,CAAC,CAFoC;AAOrC;;;;;;;;;;;;;;;;;;GAkBE;AAEF;KAA6C,0CAA6C;KAA1F;SAA6C,8BAA6C;KAoB1F,CAAC;KAnBC,uCAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK;SAC9B,IAAM,WAAW,GAAG,aAAM,CAAC,OAAO,CAAC,KAAK,EAAE,WAAC,IAAI,YAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAlB,CAAkB,CAAC;SAClE,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAE,UAAC,IAAI,EAAE,GAAG;aACpD,IAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;aAChC,KAAK,CAAC,IAAI,CAAE,UAAC,EAAE,EAAE,EAAE;iBACjB,IAAM,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM;iBAC/B,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC;aACjD,CAAC,CAAC,CAAC;aACH,IAAM,KAAK,GAAG,aAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,EAAE,UAAC,GAAG,EAAE,IAAI,IAAK,UAAG,GAAG,IAAI,CAAC,MAAM,EAAjB,CAAiB,CAAC,CAAC;aAC1E,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,GAAG,EAAE,GAAI,EAAC,SAAS,EAAE,oBAAU,CAAC,iBAAkB,GACrD,qBAAC,IAAI,SAAE,KAAM,CAAO,EACnB,KAAK,CAAC,GAAG,CAAE,UAAC,IAAI,EAAE,GAAG,IAAK,2BAAC,YAAI,GAAC,GAAG,EAAE,GAAI,EAAC,IAAI,EAAE,IAAK,EAAG,EAA9B,CAA8B,CAAG,CACxD,CACP,CAAC;SACJ,CAAC,CAAC;SACF,MAAM,CAAC,qBAAC,GAAG,SAAE,KAAM,CAAM;KAC3B,CAAC;KACH,6BAAC;AAAD,EAAC,CApB4C,KAAK,CAAC,SAAS,GAoB3D;AApBY,+BAAsB,yBAoBlC;AAED;KAAuC,qCAAsC;KAA7E;SAAuC,8BAAsC;KAmB7E,CAAC;KAlBC,kCAAM,GAAN;SACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,IAAM,WAAW,GAAG,aAAM,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,WAAC,IAAI,YAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAlB,CAAkB,CAAC;SACxE,IAAM,KAAK,GAAG,aAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,UAAC,GAAG,EAAE,IAAI,IAAK,UAAG,GAAG,IAAI,CAAC,MAAM,EAAjB,CAAiB,CAAC;SAC/E,MAAM,CAAC,CACL,qBAAC,GAAG,SACJ,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,eAAgB,GACzC,oBAAC,sBAAsB,GAAC,KAAK,EAAE,KAAK,CAAC,KAAM,EAAG,EAC9C,qBAAC,GAAG,SACF,qBAAC,IAAI,SAAE,KAAM,CAAO,CAChB,EACN,qBAAC,GAAG,SACF,qBAAC,MAAM,IAAC,OAAO,EAAE,KAAK,CAAC,OAAQ,WAAe,CAC1C,CACF,CACA,CACP,CAAC;KACJ,CAAC;KACH,wBAAC;AAAD,EAAC,CAnBsC,KAAK,CAAC,SAAS,GAmBrD;AAnBY,0BAAiB,oBAmB7B;;;;;;;;;;;;;ACrED;KAAiC,+BAA0C;KAGzE;SACE,iBAAO;KACT,CAAC;KACO,8BAAQ,GAAhB,UAAiB,EAAU;SACzB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAqB,CAAC;KAC3C,CAAC;KACO,gCAAU,GAAlB;SACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;KAClD,CAAC;KACO,oCAAc,GAAtB;SACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;KACtD,CAAC;KACD,4BAAM,GAAN;SAAA,iBAcC;SAbC,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;SACxB,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAC,wCAAwC,GACrD,qBAAC,KAAK,IAAC,GAAG,EAAE,WAAW,CAAC,aAAc,EAAC,IAAI,EAAC,MAAM,EAAU,EAC5D,qBAAC,KAAK,IAAC,GAAG,EAAE,WAAW,CAAC,iBAAkB,EAAC,IAAI,EAAC,UAAU,EAAU,EACpE,qBAAC,KAAK,IAAC,IAAI,EAAC,QAAQ,EAClB,OAAO,EAAK,WAAC,IAAI,YAAK,CAAC,cAAc,CAAC,KAAI,CAAC,UAAU,EAAE,CAAC,KAAK,EAAE,KAAI,CAAC,cAAc,EAAE,CAAC,KAAK,CAAC,EAA1E,CAA4E,EAC7F,KAAK,EAAC,eAAe,EAAS,EAChC,qBAAC,KAAK,IAAC,IAAI,EAAC,QAAQ,EAClB,OAAO,EAAK,WAAC,IAAI,YAAK,CAAC,aAAa,CAAC,KAAI,CAAC,UAAU,EAAE,CAAC,KAAK,EAAE,KAAI,CAAC,cAAc,EAAE,CAAC,KAAK,CAAC,EAAzE,CAA2E,EAC5F,KAAK,EAAC,QAAQ,EAAS,CACrB,CACP;KACH,CAAC;KA5BM,yBAAa,GAAG,YAAY;KAC5B,6BAAiB,GAAG,mBAAmB;KA4BhD,kBAAC;AAAD,EAAC,CA9BgC,KAAK,CAAC,SAAS,GA8B/C;AA9BY,oBAAW,cA8BvB;;;;;;;;;;;;;AC7BD,wCAAuB,EAWvB,CAAC,CAXoC;AAErC;;;;;;;GAOE;AAEF;KAAmC,iCAA6B;KAAhE;SAAmC,8BAA6B;KAUhE,CAAC;KATC,8BAAM,GAAN;SACE,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;SACxB,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,aAAc,GACvC,qBAAC,EAAE,4BAAsB,EACzB,qBAAC,EAAE,SAAE,MAAM,CAAC,IAAK,CAAK,CAClB,CACP,CAAC;KACJ,CAAC;KACH,oBAAC;AAAD,EAAC,CAVkC,KAAK,CAAC,SAAS,GAUjD;AAVY,sBAAa,gBAUzB;AAOD;KAA6B,2BAAmC;KAAhE;SAA6B,8BAAmC;KAmBhE,CAAC;KAlBC,wBAAM,GAAN;SAAA,iBAiBC;SAhBC,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;SACnC,IAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe;SAClD,IAAM,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,UAAC,EAAE,EAAE,GAAG;aACvC,4BAAC,GAAG,IAAC,GAAG,EAAE,GAAI,GACZ,qBAAC,KAAK,IAAC,IAAI,EAAC,UAAU,EACpB,QAAQ,EAAG,UAAC,CAAC,IAAK,YAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,EAAE,CAAC,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,EAAtE,CAAwE,EAC1F,cAAc,EAAE,eAAe,CAAC,EAAE,CAAC,IAAI,CAAE,EACjC,EACV,qBAAC,IAAI,SAAE,EAAE,CAAC,IAAK,CAAO,CAClB;SANN,CAMM,CACP;SACD,MAAM,CAAC,CACL,qBAAC,GAAG,IAAC,SAAS,EAAE,oBAAU,CAAC,OAAQ,GAChC,YAAa,CACV,CACP,CAAC;KACJ,CAAC;KACH,cAAC;AAAD,EAAC,CAnB4B,KAAK,CAAC,SAAS,GAmB3C;AAnBY,gBAAO,UAmBnB;;;;;;;AClDD,0C","file":"ddd-briscola-view.browser.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f26bb58f9b3a0db55728\n **/","import {App, Commands} from \"ddd-briscola-app\"\r\nimport {createBoardCommandListener} from \"./lib/listeners\"\r\nimport {Board} from \"./lib/Board\"\r\n\r\nimport './styles/App.styl';\r\n\r\nlet app:App\r\n\r\nconst reactContainer = \"react-container\"\r\n\r\nexport function main() {\r\n    app = App.create(\"site-map\")\r\n    const el = document.getElementById(reactContainer)\r\n    app.displayChannel.subscribe( board => {\r\n      const boardProps = createBoardCommandListener(board, (cmd) => app.exec(cmd))\r\n      console.log(\"boardProps \")\r\n      console.log(boardProps)\r\n      ReactDOM.render(<Board {...boardProps}></Board>, el)\r\n    })\r\n    app.exec(new Commands.StarApplication())\r\n}\r\n\r\nwindow.addEventListener(\"load\", (event) => main())\n\n\n/** WEBPACK FOOTER **\n ** ./Main.tsx\n **/","// export * from \"./lib/PlayersService\"\r\n// export * from \"./lib/PlayerService\"\r\nexport * from \"./lib/App\"\r\n\r\nimport * as Commands from \"./lib/Commands\"\r\n\r\nexport {Commands as Commands}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/index.ts\n **/","import {Option} from \"flib\"\r\nimport * as Commands from \"./Commands\"\r\nimport {PlayersService} from \"./PlayersService\"\r\nimport {PlayerService} from \"./PlayerService\"\r\nimport CommandID from \"./CommandID\"\r\nimport {Board, SiteMap, GameState, ActiveGameState, FinalGameState, Player, CurrentPlayer, CompetitionState, ViewFlag} from \"ddd-briscola-model\"\r\nimport {fetch} from \"rest-fetch\"\r\nimport * as Reducers from \"./Reducers\"\r\nimport CommandDispatcher from \"./CommandsDispatcher\"\r\n\r\nimport Command = Commands.Command\r\n\r\nexport interface App {\r\n  displayChannel: Rx.Observable<Board>\r\n  exec(cmd: Command):void\r\n}\r\n\r\nexport module App {\r\n  export function create(entryPoint:string):App {\r\n    return new AppImpl(entryPoint)\r\n  }\r\n}\r\n\r\nclass AppImpl implements App {\r\n\r\n  static dispatch(cmd:Reducers.Command):Reducers.AsynchReducerType {\r\n    switch (cmd.type) {\r\n      case CommandID.startApplication : return Reducers.synchReducer( st => st )\r\n      case CommandID.createPlayer:\r\n      case CommandID.playerLogon: return Reducers.playerLogon\r\n      case CommandID.playCard: return Reducers.playCard\r\n      case CommandID.acceptCompetition:\r\n      case CommandID.declineCompetition:\r\n      case CommandID.startCompetition: return Reducers.competitionCommands\r\n      case CommandID.diplayPlayerDeck: return Reducers.synchReducer( Reducers.diplayPlayerDeck )\r\n      case CommandID.newDomainEvent: return Reducers.synchReducer( Reducers.newDomainEvent )\r\n      case CommandID.selectPlayerForCompetition: return Reducers.synchReducer( Reducers.selectPlayerForCompetition )\r\n      case CommandID.setCompetitionDeadline: return Reducers.synchReducer( Reducers.setCompetitionDeadline )\r\n      case CommandID.setCompetitionKind: return Reducers.synchReducer( Reducers.setCompetitionKind )\r\n      case CommandID.setCurrentGame: return Reducers.synchReducer( Reducers.setCurrentGame )\r\n      case CommandID.updateCompetitionState: return Reducers.synchReducer( Reducers.updateCompetionState )\r\n      case CommandID.updateGameState: return Reducers.synchReducer( Reducers.updateGameState )\r\n      case CommandID.updatePlayersState: return Reducers.synchReducer( Reducers.updatePlayersState )\r\n      default:\r\n        throw new Error(`invalid command ${cmd}`);\r\n    }\r\n  }\r\n\r\n  displayChannel: Rx.Observable<Board>\r\n  dispatcher:Promise<CommandDispatcher<Command, Reducers.ApplicationState>>\r\n  constructor(entryPoint: string) {\r\n    const initialState = Reducers.initialState(entryPoint)\r\n    this.dispatcher = initialState.then( state =>\r\n      new CommandDispatcher(AppImpl.dispatch, state)\r\n    )\r\n    this.displayChannel =  Rx.Observable.fromPromise(this.dispatcher).flatMap( d => d.changes().map( s => s.board ) );\r\n    this.displayChannel.subscribe(ev => {\r\n      console.log(\"display channel \")\r\n      console.log(ev)\r\n      console.log(\"***************\")\r\n    }, err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  exec(cmd: Command):void {\r\n    this.dispatcher.then( d => {\r\n      d.dispatch(cmd).catch( err => console.error(err) )\r\n    });\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/App.ts\n **/","enum CommandID {\r\n  startApplication,\r\n  createPlayer, playerLogon,\r\n  startCompetition, acceptCompetition, declineCompetition,\r\n  playCard,\r\n  selectPlayerForCompetition,\r\n  setCompetitionKind,\r\n  setCompetitionDeadline,\r\n  setCurrentGame,\r\n  diplayPlayerDeck,\r\n  updateGameState, updatePlayersState, updateCompetitionState,\r\n  newDomainEvent\r\n}\r\n\r\nexport default CommandID\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/CommandID.ts\n **/","import {Option} from \"flib\"\r\nimport * as Commands from \"./Commands\"\r\nimport {PlayersService} from \"./PlayersService\"\r\nimport {PlayerService} from \"./PlayerService\"\r\nimport {fetch} from \"rest-fetch\"\r\nimport {Board, SiteMap, GameState, ActiveGameState, FinalGameState, Player, CurrentPlayer, CompetitionState, ViewFlag} from \"ddd-briscola-model\"\r\nimport {copy} from \"./Util\"\r\n\r\nexport type Command = Commands.Command\r\n\r\nexport interface ApplicationState {\r\n  playersService: PlayersService\r\n  playerService: Option<PlayerService>\r\n  board: Board\r\n}\r\n\r\nexport function initialState(entryPoint: string): Promise<ApplicationState> {\r\n  return fetch(SiteMap).from(entryPoint).then(siteMap => {\r\n    return {\r\n      playersService: new PlayersService(siteMap),\r\n      playerService: Option.none<PlayerService>(),\r\n      board: Board.empty()\r\n    }\r\n  })\r\n}\r\n\r\nexport type ReducerType = (state: ApplicationState, command: Command, dispatch: (cmd: Command) => Promise<ApplicationState>) => ApplicationState\r\nexport type AsynchReducerType = (state: ApplicationState, command: Command, dispatch: (cmd: Command) => Promise<ApplicationState>) => Promise<ApplicationState>\r\n\r\nexport function synchReducer(rt: ReducerType): AsynchReducerType {\r\n  return (state: ApplicationState, command: Command, dispatch: (cmd: Command) => Promise<ApplicationState>) => Promise.resolve(rt(state, command, dispatch))\r\n}\r\n\r\nexport const playerLogon: AsynchReducerType = (state, command, dispatch) => {\r\n  if (command instanceof Commands.PlayerLogon || command instanceof Commands.CreatePlayer) {\r\n    const ps = state.playersService\r\n    const createPlayer = (command instanceof Commands.PlayerLogon) ? ps.logon(command.playerName, command.password) : ps.createPlayer(command.playerName, command.password)\r\n    return createPlayer.then(player => {\r\n      const playerService = new PlayerService(player)\r\n      playerService.eventsLog.subscribe(event => {\r\n        dispatch(new Commands.NewDomainEvent(event))\r\n      })\r\n\r\n      playerService.gamesChannel.subscribe(es => {\r\n        dispatch(new Commands.UpdateGameState(es.game))\r\n      })\r\n\r\n      playerService.competitionsChannel.subscribe(es => {\r\n        dispatch(new Commands.UpdateCompetitionState(es.competition))\r\n      })\r\n\r\n      playerService.playersChannel.subscribe(es => {\r\n        dispatch(new Commands.UpdatePlayersState(es.players))\r\n      })\r\n      const board = copy(state.board, {\r\n        player:Option.some(player)\r\n      })\r\n      return {\r\n        playersService: state.playersService,\r\n        playerService: Option.some(playerService),\r\n        board\r\n      }\r\n    })\r\n  } else return Promise.resolve(state)\r\n}\r\n\r\nexport const playCard: AsynchReducerType = (state, command) => {\r\n  if (command instanceof Commands.PlayCard) {\r\n    return state.playerService.map(playerService => {\r\n      const game = state.board.currentGame.map(g => Promise.resolve(g.self)).getOrElse(() => Promise.reject(\"no current game\"))\r\n      return game.then(game => {\r\n        playerService.playCard(game, command.card)\r\n        return {\r\n          playersService: state.playersService,\r\n          playerService: Option.some(playerService),\r\n          board: state.board\r\n        }\r\n      })\r\n    }).getOrElse(() => Promise.reject(\"player service not avaiable\"))\r\n  } else {\r\n    return Promise.resolve(state)\r\n  }\r\n}\r\n\r\nfunction playerServiceEffect(effect: (ps: PlayerService, state: ApplicationState, command: Command) => any): AsynchReducerType {\r\n  return (state, command) => {\r\n    return state.playerService.map(playerService => {\r\n      effect(playerService, state, command)\r\n      return Promise.resolve(state)\r\n    }).getOrElse(() => Promise.reject(\"player service not avaiable\"))\r\n  }\r\n}\r\n\r\nexport const competitionCommands: AsynchReducerType = (state, command, dispacth) => {\r\n  let res: AsynchReducerType\r\n  if (command instanceof Commands.StartCompetition) {\r\n    res = playerServiceEffect(playerService =>\r\n      playerService.createCompetition(Object.keys(state.board.competitionSelectedPlayers), state.board.competitionKind, state.board.competitionDeadlineKind)\r\n    )\r\n  } else if (command instanceof Commands.AcceptCompetition) {\r\n    res = playerServiceEffect(playerService => playerService.acceptCompetition(command.competition))\r\n  } else if (command instanceof Commands.DeclineCompetition) {\r\n    res = playerServiceEffect(playerService => playerService.declineCompetition(command.competition))\r\n  } else {\r\n    res = () => Promise.reject(`invalid command ${command.type} `)\r\n  }\r\n  return res(state, command, dispacth)\r\n}\r\n\r\nfunction boardReducer(br: (board: Board, command: Command) => Board): ReducerType {\r\n  return (state, command) => {\r\n    return {\r\n      playersService: state.playersService,\r\n      playerService: state.playerService,\r\n      board: br(state.board, command)\r\n    }\r\n  }\r\n}\r\n\r\nexport const selectPlayerForCompetition: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.SelectPlayerForCompetition) {\r\n    if (command.selected) {\r\n      return copy(board, {\r\n        competitionSelectedPlayers: {\r\n          [command.player]: true\r\n        }\r\n      })\r\n    } else {\r\n      const cpy = copy(board, {})\r\n      delete cpy.competitionSelectedPlayers[command.player];\r\n      return cpy\r\n    }\r\n  } else {\r\n    return board\r\n  }\r\n})\r\n\r\nexport const setCompetitionKind: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.SetCompetitionKind) {\r\n    return copy(board, {\r\n      competitionKind: command.kind\r\n    })\r\n  } else {\r\n    return board\r\n  }\r\n})\r\n\r\nexport const setCompetitionDeadline: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.SetCompetitionDeadline) {\r\n    return copy(board, {\r\n      competitionDeadlineKind: command.deadlineKind\r\n    })\r\n  } else {\r\n    return board\r\n  }\r\n})\r\n\r\nexport const setCurrentGame: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.SetCurrentGame) {\r\n    return copy(board, {\r\n      currentGame: Option.option<GameState>(board.activeGames[command.game]).orElse(() => Option.option(board.finishedGames[command.game]))\r\n    })\r\n  } else {\r\n    return board;\r\n  }\r\n})\r\n\r\nexport const diplayPlayerDeck: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.DiplayPlayerDeck) {\r\n    return copy(board, {\r\n      viewFlag: command.display === true ? ViewFlag.showPlayerCards : ViewFlag.normal\r\n    })\r\n  } else {\r\n    return board;\r\n  }\r\n})\r\n\r\nexport const updatePlayersState: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.UpdatePlayersState) {\r\n    return copy(board, {\r\n      players: board.player.map(cp => command.players.filter(pl => pl.self !== cp.self)).getOrElse(() => command.players)\r\n    })\r\n  } else {\r\n    return board;\r\n  }\r\n})\r\n\r\nexport const updateGameState: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.UpdateGameState) {\r\n    const gm = command.gameState\r\n    let res: Board = board\r\n    const currentGame = board.currentGame.fold<void>(\r\n      () => Option.some(gm),\r\n      (cgm) => {\r\n        if (gm.self === cgm.self) {\r\n          return Option.some(gm)\r\n        } else {\r\n          return Option.some(cgm)\r\n        }\r\n      })\r\n    if (gm instanceof ActiveGameState) {\r\n      res = copy(board, {\r\n        currentGame,\r\n        activeGames: {\r\n          [gm.self]: gm\r\n        }\r\n      });\r\n    } else if (gm instanceof FinalGameState) {\r\n      res = copy(board, {\r\n        currentGame,\r\n        finishedGames: {\r\n          [gm.self]: gm\r\n        }\r\n      })\r\n      delete res.activeGames[gm.self];\r\n    }\r\n    return res;\r\n  } else {\r\n    return board;\r\n  }\r\n})\r\n\r\nexport const updateCompetionState: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.UpdateCompetitionState) {\r\n    return copy(board, {\r\n      engagedCompetitions: {\r\n        [command.competitionState.self]: command.competitionState\r\n      }\r\n    })\r\n  } else {\r\n    return board;\r\n  }\r\n})\r\n\r\nexport const newDomainEvent: ReducerType = boardReducer((board, command) => {\r\n  if (command instanceof Commands.NewDomainEvent) {\r\n    return copy(board, {\r\n      eventsLog: [command.event].concat(board.eventsLog)\r\n    })\r\n  } else {\r\n    return board;\r\n  }\r\n})\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/Reducers.ts\n **/","export {default as Arrays} from \"./lib/Arrays\"\r\nexport {default as JsMap} from \"./lib/JsMap\"\r\nexport {default as Option} from \"./lib/Option\"\r\nexport {default as lazy} from \"./lib/lazy\"\r\nexport {default as fail} from \"./lib/fail\"\r\n\r\nimport isNull from \"./lib/isNull\"\r\n\r\nexport {isNull}\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/index.ts\n **/","import {default as Option} from \"./Option\"\r\nimport {default as JsMap} from \"./JsMap\"\r\nimport isNull from \"./isNull\"\r\n\r\nmodule Arrays {\r\n\r\n  export function flatMap<A,B>(arr:A[], f:(a:A) => B[]):B[] {\r\n    let res:B[] = [];\r\n    arr.forEach( a => res = res.concat(f(a)))\r\n    return res;\r\n  }\r\n\r\n  export function find<A>(arr: A[], pred: (a: A) => boolean): Option<A> {\r\n    return findIndex(arr, pred).map( idx => arr[idx] )\r\n  }\r\n\r\n  export function findIndex<A>(arr: A[], pred: (a: A) => boolean): Option<number> {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      const v = arr[i]\r\n      if (pred(v)) return Option.some<number>(i)\r\n    }\r\n    return Option.none<number>();\r\n  }\r\n\r\n  export function split<A>(arr:A[], pred:(a:A) => boolean):[A[], A[]] {\r\n    const res1:A[] = []\r\n    const res2:A[] = []\r\n    arr.forEach( i => {\r\n      if (pred(i)) res1.push(i)\r\n      else res2.push(i)\r\n    })\r\n    return [res1, res2];\r\n  }\r\n\r\n  export function exists<A>(arr:A[], pred:(a:A) => boolean):boolean {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      const v = arr[i]\r\n      if (pred(v)) return true\r\n    }\r\n    return false;\r\n  }\r\n\r\n  export function foldLeft<A,B>(arr:A[], z:B, f:(acc:B,i:A) => B):B {\r\n    let res = z\r\n    arr.forEach( i => res = f(res,i))\r\n    return res\r\n  }\r\n\r\n  export function foldRight<A,B>(arr:A[], z:B, f:(i:A, acc:B) => B):B {\r\n    let res = z\r\n    const len = arr.length\r\n    for (let idx = len-1; idx >= 0; idx--) {\r\n      res = f(arr[idx], res)\r\n    }\r\n    return res\r\n  }\r\n\r\n  export function groupBy<A>(arr:A[], group:(a:A) => string):JsMap<A[]> {\r\n    const res:JsMap<A[]> = {}\r\n    const addToMap = (k:string, v:A) => {\r\n      let arr = res[k]\r\n      if (isNull(arr)) {\r\n        res[k] = [v]\r\n      } else {\r\n        arr.push(v)\r\n      }\r\n    }\r\n    arr.forEach( e => addToMap(group(e), e))\r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport default Arrays\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/Arrays.ts\n **/","export abstract class Option<A> {\r\n  static some<T>(v: T): Option<T> {\r\n    return new SomeImpl<T>(v)\r\n  }\r\n  static none<T>(): Option<T> {\r\n    return None.instance;\r\n  }\r\n  static option<T>(t: T): Option<T> {\r\n    return (t !== null && t !== undefined) ? Option.some<T>(t) : Option.none<T>();\r\n  }\r\n  \r\n  fold<B>(fnone: () => B, fsome: (v: A) => B): B {\r\n    return fnone()\r\n  }\r\n  map<B>(f: (t: A) => B): Option<B> {\r\n    return Option.none<B>()\r\n  }\r\n  forEach<B>(f: (t: A) => void): void {\r\n  }\r\n  flatMap<B>(f: (t: A) => Option<B>): Option<B> {\r\n    return Option.none<B>()\r\n  }\r\n  getOrElse(f: () => A): A {\r\n    return f()\r\n  }\r\n  orElse(f: () => Option<A>): Option<A> {\r\n    return f()\r\n  }\r\n  isEmpty(): boolean {\r\n    return true\r\n  }\r\n  isDefined(): boolean {\r\n    return false\r\n  }\r\n  zip<A>(b: Option<A>): Option<[A, A]> {\r\n    return Option.none<[A, A]>()\r\n  }\r\n  toArray(): A[] {\r\n    return []\r\n  }\r\n}\r\n\r\nclass None<A> extends Option<A> {\r\n  static instance = new None<any>()\r\n}\r\n\r\nclass SomeImpl<A> extends Option<A> {\r\n  constructor(public value: A) { \r\n    super() \r\n  }\r\n  isEmpty(): boolean { return false }\r\n  isDefined(): boolean { return true }\r\n  fold<B>(fnone: () => B, fsome: (some: A) => B): B {\r\n    return fsome(this.value)\r\n  }\r\n  forEach<B>(f: (a: A) => void): void {\r\n    f(this.value)\r\n  }\r\n  map<B>(f: (a: A) => B): Option<B> {\r\n    return Option.some<B>(f(this.value))\r\n  }\r\n  flatMap<B>(f: (a: A) => Option<B>): Option<B> {\r\n    return f(this.value)\r\n  }\r\n  getOrElse(f: () => A): A {\r\n    return this.value;\r\n  }\r\n  orElse(f: () => Option<A>): Option<A> {\r\n    return this;\r\n  }\r\n  zip<B>(b: Option<B>): Option<[A, B]> {\r\n    return b.map<[A, B]>(t1 => [this.value, t1])\r\n  }\r\n  toArray(): A[] {\r\n    return [this.value]\r\n  }\r\n  toString(): string {\r\n    return `Some(${this.value})`\r\n  }\r\n}\r\n\r\nexport default Option\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/Option.ts\n **/","export default function(a:any) {\r\n\treturn a === undefined || a === null;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/isNull.ts\n **/","interface JsMap<A> {\r\n  [s:string]:A  \r\n}\r\n\r\nmodule JsMap  {\r\n  export type Entry<T> = {key:string, value:T}\r\n  \r\n  export function create<T>(kps:Entry<T>[]) {\r\n    const res:JsMap<T> = {}\r\n    kps.forEach( kp => res[kp.key] = kp.value);\r\n    return res;\r\n  }\r\n  export function forEach<A>(mp:JsMap<A>, f:(k:string, v:A) => void) {\r\n    Object.keys(mp).forEach( k => f(k, mp[k]) )\r\n  }\r\n  export function map<A,B>(mp:JsMap<A>, f:(k:string, v:A) => B):JsMap<B> {\r\n    const res:JsMap<B> = {}\r\n    JsMap.forEach(mp, (k,v) => res[k] = f(k,v) );\r\n    return res;\r\n  }\r\n  export function merge<A>(mps:JsMap<A>[]):JsMap<A> {\r\n    const res:JsMap<A> = {}\r\n    mps.forEach( mp => JsMap.forEach(mp, (k,v) => res[k] = v ))\r\n    return res;\r\n  }\r\n  export function flatMap<A,B>(mp:JsMap<A>, f:(k:string, v:A) => JsMap<B>):JsMap<B> {\r\n    const res:JsMap<B> = {}\r\n    JsMap.forEach(mp, (k,v) => JsMap.forEach(f(k,v), (k,v) => res[k] = v) );\r\n    return res;\r\n  }\r\n}\r\n\r\nexport default JsMap\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/JsMap.ts\n **/","import {default as Option} from \"./Option\"\r\n\r\nfunction lazy<T>(f:() => T) {\r\n  let value:Option<T> = Option.none<T>();\r\n  return () => {\r\n    return value.fold<T>(\r\n      () => {\r\n        const v:T = f()\r\n        value = Option.some(v)\r\n        return v;\r\n      },\r\n      (v) => v\r\n    )\r\n  }\r\n}\r\n\r\nexport default lazy;\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/lazy.ts\n **/","function fail<T>(msg:string):T {\r\n  throw new Error(msg);\r\n}\r\n\r\nexport default fail\n\n\n/** WEBPACK FOOTER **\n ** ../~/flib/src/lib/fail.ts\n **/","import {Card, Board, Path, Input, GameState, CompetitionState, Player, BriscolaEvent, CompetitionEvent, PlayerEvent} from \"ddd-briscola-model\"\r\nimport CommandID from \"./CommandID\"\r\n\r\nexport abstract class Command {\r\n    type:CommandID\r\n}\r\n\r\nexport class StarApplication extends Command {\r\n  public type = CommandID.startApplication\r\n  constructor() {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class CreatePlayer extends Command {\r\n  public type = CommandID.createPlayer\r\n  constructor(public playerName: string, public password:string) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class PlayerLogon extends Command {\r\n  public type = CommandID.playerLogon\r\n  constructor(public playerName: string, public password:string) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class StartCompetition extends Command {\r\n  public type = CommandID.startCompetition\r\n  constructor() {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class AcceptCompetition extends Command {\r\n  public type = CommandID.acceptCompetition\r\n  constructor(public competition: Path) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class DeclineCompetition extends Command {\r\n  public type = CommandID.declineCompetition\r\n  constructor(public competition: Path) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class PlayCard extends Command {\r\n  public type = CommandID.playCard\r\n  constructor(public card: Card) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class SelectPlayerForCompetition extends Command {\r\n  public type = CommandID.selectPlayerForCompetition\r\n  constructor(public player: Path, public selected:boolean) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class SetCompetitionKind extends Command {\r\n  public type = CommandID.setCompetitionKind\r\n  constructor(public kind: Input.MatchKind) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class SetCompetitionDeadline extends Command {\r\n  public type = CommandID.setCompetitionDeadline\r\n  constructor(public deadlineKind: Input.CompetitionStartDeadline) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class SetCurrentGame extends Command {\r\n  public type = CommandID.setCurrentGame\r\n  constructor(public game: Path) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class DiplayPlayerDeck extends Command {\r\n  public type = CommandID.diplayPlayerDeck\r\n  constructor(public game:Path, public display:boolean) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class UpdateGameState extends Command {\r\n  public type = CommandID.updateGameState\r\n  constructor(public gameState:GameState) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class UpdatePlayersState extends Command {\r\n  public type = CommandID.updatePlayersState\r\n  constructor(public players:Player[]) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class UpdateCompetitionState extends Command {\r\n  public type = CommandID.updateCompetitionState\r\n  constructor(public competitionState:CompetitionState) {\r\n    super()\r\n  }\r\n}\r\n\r\nexport class NewDomainEvent extends Command {\r\n  public type = CommandID.newDomainEvent\r\n  constructor(public event:(BriscolaEvent | CompetitionEvent | PlayerEvent)) {\r\n    super()\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/commands.ts\n **/","import {CurrentPlayer, Player, PlayersCollection, SiteMap, Input} from \"ddd-briscola-model\"\r\n\r\nimport {fetch} from \"rest-fetch\"\r\nimport {Http} from \"./Util\"\r\n\r\nexport class PlayersService {\r\n\tconstructor(private siteMap: SiteMap) {\r\n\t}\r\n\tallPlayers():Promise<Player[]> {\r\n      return fetch(PlayersCollection).from(this.siteMap.players).then( c => c.members )\r\n    }\r\n\tplayer(playerSelf: string):Promise<Player> {\r\n      return fetch(Player).from(playerSelf)\r\n    }\r\n\tcreatePlayer(name: string, password:string):Promise<CurrentPlayer> {\r\n      return Http.POST<Input.Player>(this.siteMap.players, {\r\n        name: name,\r\n        password:password\r\n      }).then( resp => {\r\n          return resp.json().then( pl => fetch(CurrentPlayer).fromObject(pl) )\r\n      })\r\n    }\r\n    logon(name: string, password:string):Promise<CurrentPlayer>  {\r\n      return Http.POST<Input.Player>(this.siteMap.playerLogin, {\r\n        name: name,\r\n        password:password\r\n      }).then( resp => resp.json().then( pl => fetch(CurrentPlayer).fromObject(pl) ) )\r\n    }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/PlayersService.ts\n **/","export * from \"./lib/board\"\r\nexport * from \"./lib/competition\"\r\nexport * from \"./lib/competitionEvents\"\r\nexport * from \"./lib/game\"\r\nexport * from \"./lib/gameEvents\"\r\nexport * from \"./lib/model\"\r\nexport * from \"./lib/player\"\r\nexport * from \"./lib/sitemap\"\r\nexport * from \"./lib/EventAndState\"\r\n\r\nimport * as Input from \"./lib/input\";\r\n\r\nexport {Input}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/index.ts\n **/","import {JsMap, Option} from \"flib\"\r\nimport {GameState, ActiveGameState, FinalGameState} from \"./game\"  \r\nimport {BriscolaEvent} from \"./gameEvents\"\r\nimport {CompetitionState} from \"./competition\"\r\nimport {CompetitionEvent} from \"./competitionEvents\"\r\nimport {Player, PlayerEvent} from \"./player\"\r\nimport * as Input from \"./input\"\r\n\r\nexport module Board {\r\n  export function empty():Board {\r\n    return {\r\n      player:Option.none<Player>(),\r\n      players:[],\r\n      currentGame:Option.none<ActiveGameState>(),\r\n      activeGames:{},\r\n      finishedGames:{},\r\n      engagedCompetitions:{},\r\n      competitionSelectedPlayers:{},\r\n      competitionKind:\"single-match\",\r\n      competitionDeadlineKind: \"all-players\",\r\n      eventsLog:[],\r\n      viewFlag:ViewFlag.normal,\r\n      config:{\r\n        minPlayersNumber:2,\r\n        maxPlayersNumber:8\r\n      }\r\n    }\r\n  }   \r\n}\r\n\r\n/**\r\n  * FIXME fetch from server, put inside SiteMap? \r\n  */\r\nexport interface AppConfig {\r\n  minPlayersNumber:number\r\n  maxPlayersNumber:number\r\n} \r\n\r\nexport enum ViewFlag {\r\n  normal, showPlayerCards  \r\n}\r\n\r\nexport interface Board {\r\n  config:AppConfig  \r\n\r\n  player:Option<Player>\r\n  players:Player[]\r\n  \r\n  currentGame:Option<GameState>\r\n  activeGames:JsMap<ActiveGameState>\r\n  finishedGames:JsMap<FinalGameState>\r\n  \r\n  engagedCompetitions:JsMap<CompetitionState>\r\n  competitionSelectedPlayers:JsMap<boolean>\r\n  competitionKind:Input.MatchKind\r\n  competitionDeadlineKind: Input.CompetitionStartDeadline\r\n  \r\n  eventsLog:(BriscolaEvent | CompetitionEvent | PlayerEvent)[]\r\n  \r\n  viewFlag:ViewFlag\r\n}\r\n\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/board.ts\n **/","import {JsMap, Option} from \"flib\"\r\nimport {Path, DomainEvent, ByKindChoice, byKindChoice} from \"./model\"\r\nimport {Player} from \"./player\"\r\nimport {link, convert, Converter, JsConstructor, SimpleConverter, Selector, ByPropertySelector} from \"rest-fetch\"\r\n\r\nexport enum MatchKindKind {\r\n  singleMatch, numberOfGamesMatchKind, targetPointsMatchKind\r\n}\r\n\r\nexport enum CompetitionStateKind {\r\n  open, dropped, fullfilled\r\n}\r\n\r\nexport enum CompetitionStartDeadlineKind {\r\n  allPlayers, onPlayerCount\r\n}\r\n\r\nexport type CompetitionStartDeadline = AllPlayers | OnPlayerCount\r\n\r\nexport const toCompetitionStartDeadline = Selector.create((wso:{kind:string}) => {\r\n  switch(wso.kind) {\r\n    case CompetitionStartDeadlineKind[CompetitionStartDeadlineKind.allPlayers] : return Option.some(AllPlayers)\r\n    case CompetitionStartDeadlineKind[CompetitionStartDeadlineKind.onPlayerCount] :return Option.some(OnPlayerCount)\r\n    default: throw new Error(`invalid CompetitionStartDeadline : ${JSON.stringify(wso)}`)\r\n  }\r\n})\r\n\r\nconst stringToCompetitionStartDeadlineKind = SimpleConverter.fromString.andThen(Converter.toEnum<CompetitionStartDeadlineKind>(CompetitionStartDeadlineKind, \"CompetitionStartDeadlineKind\"))\r\n\r\nexport class AllPlayers {\r\n  get kind(): CompetitionStartDeadlineKind {\r\n    return CompetitionStartDeadlineKind.allPlayers\r\n  }\r\n}\r\n\r\nexport class OnPlayerCount {\r\n  count: number\r\n  get kind(): CompetitionStartDeadlineKind {\r\n    return CompetitionStartDeadlineKind.onPlayerCount\r\n  }\r\n}\r\n\r\nexport type MatchKind = SingleMatch | NumberOfGamesMatchKind | TargetPointsMatchKind\r\n\r\n\r\nexport const toMatchKind = Selector.create((wso:{kind:string}) => {\r\n  switch(wso.kind) {\r\n    case MatchKindKind[MatchKindKind.singleMatch] : return Option.some(SingleMatch)\r\n    case MatchKindKind[MatchKindKind.numberOfGamesMatchKind] :return Option.some(NumberOfGamesMatchKind)\r\n    case MatchKindKind[MatchKindKind.targetPointsMatchKind] :return Option.some(TargetPointsMatchKind)\r\n    default: return Option.none<JsConstructor<any>>()\r\n  }\r\n}, \"match kind\" )\r\n\r\nconst stringToMatchKindKind = SimpleConverter.fromString.andThen(Converter.toEnum<MatchKindKind>(MatchKindKind, \"MatchKindKind\"))\r\n\r\nexport class SingleMatch {\r\n  get kind(): MatchKindKind {\r\n    return MatchKindKind.singleMatch\r\n  }\r\n}\r\n\r\nexport class NumberOfGamesMatchKind {\r\n  numberOfMatches: number\r\n  get kind(): MatchKindKind {\r\n    return MatchKindKind.numberOfGamesMatchKind\r\n  }\r\n}\r\n\r\nexport class TargetPointsMatchKind {\r\n  winnerPoints: number\r\n  get kind(): MatchKindKind {\r\n    return MatchKindKind.numberOfGamesMatchKind\r\n  }\r\n}\r\n\r\nexport class Competition {\r\n  @link({arrayOf:Player})\r\n  players: Player[]\r\n\r\n  @convert(toMatchKind)\r\n  kind: MatchKind\r\n\r\n  @convert(toCompetitionStartDeadline)\r\n  deadline: CompetitionStartDeadline\r\n}\r\n\r\nconst stringToCompetitionStateKind = SimpleConverter.fromString.andThen(Converter.toEnum<CompetitionStateKind>(CompetitionStateKind, \"CompetitionStateKind\"))\r\n\r\nexport class CompetitionState {\r\n  self: Path\r\n\r\n  @convert(stringToCompetitionStateKind)\r\n  kind: CompetitionStateKind\r\n\r\n  @convert()\r\n  competition: Competition\r\n\r\n  @link({arrayOf:Player})\r\n  acceptingPlayers: Player[]\r\n  @link({arrayOf:Player})\r\n  decliningPlayers: Player[]\r\n\r\n  @convert(SimpleConverter.optional(SimpleConverter.fromString))\r\n  accept: Option<Path>\r\n  @convert(SimpleConverter.optional(SimpleConverter.fromString))\r\n  decline: Option<Path>\r\n}\r\n\r\nexport const competitionStateChoice = byKindChoice(() => [{\r\n  key:CompetitionStateKind[CompetitionStateKind.dropped],\r\n  value:CompetitionState\r\n}, {\r\n  key:CompetitionStateKind[CompetitionStateKind.fullfilled],\r\n  value:CompetitionState\r\n}, {\r\n  key:CompetitionStateKind[CompetitionStateKind.open],\r\n  value:CompetitionState\r\n}], \"competion state\")\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/competition.ts\n **/","import {Option, JsMap} from \"flib\"\r\nimport {JsConstructor, Selector, ByPropertySelector} from \"rest-fetch\"\r\n\r\nexport type Path = string\r\n\r\nexport interface DomainEvent {\r\n  eventName: string\r\n}\r\n\r\nexport type ByKindChoice = JsMap.Entry<JsConstructor<any>>\r\n\r\nexport function byKindChoice(bks:() => ByKindChoice[], desc:string):ByPropertySelector {\r\n  const mp = JsMap.create(bks())\r\n  return ByPropertySelector.fromEntries( (wso:{ kind:string }) => wso.kind, bks, desc)\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/model.ts\n **/","export {link} from \"./lib/Link\"\r\nexport {fetch, fetchChoose} from \"./lib/Fetch\"\r\nexport {JsConstructor} from \"./lib/types\"\r\n\r\nimport * as Converter from \"./lib/Converter\"\r\nexport {Converter as Converter}\r\n\r\nexport {convert} from \"./lib/Converter\"\r\n\r\nexport {HttpCache, ByUrlCache} from \"./lib/cache\"\r\n\r\nexport {SimpleConverter} from \"./lib/SimpleConverter\"\r\nexport {Selector, ByPropertySelector} from \"./lib/Selector\"\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/index.ts\n **/","import {JsConstructor, MappingType, isArrayType, isOptionType} from \"./types\"\r\nimport {TypeExpr} from \"./TypeExpr\"\r\nimport {PropertyName, PropertyHolder, getOrCreateLinksMeta, addObjectMapping} from \"./Meta\"\r\nimport {lazy, isNull} from \"flib\"\r\n\r\nexport class Link {\r\n  constructor(public resultType: TypeExpr, public targetProperty:PropertyName) {\r\n    if (isNull(resultType)) {\r\n      throw new Error(\"undefined resultType\")\r\n    }\r\n    if (isNull(targetProperty)) {\r\n      throw new Error(\"undefined targetProperty\")\r\n    }\r\n  }\r\n}\r\n\r\nfunction getMappingType(typ:MappingType | PropertyHolder, propType:JsConstructor<any>, errorPrefix:() => string): TypeExpr {\r\n  const typIsNull = isNull(typ)\r\n\r\n  const propTypeIsArray  = isArrayType(propType)\r\n  const typIsArrayMappingType = MappingType.isArrayMappingType(typ)\r\n  if (propTypeIsArray && !typIsArrayMappingType) throw new Error(`${errorPrefix()}: Array property with undefined 'arrayOf' property`)\r\n  else if (!propTypeIsArray && typIsArrayMappingType) throw new Error(`${errorPrefix()}: with link of array type a property of type 'Array' is required`)\r\n\r\n  const propTypeIsOption = isOptionType(propType)\r\n  const typIsOptionMappingType = MappingType.isOptionMappingType(typ)\r\n  if (propTypeIsOption && !typIsOptionMappingType) throw new Error(`${errorPrefix()}: Option property with undefined 'optionOf' property`)\r\n  else if (!propTypeIsOption && typIsOptionMappingType) throw new Error(`${errorPrefix()}: with link of option type a property of type 'Option' is required`)\r\n\r\n  const typIsMappingType = MappingType.isMappingType(typ)\r\n  const linkType:MappingType = typIsMappingType ? <MappingType>typ : propType;\r\n\r\n  if (isNull(linkType)) {\r\n    throw new Error(`${errorPrefix()} : could not infer type`)\r\n  }\r\n  let linkJsTyp:TypeExpr\r\n  try {\r\n      linkJsTyp = TypeExpr.fromMappingType(linkType)\r\n  } catch(e) {\r\n    throw new Error(`${errorPrefix()} : ${e.message}`)\r\n  }\r\n  return linkJsTyp;\r\n}\r\n\r\n\r\nexport function link(typ?: MappingType | PropertyHolder, opts1?:PropertyHolder): (target: any, key: string | symbol) => void {\r\n  return (target: any, key: string | symbol) => {\r\n    const propType = Reflect.getMetadata(\"design:type\", target, key)\r\n    const errorPrefix = lazy(() => `Error on property '${key}' in class '${target.constructor.name}'`)\r\n    const linkJsTyp = getMappingType(typ, propType, errorPrefix)\r\n    const objLinks = getOrCreateLinksMeta(target.constructor)\r\n    const targetProperty = (opts1 && opts1.property) || (typ && typ[\"property\"]) || key;\r\n\r\n    addObjectMapping(objLinks, targetProperty, new Link(linkJsTyp, key))\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/Link.ts\n **/","import {SimpleConverter} from \"./SimpleConverter\"\r\nimport {Selector} from \"./Selector\"\r\nimport {isNull, Option} from \"flib\"\r\n\r\nexport interface JsConstructor<T> extends Function {\r\n  new (): T\r\n  name?:string\r\n}\r\n\r\nexport interface ArrayMappingType {\r\n  arrayOf: MappingType\r\n}\r\n\r\nexport interface OptionMappingType {\r\n  optionOf: MappingType\r\n}\r\n\r\nexport class GetPropertyUrl<B> {\r\n  constructor(public convert: (a: Option<string>) => B) {\r\n  }\r\n  andThen<C>(f: (v: B) => C): GetPropertyUrl<C> {\r\n    return new GetPropertyUrl<C>(a => f(this.convert(a)))\r\n  }\r\n}\r\n\r\nexport type SelectorMappingType = JsConstructor<any> | ArrayMappingType | OptionMappingType | SimpleConverter<any, any> | GetPropertyUrl<any>\r\nexport type MappingType = SelectorMappingType | Selector\r\n\r\nexport module MappingType {\r\n  export function isMappingType(t:any):boolean {\r\n    const notIsPrim = !isPrimitiveType(t)\r\n    return !isNull(t) && notIsPrim && (\r\n      (typeof t === \"function\") ||\r\n      (t instanceof SimpleConverter) || (t instanceof Selector) || (t instanceof GetPropertyUrl) ||\r\n      isArrayMappingType(t) || isOptionMappingType(t)\r\n    )\r\n  }\r\n\r\n  function trapBoolean(f:() => boolean):boolean {\r\n    try {\r\n      return f()\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function hasMappingTypeProperty(a:any, property:string, desc:string) {\r\n    if (!isNull(a) && a.hasOwnProperty(property)) {\r\n      const itmType = a[property]\r\n      const itmIsJsTyp = isMappingType(itmType)\r\n      //if (!itmIsJsTyp) throw new Error(`${desc} is invalid :${itmType}`)\r\n      return itmIsJsTyp;\r\n    } else\r\n      return false\r\n  }\r\n\r\n  export function isArrayMappingType(a:any) {\r\n    return hasMappingTypeProperty(a, \"arrayOf\", \"arrayOf parameter\")\r\n  }\r\n\r\n  export function isOptionMappingType(a:any) {\r\n    return hasMappingTypeProperty(a, \"optionOf\", \"optionOf parameter\")\r\n  }\r\n\r\n  export function fold<R>(typ: (t: JsConstructor<any>) => R,\r\n    simple: (cnv: SimpleConverter<any, any>) => R,\r\n    array: (t: ArrayMappingType) => R,\r\n    option: (t: OptionMappingType) => R,\r\n    choose: (t: Selector) => R,\r\n    propertyUrl: (t: GetPropertyUrl<any>) => R\r\n  ):(t: MappingType) => R {\r\n    return (t: MappingType) => {\r\n      if (isNull(t)) throw new Error(`undefined MappingType `)\r\n      if (t instanceof SimpleConverter) return simple(t)\r\n      else if (t instanceof Selector) return choose(t)\r\n      else if (t instanceof GetPropertyUrl) return propertyUrl(t)\r\n      else if (typeof t === \"function\") {\r\n        if (!isPrimitiveType(t)) return typ(<any>t)\r\n        else throw new Error(`invalid constructor type ${t}`)\r\n      } else if (isArrayMappingType(t)) return array(<any>t)\r\n      else if (isOptionMappingType(t)) return option(<any>t)\r\n      else throw new Error(`unrecognized MappingType ${JSON.stringify(t)}`)\r\n    }\r\n  }\r\n\r\n  export const description:(typ:MappingType) => string =\r\n    fold<string>(\r\n      (ct) => `object ${ct.name}`,\r\n      (simpleCnv) => `simple converter ${simpleCnv.description}`,\r\n      (arryCnv) => `array of ${description(arryCnv.arrayOf)}`,\r\n      (optionCnv) => `option of ${description(optionCnv.optionOf)}`,\r\n      (choose) => `choice ${choose.description}`,\r\n      (propUrl) => \"Property Url\")\r\n}\r\n\r\n\r\nexport function isPrimitiveType(a:any):boolean {\r\n    return a === String || a === Number || a === Boolean\r\n  }\r\n\r\nfunction eq(a,b){\r\n  return a === b;\r\n}\r\n\r\nexport function isOptionType(a:JsConstructor<any>):boolean {\r\n  return eq(a, Option)\r\n}\r\n\r\nexport function isArrayType(a:JsConstructor<any>):boolean {\r\n  return eq(a, Array)\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/types.ts\n **/","import {Option, isNull} from \"flib\"\r\n\r\nexport class SimpleConverter<A,B> implements SimpleConverter<A,B> {\r\n\r\n  constructor(public convert:(v:A) => B, public description?:string) {\r\n  }\r\n  andThen<C>(f:(v:B) => C):SimpleConverter<A,C> {\r\n    return new SimpleConverter<A,C>( a => f(this.convert(a)) )\r\n  }\r\n  compose<C>(f:(v:C) => A):SimpleConverter<C,B> {\r\n    return new SimpleConverter<C,B>( a => this.convert(f(a)) )\r\n  }\r\n}\r\n\r\nclass FromTypeConverter<T> extends SimpleConverter<any,T> {\r\n  constructor(pred:(a:any) => boolean, public description:string) {\r\n    super( a => {\r\n      if (pred(a)) return <T>a;\r\n      else throw new Error(`error, ${a} is not a ${description}`)\r\n    })\r\n  }\r\n}\r\n\r\nexport module SimpleConverter {\r\n\r\n  export const identity = new SimpleConverter<any,any>(id => id, \"identity\")\r\n\r\n  export function fromTypeOf<T>(typeString:string):SimpleConverter<any, T>  {\r\n    return new FromTypeConverter<T>(a => typeof a === typeString, typeString)\r\n  }\r\n\r\n  export const fromString:SimpleConverter<any, string> = fromTypeOf<string>(\"string\")\r\n  export const fromNumber:SimpleConverter<any, number> = fromTypeOf<number>(\"number\")\r\n  export const fromBoolean:SimpleConverter<any, boolean> = fromTypeOf<boolean>(\"boolean\")\r\n  export const fromUndefined:SimpleConverter<any, any> = fromTypeOf<any>(\"undefined\")\r\n\r\n  export function optional<A,B>(cnv:SimpleConverter<A,B>):SimpleConverter<A,Option<B>> {\r\n    return new SimpleConverter<A,Option<B>>( a => {\r\n      if (isNull(a)) return Option.none<B>()\r\n      else return Option.option(cnv.convert(a))\r\n    })\r\n  }\r\n\r\n  export function fromArray<T>(c:SimpleConverter<any, T>):SimpleConverter<any, T[]> {\r\n    const desc = isNull(c.description) ? \"array\" : `array of ${c.description}`\r\n    return new SimpleConverter<any, T[]>( a => {\r\n      if (Array.isArray(a)) return a.map(i => c.convert(i));\r\n      else throw  new Error(`error, ${a} is not a ${desc}`)\r\n    }, desc)\r\n  }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/SimpleConverter.ts\n **/","import {SelectorMappingType} from \"./types\"\r\nimport {lazy, Arrays, Option, JsMap, isNull} from \"flib\"\r\n\r\nexport class Selector implements Selector {\r\n  constructor(public convert:(a:any) => Option<SelectorMappingType>, public description?:string) {\r\n  }\r\n}\r\n\r\nexport module Selector {\r\n\r\n  export function create(f:(a:any) => Option<SelectorMappingType>, description?:string):Selector {\r\n    return new Selector(f, description)\r\n  }\r\n\r\n  export function value(ct:SelectorMappingType):Selector {\r\n    return create(a => Option.some(ct))\r\n  }\r\n\r\n  export function byPropertyExists(entries:JsMap.Entry<SelectorMappingType>[], description?:string) {\r\n    return new Selector(\r\n      ws => Arrays.find(entries, e => !isNull(ws[e.key])).map(e => e.value),\r\n      description)\r\n  }\r\n\r\n}\r\n\r\nexport class ByPropertySelector extends Selector {\r\n  constructor(prop:(a:any) => string, private jsMap:() => JsMap<SelectorMappingType>, desc:string) {\r\n    super( (a) => {\r\n      const pv = prop(a)\r\n      return Option.option(jsMap()[pv]);\r\n    }, desc )\r\n  }\r\n  contains(nm:string):boolean {\r\n    return !isNull(this.jsMap()[nm])\r\n  }\r\n}\r\n\r\nexport module ByPropertySelector {\r\n\r\n  export function fromEntries(prop:(a:any) => string, bks:() => JsMap.Entry<SelectorMappingType>[], desc:string) {\r\n    const mp = lazy( () => JsMap.create(bks()))\r\n    return new ByPropertySelector(prop, mp, desc)\r\n  }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/Selector.ts\n **/","import {JsMap, Option, Arrays} from \"flib\"\r\nimport {JsConstructor, MappingType, GetPropertyUrl} from \"./types\"\r\nimport {SimpleConverter} from \"./SimpleConverter\"\r\nimport {Selector} from \"./Selector\"\r\n\r\nexport enum TypeExprKind {\r\n  constructorFunction = 0,\r\n  simpleConverter = 1,\r\n  array = 2,\r\n  option = 3,\r\n  choice = 4,\r\n  getPropertyUrl = 5\r\n}\r\n\r\nexport type LeafTypeExpr = JsConstructor<any> | SimpleConverter<any,any> | Selector | GetPropertyUrl<any>\r\n\r\nexport type ExtTypeExpr = LeafTypeExpr | TypeExpr\r\n\r\nexport class TypeExpr {\r\n  constructor(public kind:TypeExprKind, public folding:string, public leaf:LeafTypeExpr) {\r\n\r\n  }\r\n  equalTo(b:TypeExpr):boolean {\r\n    return this.kind === b.kind && this.folding === b.folding && this.leaf === b.leaf\r\n  }\r\n  get value():ExtTypeExpr {\r\n    if (this.folding.length === 0) return this.leaf\r\n    else {\r\n      const rest = this.folding.substr(1)\r\n      if (rest.length > 0) {\r\n        const hd = rest.charAt(0)\r\n        switch(hd) {\r\n          case \"a\": return new TypeExpr(TypeExprKind.array, rest, this.leaf)\r\n          case \"o\": return new TypeExpr(TypeExprKind.option, rest, this.leaf)\r\n          default: throw new Error(\"invalid folding \"+hd)\r\n        }\r\n      } else {\r\n        return TypeExpr.fromMappingType(this.leaf)\r\n      }\r\n    }\r\n  }\r\n  get description():string {\r\n    return TypeExpr.fold(\r\n      (ct) => LeafTypeExpr.description(ct),\r\n      (cnv) => LeafTypeExpr.description(cnv),\r\n      () => {\r\n        const v = this.value\r\n        if (v instanceof TypeExpr) return `Array(${v.description})`;\r\n        else return LeafTypeExpr.description(<any>v)\r\n      },\r\n      () => {\r\n        const v = this.value\r\n        if (v instanceof TypeExpr) return `Option(${v.description})`;\r\n        else return LeafTypeExpr.description(<any>v)\r\n      },\r\n      (chs) => \"Selector\",\r\n      (pu) => LeafTypeExpr.description(pu)\r\n    )(this)\r\n  }\r\n}\r\n\r\nexport module LeafTypeExpr {\r\n\r\n  export function fold<R>(typ: (t: JsConstructor<any>) => R,\r\n    simple: (cnv: SimpleConverter<any, any>) => R,\r\n    choose: (cnv:Selector) => R,\r\n    propertyUrl: (t: GetPropertyUrl<any>) => R\r\n  ):(t: LeafTypeExpr) => R {\r\n    return t => {\r\n      if (t instanceof SimpleConverter) return simple(t)\r\n      else if (t instanceof Selector) {\r\n        return choose(t)\r\n      } else if (t instanceof GetPropertyUrl) return propertyUrl(t)\r\n      else if (typeof t === \"function\") return typ(<any>t)\r\n      else throw new Error(\"Invalid Leaf Type Expr \"+t)\r\n    }\r\n  }\r\n\r\n  export function description(l:LeafTypeExpr):string {\r\n    return fold(\r\n      (ct) => ct.name,\r\n      (cnv) => cnv.description || \"<SimpleConverter>\",\r\n      (chs) => chs.description || \"<Selector>\",\r\n      () => \"PropertyUrl\"\r\n    )(l)\r\n  }\r\n\r\n}\r\n\r\nexport module TypeExpr {\r\n\r\n  export function create(ct:JsConstructor<any>) {\r\n    return new TypeExpr(TypeExprKind.constructorFunction, \"\", ct)\r\n  }\r\n\r\n  export const fromMappingType:(a:MappingType) => TypeExpr = MappingType.fold(\r\n    (ct) => new TypeExpr(TypeExprKind.constructorFunction, \"\", ct),\r\n    (cnv) => new TypeExpr(TypeExprKind.simpleConverter, \"\", cnv),\r\n    (arr) => {\r\n      const itmTypeExpr = fromMappingType(arr.arrayOf)\r\n      return new TypeExpr(TypeExprKind.array, `a${itmTypeExpr.folding}`, itmTypeExpr.leaf)\r\n    },\r\n    (opt) => {\r\n      const itmTypeExpr = fromMappingType(opt.optionOf)\r\n      return new TypeExpr(TypeExprKind.option, `o${itmTypeExpr.folding}`, itmTypeExpr.leaf)\r\n    },\r\n    (chs) => new TypeExpr(TypeExprKind.choice, \"\", chs),\r\n    (gpu) => new TypeExpr(TypeExprKind.getPropertyUrl, \"\", gpu)\r\n  )\r\n\r\n export function fold<R>(typ: (t: JsConstructor<any>) => R,\r\n    simple: (cnv: SimpleConverter<any, any>) => R,\r\n    array: (t: TypeExpr) => R,\r\n    option: (t: TypeExpr) => R,\r\n    choose: (f:(t: any) => Option<TypeExpr>) => R,\r\n    propertyUrl: (t: GetPropertyUrl<any>) => R\r\n  ):(t: TypeExpr) => R {\r\n    return t => {\r\n      switch(t.kind) {\r\n        case TypeExprKind.constructorFunction: return typ(<any>t.value)\r\n        case TypeExprKind.simpleConverter: return simple(<any>t.value)\r\n        case TypeExprKind.array: return array(t)\r\n        case TypeExprKind.option: return option(t)\r\n        case TypeExprKind.choice:\r\n          const chCnv = <Selector>t.value\r\n          const f:(ws:any) => Option<TypeExpr> = (ws) =>\r\n            chCnv.convert(ws).map( t => fromMappingType(t))\r\n          return choose(f)\r\n        case TypeExprKind.getPropertyUrl: return propertyUrl(<any>t.value)\r\n      }\r\n    }\r\n  }\r\n\r\n  export function foldExt<R>(typ: (t: JsConstructor<any>) => R,\r\n    simple: (cnv: SimpleConverter<any, any>) => R,\r\n    array: (t: TypeExpr) => R,\r\n    option: (t: TypeExpr) => R,\r\n    choose: (f:(t: any) => Option<TypeExpr>) => R,\r\n    propertyUrl: (t: GetPropertyUrl<any>) => R\r\n  ):(t:ExtTypeExpr) => R {\r\n    return t => {\r\n      if (t instanceof TypeExpr) return fold(typ, simple, array, option, choose, propertyUrl)(t)\r\n      else LeafTypeExpr.fold(\r\n        (ct) => typ(ct),\r\n        (cnv) => simple(cnv),\r\n        (chs) => {\r\n          const chCnv = t\r\n          const f:(ws:any) => Option<TypeExpr> = (ws) => chs.convert(ws).map( t => TypeExpr.fromMappingType(t))\r\n          return choose(f)\r\n        },\r\n        (pu) => propertyUrl(pu)\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/TypeExpr.ts\n **/","import {Option, JsMap} from \"flib\"\r\nimport {Link} from \"./Link\"\r\nimport {Converter} from \"./Converter\"\r\nimport {EntriesMap} from \"./EntriesMap\"\r\nimport {JsConstructor} from \"./types\"\r\n\r\nexport type ObjectMapping = JsMap<(Link | Converter)[]>\r\n\r\nexport type PropertyName = string | symbol;\r\n\r\nexport interface PropertyHolder {\r\n  property?:string\r\n}\r\n\r\nexport interface ObjectFetcher {\r\n  <T>(typ: JsConstructor<T>, wso:any):Promise<T>\r\n}\r\n\r\nexport class MetaLinksMap {\r\n  linksMeta:EntriesMap<JsConstructor<any>, ObjectMapping>\r\n  constructor() {\r\n    this.linksMeta = new EntriesMap<JsConstructor<any>, ObjectMapping>( (a,b) => a === b )\r\n  }\r\n  get(ct:JsConstructor<any>):Option<ObjectMapping> {\r\n    return this.linksMeta.get(ct.name, ct)\r\n  }\r\n  store(ct:JsConstructor<any>, v:ObjectMapping):void {\r\n    this.linksMeta.store(ct.name, ct, v)\r\n  }\r\n}\r\n\r\n\r\nexport module ExternalStrategy {\r\n  /**\r\n  * FIXME\r\n  * refactor folling methods\r\n  */\r\n  const linksMeta = new MetaLinksMap()\r\n\r\n  function copyObjectMapping(o:ObjectMapping):ObjectMapping {\r\n    const res:ObjectMapping = {}\r\n    Object.keys(o).forEach( k => res[k] = o[k].map(c => c) )\r\n    return res;\r\n  }\r\n\r\n  function superClassConstructor(c:JsConstructor<any>):JsConstructor<any> {\r\n    return c.prototype.__proto__.constructor;\r\n  }\r\n\r\n  export function getLinksMeta<T>(c:JsConstructor<T>):Option<ObjectMapping> {\r\n    return linksMeta.get(c)\r\n  }\r\n\r\n\r\n  export function getOrCreateLinksMeta<T>(c:JsConstructor<T>):ObjectMapping {\r\n    return linksMeta.get(c).fold<ObjectMapping>(\r\n      () => {\r\n        const sup = getLinksMeta(superClassConstructor(c))\r\n        const lnks:ObjectMapping = sup.map( sup => copyObjectMapping(sup)).getOrElse(() => { return {} })\r\n        linksMeta.store(c, lnks)\r\n        return lnks\r\n      },\r\n      (v) => v\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport function addObjectMapping(mp:ObjectMapping, k:PropertyName, v:Link | Converter) {\r\n  Option.option(mp[k]).fold<void>(\r\n    () => mp[k] = [v],\r\n    (entries) => entries.push(v)\r\n  )\r\n}\r\n\r\nexport const getLinksMeta = ExternalStrategy.getLinksMeta\r\nexport const getOrCreateLinksMeta = ExternalStrategy.getOrCreateLinksMeta\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/Meta.ts\n **/","import {Arrays, JsMap, Option} from \"flib\"\r\n\r\nexport interface Entry<K,V> {\r\n  key:K\r\n  value:V\r\n}\r\n\r\nexport class EntriesMap<K,V> {\r\n  cache:JsMap<Entry<K,V>[]> = {}\r\n  constructor(private keyPredicate:(a:K, b:K) => boolean) {\r\n  }\r\n  get(ks:string, k:K):Option<V> {\r\n    return Option.option(this.cache[ks]).flatMap( entries => {\r\n      return Arrays.find<Entry<K,V>>(entries, e => this.keyPredicate(e.key, k) )\r\n    } ).map( e => e.value )\r\n  }\r\n  store<T>(ks:string, k:K, v:V):void {\r\n    Option.option<Entry<K,V>[]>(this.cache[ks]).fold(\r\n      () => { this.cache[ks] = [{key:k, value:v}] },\r\n      (entries) => {\r\n         Arrays.find<Entry<K,V>>(entries, e => this.keyPredicate(e.key, k)).fold<void>(\r\n          () => entries.push({key:k, value:v}),\r\n          (oldValue) => {\r\n            throw new Error(`replacing previous entry ${ks} key ${k}`)\r\n          }\r\n        )\r\n      }\r\n    )\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/EntriesMap.ts\n **/","import {JsMap, Option, isNull, lazy} from \"flib\"\r\nimport {ResponseReader, jsonResponseReader} from \"./ResponseReader\"\r\nimport {RequestFactory, createRequestFactory} from \"./RequestFactory\"\r\nimport {HttpCache, ByUrlCache} from \"./cache\"\r\nimport {ObjectFetcher, getLinksMeta} from \"./Meta\"\r\nimport {Link} from \"./Link\"\r\nimport {Converter} from \"./Converter\"\r\nimport {ResourceRetriever, ArrayResourceRetriever} from \"./Retriever\"\r\nimport {JsConstructor, MappingType, isOptionType} from \"./types\"\r\nimport {trap} from \"./Util\"\r\nimport {InternalConversionTo, jsTypeToInternalConversion} from \"./InternalConversion\"\r\nimport {Selector} from \"./Selector\"\r\nimport {ObjectsCache} from \"./ObjectsCache\"\r\nimport {TypeExpr, ExtTypeExpr, TypeExprKind} from \"./TypeExpr\"\r\n\r\nexport interface FetchOpts {\r\n  requestFactory?: RequestFactory\r\n  httpCache?: () => HttpCache\r\n  responseReader?:ResponseReader\r\n}\r\n\r\ninterface Context {\r\n  requestFactory: RequestFactory\r\n  httpCache: HttpCache\r\n  cache: ObjectsCache\r\n  responseReader:ResponseReader\r\n\r\n  promisesToWait: Promise<any>[]\r\n}\r\n\r\nfunction createResourceRetriever(typ:MappingType, opts?:FetchOpts):ResourceRetrieverImpl {\r\n  return new ResourceRetrieverImpl(typ, createContext(opts))\r\n}\r\n\r\nexport function fetch<T>(typ:JsConstructor<T>, opts?:FetchOpts):ResourceRetriever<T> {\r\n  return createResourceRetriever(typ, opts)\r\n}\r\n\r\nexport function fetchArray<T>(typ:JsConstructor<T>, opts?:FetchOpts):ArrayResourceRetriever<T[]> {\r\n  return createResourceRetriever({ arrayOf:typ }, opts)\r\n}\r\n\r\nexport function fetchChoose(ch:Selector, opts?:FetchOpts):ResourceRetriever<any> {\r\n  return createResourceRetriever(ch, opts)\r\n}\r\n\r\nfunction createContext(opts?: FetchOpts):Context {\r\n  const requestFactory = (opts && opts.requestFactory) || createRequestFactory({ method: \"GET\" })\r\n  const httpCache = (opts && opts.httpCache && opts.httpCache()) || new ByUrlCache()\r\n  const cache = new ObjectsCache()\r\n  const responseReader = (opts && opts.responseReader) || jsonResponseReader\r\n\r\n  const context: Context = { cache: cache, httpCache: httpCache, requestFactory: requestFactory, responseReader:responseReader, promisesToWait: [] }\r\n  return context;\r\n}\r\n\r\nfunction objectFetcherImpl<T>(context:Context) {\r\n  return <T>(typ: JsConstructor<T>, wso:any):Promise<T> => {\r\n    return fetchProperties(context, typ, wso)\r\n  }\r\n}\r\n\r\nclass ResourceRetrieverImpl implements ResourceRetriever<any> {\r\n  objectFetcher:() => ObjectFetcher\r\n  cnv:() => InternalConversionTo<any>\r\n  isArrayMappingType:() => boolean\r\n  private typeExpr:() => TypeExpr\r\n  constructor(private typ:MappingType, private context:Context) {\r\n    this.objectFetcher = lazy(() => objectFetcherImpl(this.context))\r\n    this.typeExpr = lazy(() => TypeExpr.fromMappingType(this.typ))\r\n    this.cnv = lazy(() => jsTypeToInternalConversion(this.typ))\r\n    this.isArrayMappingType = lazy(() => this.typeExpr().kind === TypeExprKind.array)\r\n  }\r\n  private waitPendingPromisesAndReturn(v:any):Promise<any> {\r\n    return Promise.all(this.context.promisesToWait).then(u => Promise.resolve(v))\r\n  }\r\n  fromObject(wso:any): Promise<any> {\r\n    return this.cnv()(wso, this.objectFetcher(), undefined).then(v => this.waitPendingPromisesAndReturn(v))\r\n  }\r\n  fromArray(wsos:any[]): Promise<any[]> {\r\n    if (this.isArrayMappingType()) {\r\n      return this.cnv()(wsos, this.objectFetcher(), undefined).then(v => this.waitPendingPromisesAndReturn(v))\r\n    } else {\r\n      return new ResourceRetrieverImpl({arrayOf:this.typ}, this.context).fromArray(wsos)\r\n    }\r\n  }\r\n  from(url:string, req?: RequestInit):Promise<any> {\r\n    if (this.isArrayMappingType()) {\r\n      return Promise.reject(new Error(`trying to get an ArrayMappingType from ${url}`))\r\n    } else {\r\n      const rq = req !== undefined ? new Request(url, req) : this.context.requestFactory(url);\r\n      let res:any = undefined\r\n      return fetchLink(url, this.context,  this.typeExpr(), (v) => res = v, undefined).then(v => this.waitPendingPromisesAndReturn(res))\r\n    }\r\n  }\r\n  fromUrls(urls:string[]):Promise<any> {\r\n    if (this.isArrayMappingType()) {\r\n      let res = undefined\r\n      return fetchLink(urls, this.context, this.typeExpr(), (v) => res = v, undefined).then(v => this.waitPendingPromisesAndReturn(res))\r\n    } else {\r\n      return new ResourceRetrieverImpl({arrayOf:this.typ}, this.context).fromUrls(urls)\r\n    }\r\n  }\r\n}\r\n\r\nfunction httpFetch(req: Request, httpCache: HttpCache, responseReader:ResponseReader): Promise<any> {\r\n  return httpCache.get(req).fold(\r\n    () => {\r\n      const r = window.fetch(req.url, req).then(resp => responseReader(resp, req))\r\n      httpCache.store(req, r)\r\n      return r;\r\n    },\r\n    (v) => v)\r\n}\r\n\r\ninterface CallbackFetcher<T> {\r\n  fetch(req: Request, callback: (v: T) => void): Promise<any>\r\n}\r\n\r\nfunction isWriteable(obj:any, prop:string | symbol):boolean {\r\n  const d = Object.getOwnPropertyDescriptor(obj, <any>prop);\r\n  return d === undefined || d.writable === true\r\n}\r\n\r\nfunction setProperty(obj:any, prop:string | symbol, v:any):void {\r\n  try {\r\n    obj[prop] = v\r\n  } catch(e) {\r\n  }\r\n}\r\n\r\nfunction fetchProperties<T>(context: Context, typ: JsConstructor<T>, wsobj: any, parentUrl?:string):Promise<T> {\r\n\r\n  const links: JsMap<(Link | Converter)[]> =  getLinksMeta(typ).getOrElse( () => { return {} })\r\n  const r = new typ()\r\n\r\n  const mergedKeys = Object.keys(JsMap.merge<any>([wsobj, links]))\r\n  const promises: Promise<any>[] = mergedKeys.map(k => {\r\n    const v = wsobj[k]\r\n    const lnks = links[k]\r\n\r\n    if (isNull(v) && !isNull(lnks)) {\r\n\r\n      const proms:Promise<any>[] = lnks.map( linkOrCnv => {\r\n        if (isWriteable(r, linkOrCnv.targetProperty)) {\r\n          if (linkOrCnv instanceof Converter) {\r\n\r\n            const errMessage = (err:Error) => `property ${k} of ${typ.name} is undefined, error: ${err.message}`\r\n\r\n            return trap(() => linkOrCnv.conversion(undefined, objectFetcherImpl(context), Option.option(parentUrl)), errMessage).then( v =>\r\n              setProperty(r, linkOrCnv.targetProperty, v)\r\n            )\r\n\r\n          } else if (linkOrCnv instanceof Link) {\r\n\r\n            const isOption = linkOrCnv.resultType.kind === TypeExprKind.option || isOptionType(<any>linkOrCnv.resultType.value);\r\n            if (isOption) {\r\n              setProperty(r, linkOrCnv.targetProperty, Option.none())\r\n              return Promise.resolve()\r\n            } else {\r\n              return Promise.reject(new Error(`link property ${k} of ${typ.name} is undefined`))\r\n            }\r\n          }\r\n        } else {\r\n          return Promise.resolve()\r\n        }\r\n      })\r\n      return (proms.length === 0) ? Promise.resolve() : Promise.all(proms)\r\n\r\n    } else {\r\n\r\n      return Option.option(lnks).fold<Promise<any>>(\r\n        () => {\r\n          if (isWriteable(r,k)) setProperty(r, k, v);\r\n          return Promise.resolve()\r\n        },\r\n        (lnks) => {\r\n          const proms:Promise<any>[] = lnks.map( l => {\r\n            if (isWriteable(r,k)) return fetchProperty(context, typ.name, k, v, parentUrl, l, v => { setProperty(r, l.targetProperty, v) })\r\n            else return Promise.resolve();\r\n          })\r\n          return Promise.all(proms)\r\n        }\r\n      )\r\n    }\r\n  })\r\n\r\n  return Promise.all(promises).then(v => r)\r\n}\r\n\r\n\r\nfunction fetchObject<T>(url:string, context:Context, resultType:JsConstructor<T>, callback:(a:T) => void):Promise<void> {\r\n  return fetchInternal(context, resultType).fetch(context.requestFactory(url), callback)\r\n}\r\n\r\nfunction fetchUrl(url:string, context:Context):Promise<any> {\r\n  return httpFetch(context.requestFactory(url), context.httpCache, context.responseReader)\r\n}\r\n\r\nfunction fetchLink(url:string | string[], context:Context, jsType:ExtTypeExpr, callback:(a:any) => void, propUrl:string):Promise<void> {\r\n  const expectingArrayUrl = lazy(() => Promise.reject(new Error(`expecting an array but got ${url}`)))\r\n  const expectingObjectUrl = lazy(() => Promise.reject(new Error(`expecting an string but got ${url}`)))\r\n\r\n  return TypeExpr.foldExt<Promise<void>>(\r\n    (resultType) => typeof url === \"string\" ? fetchObject(url, context, resultType, callback) : expectingObjectUrl(),\r\n    (cnv) => {\r\n      if (typeof url === \"string\") {\r\n\r\n        const prom = fetchUrl(url, context).then( v => trap( () => {\r\n          const r = cnv.convert(v)\r\n          callback(r)\r\n          return r;\r\n        }))\r\n\r\n        return withObjectCache(url, TypeExpr.fromMappingType(cnv), () => prom, context, callback )\r\n\r\n      } else {\r\n        return expectingObjectUrl()\r\n      }\r\n    },\r\n    (arr) => {\r\n      if (!Array.isArray(url)) {\r\n        return expectingArrayUrl()\r\n      } else {\r\n        const res:any[] = []\r\n        const proms = url.map( (u, idx) => {\r\n          const p1 = fetchLink(u, context, arr.value, a => { res[idx] = a }, propUrl)\r\n          return p1.then( i => Promise.resolve(i), err => Promise.reject(new Error(`error at index ${idx}, error:${err.message}`) ))\r\n        })\r\n        return Promise.all( proms ).then( u => callback(res) )\r\n      }\r\n    },\r\n    (opt):Promise<void> => {\r\n      if (isNull(url)) {\r\n        callback(Option.none())\r\n        return Promise.resolve<void>()\r\n      } else {\r\n        return fetchLink(url, context, opt.value, a => callback(Option.some(a)), propUrl)\r\n      }\r\n    },\r\n    (choose) => {\r\n      if (typeof url === \"string\" ) {\r\n        return fetchUrl(url, context).then( wso => {\r\n          return choose(wso).fold(\r\n            () => Promise.reject(new Error(`no choice found for ${wso}`)),\r\n            (typ) => fetchLink(url, context, typ, callback, propUrl)\r\n          )\r\n        })\r\n      } else\r\n        return expectingObjectUrl()\r\n    },\r\n    (pg) => {\r\n      callback(pg.convert(Option.option(propUrl)))\r\n      return Promise.resolve<void>()\r\n    }\r\n  )(jsType)\r\n}\r\n\r\nfunction fetchProperty(context: Context, typeName:string, propertyName:string, propValue:any, parentUrl:string, l: Link | Converter, callback: (v: any) => void):Promise<void> {\r\n  let res:Promise<any>\r\n  if (l instanceof Link) {\r\n\r\n    if ((typeof propValue === \"string\") || Array.isArray(propValue)) {\r\n      res = fetchLink(propValue, context, l.resultType, callback, parentUrl).then( i => Promise.resolve(i), err => {\r\n\r\n      const msg = `error fetching property  ${propertyName} of ${typeName} as link: ${err.message}`\r\n      return Promise.reject(new Error(msg))\r\n    })\r\n    } else {\r\n      res = Promise.reject(new Error(`error fetching property  ${propertyName} of ${typeName} expecting a link got ${propValue}`))\r\n    }\r\n\r\n  } else if (l instanceof Converter) {\r\n\r\n    res = l.conversion(propValue, objectFetcherImpl(context), Option.option(parentUrl)).then(i => {\r\n      callback(i);\r\n      return Promise.resolve(i)\r\n    }, err => {\r\n\r\n      const msg = `error applying conversion of property ${propertyName} of ${typeName}: ${err.message}`\r\n      return Promise.reject(new Error(msg))\r\n    })\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction withObjectCache(url: string, typ:TypeExpr, f:() => Promise<any>, context: Context, callback:(a:any) => void):Promise<void>  {\r\n  function storeCache<T>(url: string, cache: ObjectsCache, typ:TypeExpr, p: Promise<T>): Promise<any> {\r\n    cache.store(url, typ, p)\r\n    return p;\r\n  }\r\n\r\n  return context.cache.get(url, typ).fold(\r\n    () => storeCache(url, context.cache, typ, f()),\r\n    (cacheValue) => {\r\n\r\n      context.promisesToWait.push(cacheValue.then(v => {\r\n        callback(v)\r\n        return v;\r\n      }))\r\n\r\n      return Promise.resolve()\r\n    }\r\n  )\r\n}\r\n\r\nfunction fetchInternal<T>(context: Context, typ: JsConstructor<T>): CallbackFetcher<T> {\r\n\r\n  if (isNull(typ)) throw new Error(`fetchInternal: undefined type`)\r\n\r\n  const linksMeta = typ && getLinksMeta(typ)\r\n  const typExpr = TypeExpr.fromMappingType(typ)\r\n  return {\r\n    fetch: (req: Request, callback: (v: T) => void):Promise<any> => {\r\n\r\n      const prom = () => httpFetch(req, context.httpCache, context.responseReader).then(a => {\r\n        return linksMeta.fold<any>(\r\n          () => {\r\n            const r: T = new typ()\r\n            Object.keys(a).forEach( k => {\r\n              if (isWriteable(r,k)) setProperty(r, k, a[k])\r\n            })\r\n            callback(r)\r\n            return r;\r\n          },\r\n          (linksMeta) => fetchProperties(context, typ, a, req.url).then(u => {\r\n            callback(u);\r\n            return u;\r\n          })\r\n        )\r\n      })\r\n\r\n      return withObjectCache(req.url, typExpr, prom, context, callback)\r\n\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/Fetch.ts\n **/","export interface ResponseReader {\r\n  (resp:Response, req:Request):Promise<any>\r\n}\r\n\r\nfunction parseJson(txt:string):Promise<any> {\r\n  try {\r\n    return Promise.resolve(JSON.parse(txt))\r\n  } catch (e) {\r\n    return Promise.reject(new Error(`Error parsing json ${e.message} json:\\n${txt}`))\r\n  }\r\n}\r\n\r\nfunction statusOk(resp:Response):boolean {\r\n  const st = resp.status\r\n  return (st >= 200 && st <300);\r\n}\r\n\r\nfunction reqDesc(req:Request):string {\r\n  return `${req.method} ${req.url}`\r\n}\r\n\r\nexport const jsonResponseReader:ResponseReader = (resp:Response, req:Request):Promise<any> => {\r\n  if (statusOk(resp)) {\r\n    return resp.text().then(parseJson)\r\n  } else {\r\n    return Promise.reject(new Error(`${reqDesc(req)} return status : ${resp.status}`))\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/ResponseReader.ts\n **/","export interface RequestFactory {\r\n  (url: string): Request\r\n}\r\n\r\nexport function createRequestFactory(reqInit: RequestInit): RequestFactory {\r\n  return url => {\r\n    return new Request(url, reqInit);\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/RequestFactory.ts\n **/","import {JsMap} from \"flib\"\r\nimport {Option} from \"flib\"\r\n\r\nexport interface HttpCache {\r\n  get(req:Request):Option<Promise<any>>\r\n  store(req:Request, promise:Promise<any>):void\r\n}\r\n\r\ntype ByUrlMap = JsMap<Promise<any>>\r\n\r\nexport class ByUrlCache implements HttpCache {\r\n  private cache:ByUrlMap = {}\r\n\r\n  get(req:Request):Option<Promise<any>> {\r\n    return Option.option(this.cache[req.url])\r\n  }\r\n  store(req:Request, promise:Promise<any>):void {\r\n    this.cache[req.url] = promise;\r\n  }\r\n}\r\n\r\nexport const noCache = {\r\n  get(req:Request):Option<Promise<any>> {\r\n    return Option.none<Promise<any>>()\r\n  },\r\n  store(req:Request, promise:Promise<any>):void {\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/cache.ts\n **/","import {lazy, JsMap, Option, isNull, fail} from \"flib\"\r\nimport {ObjectFetcher, PropertyName, PropertyHolder, getOrCreateLinksMeta, ObjectMapping, addObjectMapping} from \"./Meta\"\r\nimport {JsConstructor, MappingType, GetPropertyUrl, isPrimitiveType} from \"./types\"\r\nimport {jsTypeToInternalConversion} from \"./InternalConversion\"\r\nimport {SimpleConverter} from \"./SimpleConverter\"\r\n\r\nexport type ConversionTo<T> = (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>) => Promise<T>\r\nexport type Conversion = ConversionTo<any>\r\n\r\nexport class Converter {\r\n  constructor(public conversion:Conversion, public targetProperty: PropertyName, public resultType?: JsConstructor<any>) {\r\n  }\r\n}\r\n\r\nfunction createConverter(conversion:MappingType, targetProperty: PropertyName, resultType?: JsConstructor<any>) {\r\n  return new Converter(jsTypeToInternalConversion(conversion), targetProperty, resultType)\r\n}\r\n\r\nfunction getPrimitiveSimpleConverter(ct:JsConstructor<any>):SimpleConverter<any,any> {\r\n  return SimpleConverter[\"from\"+ct.name]\r\n}\r\n\r\nexport function convert(ptyp?:MappingType | PropertyHolder, opts?: PropertyHolder) {\r\n  return (target: any, key: string | symbol) => {\r\n    const propType = Reflect.getMetadata(\"design:type\", target, key)\r\n    let typ:MappingType = !isNull(ptyp) && MappingType.isMappingType(ptyp) ?\r\n      ptyp :\r\n      (isNull(propType) ? SimpleConverter.identity : (isPrimitiveType(propType) ? getPrimitiveSimpleConverter(propType): propType));\r\n\r\n    const objLinks: ObjectMapping = getOrCreateLinksMeta(target.constructor)\r\n    const targetProperty = (opts && opts.property) || (ptyp && ptyp[\"property\"]) || key;\r\n    addObjectMapping(objLinks, targetProperty, createConverter(typ, key, propType))\r\n  }\r\n}\r\n\r\nexport function toEnum<T>(a: any, desc: string): (str: String) => T {\r\n  return valueFrom<T>(<any>a, desc);\r\n}\r\n\r\nexport function valueFrom<T>(mp: JsMap<T>, desc: string): (str: String) => T {\r\n  return (str: string) => {\r\n    const r = mp[str];\r\n    if (isNull(r)) throw Error(`${str} is not a ${desc}`)\r\n    return r;\r\n  }\r\n}\r\n\r\nexport const propertyUrl = new GetPropertyUrl<string>(id => id.getOrElse( () => fail<string>(\"missing property url\") ) )\r\nexport const optionalPropertyUrl = new GetPropertyUrl<Option<string>>(id => id)\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/Converter.ts\n **/","import {JsConstructor, MappingType, ArrayMappingType, OptionMappingType, GetPropertyUrl} from \"./types\"\r\nimport {ObjectFetcher} from \"./meta\"\r\nimport {SimpleConverter} from \"./SimpleConverter\"\r\nimport {Selector} from \"./Selector\"\r\nimport {Option, isNull} from \"flib\"\r\nimport {trap} from \"./Util\"\r\n\r\nexport type InternalConversionTo<T> = (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>) => Promise<T>\r\n\r\nfunction failedConversion(msg:string):InternalConversionTo<any> {\r\n  return ():Promise<any>  =>  {\r\n    return Promise.reject(new Error(msg))\r\n  }\r\n}\r\n\r\nexport const jsTypeToInternalConversion:(topts:MappingType) => InternalConversionTo<any> =\r\n  MappingType.fold<InternalConversionTo<any>>(\r\n    (ct) => (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>):Promise<any>  => {\r\n        return objectFetcher(ct, a)\r\n    },\r\n    (s) => (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>):Promise<any[]>  => {\r\n      return trap( () => s.convert(a))\r\n    },\r\n    (arr) => {\r\n      const itmCnv = jsTypeToInternalConversion(arr.arrayOf)\r\n      return (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>):Promise<any[]>  => {\r\n        if (!Array.isArray(a)) return Promise.reject(new Error(\"invalid array ${a}\"))\r\n        else return Promise.all(a.map(i => itmCnv(i, objectFetcher, parentUrl) ))\r\n      }\r\n    },\r\n    (opts) => (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>):Promise<Option<any>>  => {\r\n      if (isNull(a)) return Promise.resolve(Option.none())\r\n      else return objectFetcher(Object, a).then(obj => Option.some(obj))\r\n    },\r\n    (opts) => (a:any, objectFetcher:ObjectFetcher, parentUrl:Option<string>):Promise<any>  => {\r\n      return objectFetcher(Object, a).then( obj => {\r\n        const cnv = opts.convert(obj).map( t =>\r\n          jsTypeToInternalConversion(t) ).getOrElse( () => failedConversion(`invalid ${isNull(opts.description) ? \"choice\" : opts.description}`) )\r\n        return cnv(a, objectFetcher, parentUrl)\r\n      })\r\n    },\r\n    (purl) => (a, ftcr, parUrl):Promise<any> => {\r\n      return trap( () => purl.convert(parUrl) )\r\n    })\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/InternalConversion.ts\n **/","export function trap<T>(f:() => (Promise<T> | T), errorDescription?:((err) => string) | string):Promise<T> {\r\n  try {\r\n    const r = f()\r\n    if (r instanceof Promise) return r\r\n    else return Promise.resolve(r)\r\n  } catch(err) {\r\n    const desc = typeof errorDescription === \"function\" ? errorDescription(err) : errorDescription;\r\n    return Promise.reject(new Error(`${desc || err.message}`))\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/Util.ts\n **/","import {TypeExpr} from \"./TypeExpr\"\r\nimport {EntriesMap, Entry as EEntry} from \"./EntriesMap\"\r\n\r\nexport class ObjectsCache extends EntriesMap<TypeExpr, Promise<any>> {\r\n  constructor() {\r\n    super((a,b) => a.equalTo(b))\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/rest-fetch/src/lib/ObjectsCache.ts\n **/","import {DomainEvent, Path, ByKindChoice, byKindChoice} from \"./model\"\r\nimport {Option} from \"flib\"\r\nimport {link, ByPropertySelector} from \"rest-fetch\"\r\n\r\nexport class Player {\r\n  self: Path\r\n  name: string\r\n}\r\n\r\nexport class CurrentPlayer extends Player {\r\n  webSocket: Path\r\n  createCompetition: Path\r\n}\r\n\r\nexport enum PlayerEventKind {\r\n  playerLogOn, playerLogOff\r\n}\r\n\r\nexport class Team {\r\n  self:Path\r\n  name:string\r\n  @link({ arrayOf:Player })\r\n  players:Player[]\r\n}\r\n\r\nexport type PlayerEvent = PlayerLogOn | PlayerLogOff\r\n\r\nexport class PlayerLogOn implements DomainEvent {\r\n  get eventName() {\r\n     return PlayerEventKind[PlayerEventKind.playerLogOn]\r\n  }\r\n  @link()\r\n  player: Player\r\n}\r\n\r\nexport class PlayerLogOff implements DomainEvent {\r\n  get eventName() {\r\n     return PlayerEventKind[PlayerEventKind.playerLogOff]\r\n  }\r\n  @link()\r\n  player: Player\r\n}\r\n\r\nexport const playerEventChoice = byKindChoice(() =>\r\n  [{\r\n    key:PlayerEventKind[PlayerEventKind.playerLogOn],\r\n    value:PlayerLogOn\r\n  }, {\r\n    key:PlayerEventKind[PlayerEventKind.playerLogOff],\r\n    value:PlayerLogOff\r\n  }], \"player event\")\r\n\r\nexport class PlayersCollection {\r\n  @link({arrayOf:Player})\r\n  members:Player[]\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/player.ts\n **/","import {Option} from \"flib\"\r\nimport {CompetitionState} from \"./competition\"\r\nimport {Path, DomainEvent, ByKindChoice, byKindChoice} from \"./model\"\r\nimport {Player} from \"./player\"\r\nimport {link, convert, ByPropertySelector} from \"rest-fetch\"\r\n\r\nexport enum CompetitionEventKind {\r\n  createdCompetition, confirmedCompetition, playerAccepted, playerDeclined\r\n}\r\n\r\nexport type CompetitionEvent = CompetitionDeclined | CompetitionAccepted | ConfirmedCompetition | CreatedCompetition\r\n\r\nexport class CompetitionDeclined implements DomainEvent {\r\n  get eventName() {\r\n     return CompetitionEventKind[CompetitionEventKind.playerDeclined]\r\n  }\r\n\r\n  @link()\r\n  player: Player\r\n  @link()\r\n  competition: CompetitionState\r\n  reason: Option<string>\r\n}\r\n\r\nexport class CompetitionAccepted implements DomainEvent {\r\n  get eventName() {\r\n     return CompetitionEventKind[CompetitionEventKind.playerAccepted]\r\n  }\r\n  @link()\r\n  player: Player\r\n  @link()\r\n  competition: CompetitionState\r\n}\r\n\r\nexport class ConfirmedCompetition implements DomainEvent {\r\n  get eventName() {\r\n     return CompetitionEventKind[CompetitionEventKind.confirmedCompetition]\r\n  }\r\n  @link()\r\n  competition: CompetitionState\r\n}\r\n\r\nexport class CreatedCompetition implements DomainEvent {\r\n  get eventName() {\r\n     return CompetitionEventKind[CompetitionEventKind.createdCompetition]\r\n  }\r\n  @link()\r\n  issuer: Player\r\n  @link()\r\n  competition: CompetitionState\r\n}\r\n\r\nexport const competitionEventChoice = byKindChoice(() => [{\r\n    key:CompetitionEventKind[CompetitionEventKind.createdCompetition],\r\n    value:CreatedCompetition\r\n  }, {\r\n    key:CompetitionEventKind[CompetitionEventKind.confirmedCompetition],\r\n    value:ConfirmedCompetition\r\n  }, {\r\n    key:CompetitionEventKind[CompetitionEventKind.playerAccepted],\r\n    value:CompetitionAccepted\r\n  }, {\r\n    key:CompetitionEventKind[CompetitionEventKind.playerDeclined],\r\n    value:CompetitionDeclined\r\n  }], \"competition event\")\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/competitionEvents.ts\n **/","import {lazy, Option, JsMap} from \"flib\"\r\nimport {Path, DomainEvent, byKindChoice, ByKindChoice} from \"./model\"\r\nimport {CurrentPlayer, Player} from \"./player\"\r\nimport {link, convert, Converter, JsConstructor, SimpleConverter, ByPropertySelector, Selector} from \"rest-fetch\"\r\n\r\nexport enum GameStateKind {\r\n  active, dropped, finished\r\n}\r\n\r\nexport enum Seed {\r\n  bastoni, coppe, denari, spade\r\n}\r\n\r\nexport enum DropReasonKind {\r\n  playerLeft\r\n}\r\n\r\nconst stringToSeed = SimpleConverter.fromString.andThen(Converter.toEnum(Seed, \"Seed\"))\r\n\r\nexport class Card {\r\n  @convert(stringToSeed)\r\n  seed: Seed\r\n  \"number\": number\r\n  points:number\r\n}\r\n\r\nexport class Move {\r\n  @link()\r\n  player: Player\r\n\r\n  @convert()\r\n  card: Card\r\n}\r\n\r\n\r\nexport class PlayerScore {\r\n  @convert({ arrayOf:Card })\r\n  cards: Card[]\r\n}\r\n\r\nexport class PlayerFinalState {\r\n  @link()\r\n  player: Player\r\n\r\n  points: number\r\n\r\n  @convert()\r\n  score: PlayerScore\r\n}\r\n\r\nexport class PlayerState {\r\n\r\n  @convert(Converter.propertyUrl)\r\n  self: Path\r\n\r\n  @link()\r\n  player: Player\r\n\r\n  @convert({ arrayOf:Card })\r\n  cards: Card[]\r\n\r\n  @convert()\r\n  score: PlayerScore\r\n}\r\n\r\nexport type GameState = FinalGameState | ActiveGameState | DroppedGameState\r\n\r\nexport type GameResult = PlayersGameResult | TeamsGameResult\r\n\r\nexport class PlayersGameResult {\r\n  @convert({ arrayOf:PlayerFinalState })\r\n  playersOrderByPoints: PlayerFinalState[]\r\n\r\n  @convert()\r\n  winner: PlayerFinalState\r\n}\r\n\r\nexport class TeamScore {\r\n  teamName:string\r\n\r\n  @link({ arrayOf:Player })\r\n  players:Player[]\r\n\r\n  @convert({ arrayOf:Card })\r\n  cards:Card[]\r\n\r\n  points:number\r\n}\r\n\r\nexport class TeamsGameResult {\r\n  @convert({ arrayOf:TeamScore })\r\n  teamsOrderByPoints: TeamScore[]\r\n\r\n  @convert()\r\n  winnerTeam: TeamScore\r\n}\r\n\r\nconst gameResultChoice = Selector.byPropertyExists([{ key:\"playersOrderByPoints\", value:PlayersGameResult }, { key:\"teamsOrderByPoints\", value:TeamsGameResult }])\r\n\r\nexport class FinalGameState {\r\n  self: Path\r\n\r\n  @convert()\r\n  briscolaCard: Card\r\n\r\n  @convert(gameResultChoice)\r\n  gameResult:GameResult\r\n  /*\r\n  @convert({ arrayOf:PlayerFinalState })\r\n  playersOrderByPoints: PlayerFinalState[]\r\n\r\n  @convert()\r\n  winner: PlayerFinalState\r\n  */\r\n}\r\n\r\nexport class ActiveGameState {\r\n  self: Path\r\n  @convert()\r\n  briscolaCard: Card\r\n  @convert({ arrayOf:Move })\r\n  moves: Move[]\r\n\r\n  @link({ arrayOf:Player })\r\n  nextPlayers: Player[]\r\n  @link()\r\n  currentPlayer: CurrentPlayer\r\n\r\n  isLastHandTurn: Boolean\r\n  isLastGameTurn: Boolean\r\n\r\n  @link({arrayOf:Player})\r\n  players: Player[]\r\n\r\n  @link({optionOf:PlayerState})\r\n  playerState: Option<PlayerState>\r\n\r\n  deckCardsNumber: number\r\n}\r\n\r\nexport class DropReason {\r\n}\r\n\r\nexport const dropReasonChoice = new Selector( ws => Option.some(PlayerLeft) )\r\n\r\nexport class PlayerLeft extends DropReason {\r\n  @link()\r\n  player:Player\r\n\r\n  @convert(SimpleConverter.optional(SimpleConverter.fromString))\r\n  reason:Option<string>\r\n}\r\n\r\nexport class DroppedGameState {\r\n  self: Path\r\n  briscolaCard: Card\r\n  moves: Move[]\r\n\r\n  @link({arrayOf:Player})\r\n  nextPlayers: Player[]\r\n\r\n  @convert(dropReasonChoice)\r\n  dropReason:DropReason\r\n}\r\n\r\nexport const gameStateChoice = byKindChoice(() => [{\r\n    key:GameStateKind[GameStateKind.active],\r\n    value:ActiveGameState\r\n  }, {\r\n    key:GameStateKind[GameStateKind.dropped],\r\n    value:DroppedGameState\r\n  }, {\r\n    key:GameStateKind[GameStateKind.finished],\r\n    value:FinalGameState\r\n  }], \"game state choice\")\r\n\r\nexport module GameState {\r\n  export function fold<T>(p: GameState,\r\n    activeGameState: (p:ActiveGameState) => T,\r\n    finalGameState: (p:FinalGameState) => T,\r\n    droppedGameState: (p:DroppedGameState) => T ):T {\r\n      if (p instanceof ActiveGameState) return activeGameState(p)\r\n      else if (p instanceof FinalGameState) return finalGameState(p)\r\n      else if (p instanceof DroppedGameState) return droppedGameState(p)\r\n      else {\r\n        console.log(\"unrecognized GameState\")\r\n        console.log(p)\r\n        throw new Error(\"unrecognized GameState \")\r\n      }\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/game.ts\n **/","import {dropReasonChoice, gameStateChoice, GameState, Card, ActiveGameState, DropReason} from \"./game\"\r\nimport {link, convert, ByPropertySelector} from \"rest-fetch\"\r\nimport {DomainEvent, byKindChoice, ByKindChoice} from \"./model\"\r\nimport {Player} from \"./player\"\r\n\r\nexport enum BriscolaEventKind {\r\n  gameStarted, cardPlayed, gameDropped\r\n}\r\n\r\nexport type BriscolaEvent = CardPlayed | GameStarted | GameDropped\r\n\r\nexport class CardPlayed implements DomainEvent {\r\n  get eventName() {\r\n     return BriscolaEventKind[BriscolaEventKind.cardPlayed]\r\n  }\r\n\r\n  @link(gameStateChoice)\r\n  game: GameState\r\n  @link()\r\n  player: Player\r\n  @convert()\r\n  card: Card\r\n}\r\n\r\nexport class GameStarted implements DomainEvent {\r\n  get eventName() {\r\n     return BriscolaEventKind[BriscolaEventKind.gameStarted]\r\n  }\r\n  @convert(ActiveGameState)\r\n  game: ActiveGameState\r\n}\r\n\r\nexport class GameDropped implements DomainEvent {\r\n  get eventName() {\r\n     return BriscolaEventKind[BriscolaEventKind.gameDropped]\r\n  }\r\n  @link(gameStateChoice)\r\n  game: GameState\r\n  @convert(dropReasonChoice)\r\n  dropReason:DropReason\r\n}\r\n\r\nexport const briscolaEventChoice = byKindChoice(() =>\r\n  [{\r\n    key:BriscolaEventKind[BriscolaEventKind.gameStarted],\r\n    value:GameStarted\r\n  }, {\r\n    key:BriscolaEventKind[BriscolaEventKind.cardPlayed],\r\n    value:CardPlayed\r\n  }, {\r\n    key:BriscolaEventKind[BriscolaEventKind.gameDropped],\r\n    value:GameDropped\r\n  }], \"game event\")\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/gameEvents.ts\n **/","import {Path} from \"./model\"\r\n\r\nexport class SiteMap {\r\n\tplayers:Path\r\n\tplayerLogin:Path\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/sitemap.ts\n **/","import {isNull, Option, JsMap} from \"flib\"\r\nimport {GameState, gameStateChoice} from \"./game\"\r\nimport {briscolaEventChoice, BriscolaEvent} from \"./gameEvents\"\r\nimport {competitionStateChoice, CompetitionState} from \"./competition\"\r\nimport {competitionEventChoice, CompetitionEvent} from \"./competitionEvents\"\r\nimport {playerEventChoice, Player, PlayerEvent} from \"./player\"\r\nimport {JsConstructor, convert, Converter, Selector, ByPropertySelector} from \"rest-fetch\"\r\nimport {ByKindChoice} from \"./model\"\r\n\r\nexport type RawEventAndState = { event:RawEvent }\r\nexport type RawEvent = { kind: string }\r\n\r\n/*\r\nexport type RawGame = { kind:string }\r\nexport type RawCompetition = { kind:string }\r\n\r\nexport function byEventNameChoice<T>(desc:string, mp:JsMap<ConstructorType<any>>):(wso:RawEvent) => Option<ConstructorType<T>> {\r\n  return (wso) => Option.option(mp[wso.kind])\r\n}\r\n\r\nconst playerEventChoiceMap = JsMap.create(playerEventChoices())\r\n\r\n// FIXME  make private\r\nexport const gameEventChoiceMap = JsMap.create(briscolaEventChoices())\r\n// FIXME  make private\r\nexport const gameStateChoiceMap = JsMap.create(gameStateChoices())\r\nconst competitionEventChoiceMap = JsMap.create(competitionEventChoices())\r\n\r\nexport const playerEventChoice = Selector.create( byEventNameChoice(\"player event\", playerEventChoiceMap) )\r\nexport const gameEventChoice = Selector.create( byEventNameChoice(\"game event\", gameEventChoiceMap) )\r\nexport const competitionEventChoice = Selector.create( byEventNameChoice(\"competition event\", competitionEventChoiceMap) )\r\n\r\nexport const gameStateChoice = Selector.create(\r\n  (gm:RawGame) => Option.option(gameStateChoiceMap[gm.kind])\r\n)\r\n*/\r\n\r\nexport const eventAndStateChoice = Selector.create(\r\n  (wso:RawEventAndState) => {\r\n    const evName = wso.event && wso.event.kind\r\n    if (playerEventChoice.contains(evName)) return Option.some(PlayerEventAndState)\r\n    else if (briscolaEventChoice.contains(evName)) return Option.some(GameEventAndState)\r\n    else if (competitionEventChoice.contains(evName)) return Option.some(CompetitionEventAndState)\r\n    return Option.none<JsConstructor<any>>();\r\n  })\r\n\r\nexport class PlayerEventAndState {\r\n  @convert(playerEventChoice)\r\n  event:PlayerEvent\r\n\r\n  @convert({ arrayOf:Player }, { property:\"state\" })\r\n  players:Player[]\r\n}\r\n\r\nexport class GameEventAndState {\r\n  @convert(briscolaEventChoice)\r\n  event:BriscolaEvent\r\n\r\n  @convert(gameStateChoice, {property:\"state\"})\r\n  game:GameState\r\n}\r\n\r\nexport class CompetitionEventAndState {\r\n  @convert(competitionEventChoice)\r\n  event:CompetitionEvent\r\n\r\n  @convert(CompetitionState, {property:\"state\"})\r\n  competition:CompetitionState\r\n}\r\n\r\nexport type EventAndState = PlayerEventAndState | GameEventAndState | CompetitionEventAndState\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/EventAndState.ts\n **/","import {Path} from \"./model\"\r\nimport {Seed, Card as ModelCard} from \"./game\"\r\n\r\nexport type MatchKind = string | NumberOfGamesMatchKind | TargetPointsMatchKind\r\n\r\nexport interface NumberOfGamesMatchKind {\r\n  numberOfMatches:number\r\n}\r\n\r\nexport interface TargetPointsMatchKind {\r\n  winnerPoints:number\r\n}\r\n\r\nexport type CompetitionStartDeadline = string | OnPlayerCountDeadline\r\n\r\nexport interface OnPlayerCountDeadline {\r\n  count:number\r\n  kind:string\r\n}\r\n\r\nexport interface Player {\r\n  name:string\r\n  password:string  \r\n}\r\n\r\nexport interface Competition {\r\n  players:Path[]\r\n  kind:MatchKind,\r\n  deadline:CompetitionStartDeadline\r\n}\r\n\r\nexport interface Card {\r\n  seed:string\r\n  \"number\":number  \r\n}\r\n\r\nexport function card(m:ModelCard):Card {\r\n    return {\r\n      number: m.number,\r\n      seed: Seed[m.seed]\r\n    }  \r\n  }\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-model/src/lib/input.ts\n **/","import {Option, isNull} from \"flib\"\r\n\r\nexport module Http {\r\n\r\n\tfunction fetchWithBody<B>(mthd:string):(url:string, body?:B)  =>  Promise<Response> {\r\n      return (url, body) => {\r\n        const bdy = (body !== undefined && body !== null) ? JSON.stringify(body) : undefined\r\n        return window.fetch(url, {\r\n          method:mthd,\r\n          body:bdy\r\n        })\r\n      }\r\n    }\r\n\r\n    export function POST<B>(url:string, body?:B):Promise<Response> {\r\n      return fetchWithBody<B>(\"POST\")(url, body)\r\n    }\r\n\r\n    export function PUT<B>(url:string, body?:B):Promise<Response> {\r\n      return fetchWithBody<B>(\"PUT\")(url, body)\r\n    }\r\n\r\n    export function DELETE(url:string):Promise<Response> {\r\n      return window.fetch(url, {\r\n        method:\"DELETE\"\r\n      })\r\n    }\r\n\r\n}\r\n\r\nexport function observableWebSocket(url:string, protocol?: string | string[]): Rx.Observable<MessageEvent> {\r\n  if (isNull(url)) throw new Error(\"websocket error, url is undefined\")\r\n  if (isNull(WebSocket)) throw new Error(\"websocket error, WebSocket not supported in current environment\")\r\n\r\n  const channel = new Rx.Subject<MessageEvent>();\r\n  const socket = !isNull(protocol) ? new WebSocket(url, protocol) : new WebSocket(url);\r\n\r\n  function showEvent(e:Event) {\r\n    console.log(\"receive from websocket\")\r\n    console.log(e)\r\n  }\r\n\r\n  socket.onclose = showEvent\r\n  socket.onerror = showEvent\r\n  socket.onopen = showEvent\r\n  socket.onmessage = e => {\r\n    showEvent(e)\r\n    channel.onNext(e)\r\n  }\r\n\r\n  return channel;\r\n}\r\n\r\nfunction observableWebSocket1(url:string, protocol?: string | string[]): Rx.Observable<MessageEvent> {\r\n  const channel = new Rx.Subject<MessageEvent>()\r\n  const socket = protocol === undefined ? new WebSocket(url, protocol) : new WebSocket(url);\r\n\r\n  function showEvent(e:Event) {\r\n    console.log(\"receive from websocket\")\r\n    console.log(e)\r\n  }\r\n\r\n  socket.onclose = (e) => {\r\n    showEvent(e)\r\n    channel.onCompleted()\r\n  }\r\n\r\n  socket.onerror = (e) => {\r\n    showEvent(e)\r\n    channel.onError(e)\r\n  }\r\n\r\n  socket.onopen = showEvent\r\n\r\n  socket.onmessage = e => {\r\n    showEvent(e)\r\n    channel.onNext(e)\r\n  }\r\n\r\n  return channel;\r\n}\r\n\r\nexport function rxCollect<T,R>(obs:Rx.Observable<T>, pf:(v:T) => Option<R>):Rx.Observable<R>  {\r\n  return obs.flatMap( v =>\r\n    pf(v).fold(\r\n    () => Rx.Observable.empty<R>(),\r\n    (v) => Rx.Observable.just<R>(v)\r\n    )\r\n  )\r\n}\r\n\r\n/*\r\n* adapted from https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n*/\r\nexport function objectAssign<A,B>(target:A, source:B):A & B {\r\n  if (target === undefined || target === null) {\r\n    throw new TypeError('Cannot convert undefined or null to object');\r\n  }\r\n\r\n  const output = Object(target);\r\n  if (source !== undefined && source !== null) {\r\n    for (const nextKey in source) {\r\n      if (source.hasOwnProperty(nextKey)) {\r\n        output[nextKey] = source[nextKey];\r\n      }\r\n    }\r\n  }\r\n  return output;\r\n}\r\n\r\nexport function copy<A,B>(a:A, b:B):A & B {\r\n  return objectAssign(objectAssign({}, a), b);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/Util.ts\n **/","import {observableWebSocket} from \"./Util\"\r\n\r\nimport * as Util from \"./Util\"\r\nimport {Option, JsMap} from \"flib\"\r\nimport {DomainEvent, Path, Input, eventAndStateChoice,\r\n  GameEventAndState, BriscolaEvent, GameState, BriscolaEventKind, ActiveGameState, FinalGameState, GameStarted, Card, gameStateChoice,\r\n  CompetitionEventAndState, CompetitionEvent, CompetitionState, CompetitionEventKind, CompetitionStateKind,\r\n  PlayerEventAndState, CurrentPlayer, Player, PlayerEvent, PlayerEventKind} from \"ddd-briscola-model\"\r\n\r\nimport {fetch, fetchChoose} from \"rest-fetch\"\r\n\r\nfunction gamesMap(ch: Rx.Observable<GameEventAndState>): (p: Path) => Option<GameState> {\r\n  const mapOfGames: JsMap<GameState> = {}\r\n  const feedGamesMap = (gm: GameState) => {\r\n    if (gm instanceof ActiveGameState) {\r\n      mapOfGames[gm.self] = gm\r\n    } else if (gm instanceof FinalGameState) {\r\n      mapOfGames[gm.self] = gm\r\n    }\r\n  }\r\n  ch.subscribe(es => feedGamesMap(es.game));\r\n  return (p) => Option.option(mapOfGames[p])\r\n}\r\n\r\nfunction competitionsMap(ch: Rx.Observable<CompetitionEventAndState>): (p: Path) => Option<CompetitionState> {\r\n  const compMap: JsMap<CompetitionState> = {}\r\n  ch.subscribe(es => {\r\n    const compState = es.competition;\r\n    if (es.competition.kind === CompetitionStateKind.open) {\r\n      compMap[compState.self] = compState;\r\n    } else {\r\n      delete compMap[compState.self];\r\n    }\r\n  });\r\n  return (p) => Option.option(compMap[p])\r\n}\r\n\r\nfunction asGameEventAndState(a:any):Option<GameEventAndState> {\r\n  if (a instanceof GameEventAndState) return Option.some(a)\r\n  else return Option.none<GameEventAndState>();\r\n}\r\n\r\nfunction asCompetitionEventAndState(a:any):Option<CompetitionEventAndState> {\r\n  if (a instanceof CompetitionEventAndState) return Option.some(a)\r\n  else return Option.none<CompetitionEventAndState>();\r\n}\r\n\r\nfunction asPlayerEventAndState(a:any):Option<PlayerEventAndState> {\r\n  if (a instanceof PlayerEventAndState) return Option.some(a)\r\n  else return Option.none<PlayerEventAndState>();\r\n}\r\n\r\nexport class PlayerService {\r\n  gamesChannel: Rx.Observable<GameEventAndState>\r\n  competitionsChannel: Rx.Observable<CompetitionEventAndState>\r\n  playersChannel: Rx.Observable<PlayerEventAndState>\r\n  eventsLog: Rx.Observable<BriscolaEvent | CompetitionEvent | PlayerEvent>\r\n\r\n  private gamesMap: (p: Path) => Option<GameState>\r\n  private competitionsMap: (p: Path) => Option<CompetitionState>\r\n\r\n\tconstructor(public player:CurrentPlayer) {\r\n\t  const webSocket:Rx.Observable<GameEventAndState | CompetitionEventAndState | PlayerEventAndState> = observableWebSocket(player.webSocket).flatMap((msgEv: MessageEvent) => {\r\n      const data = msgEv.data\r\n      if (typeof data === \"string\") {\r\n        const msg = JSON.parse(data)\r\n        return fetchChoose(eventAndStateChoice).fromObject(msg).then(\r\n          (v) => Promise.resolve(v),\r\n          err => {\r\n            console.log(\"error parsing web socket message\")\r\n            console.log(`error ${err}`)\r\n            if (err && err.stack) console.log(err.stack)\r\n            console.log(data)\r\n            return Promise.reject(`error fetching event and state ${data}, error : ${err}`)\r\n          }\r\n        )\r\n      } else {\r\n        console.log(\"Error\")\r\n        console.log(\"msgEv.data:\")\r\n        console.log(data)\r\n        return Promise.reject(\"expecting string\")\r\n      }\r\n    })\r\n\r\n    this.gamesChannel = Util.rxCollect(webSocket, asGameEventAndState)\r\n    this.competitionsChannel = Util.rxCollect(webSocket, asCompetitionEventAndState)\r\n    this.playersChannel  = Util.rxCollect(webSocket, asPlayerEventAndState)\r\n    this.eventsLog = webSocket.map( es => es.event )\r\n\r\n    this.gamesMap = gamesMap(this.gamesChannel);\r\n    this.competitionsMap = competitionsMap(this.competitionsChannel);\r\n\t}\r\n\r\n  createCompetition(players: Path[], kind: Input.MatchKind, deadlineKind: Input.CompetitionStartDeadline): Promise<CompetitionState> {\r\n    return Util.Http.POST<Input.Competition>(this.player.createCompetition, {\r\n      players: players,\r\n      kind: kind,\r\n      deadline: deadlineKind\r\n    }).then(p => fetch(CompetitionState).fromObject(p))\r\n  }\r\n\r\n  gameChannelById(gameSelf: Path): Rx.Observable<GameEventAndState> {\r\n    return this.gamesChannel.filter(es =>\r\n      (es.game  instanceof ActiveGameState && es.game.self === gameSelf) ||\r\n      (es.game instanceof FinalGameState && es.game.self === gameSelf)\r\n    )\r\n  }\r\n\r\n  playCard(gameSelf: Path, mcard: Card): Option<Promise<GameState>> {\r\n    function playerStateUrl(gm: GameState): Option<Path> {\r\n      if (gm instanceof ActiveGameState) {\r\n        return gm.playerState.map(ps => ps.self)\r\n      } else {\r\n        return Option.none<Path>();\r\n      }\r\n    }\r\n    const card = Input.card(mcard)\r\n    return this.gamesMap(gameSelf).flatMap(gm => {\r\n      const url: Option<Path> = playerStateUrl(gm)\r\n\r\n      return url.map(url => {\r\n        return Util.Http.POST<Input.Card>(url, {\r\n          \"number\": card.number,\r\n          seed: card.seed\r\n        }).then(resp => {\r\n          return resp.json().then( ws => {\r\n            return fetchChoose(gameStateChoice).fromObject(ws)\r\n          })\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  acceptCompetition(compSelf: Path): Option<Promise<CompetitionState>> {\r\n    return this.competitionsMap(compSelf).flatMap(cs =>\r\n      cs.accept.map(url =>\r\n        Util.Http.POST<void>(url).then(resp =>\r\n          resp.json().then( ws =>fetch(CompetitionState).fromObject(ws) )\r\n        )\r\n      )\r\n    )\r\n  }\r\n\r\n  declineCompetition(compSelf: Path): Option<Promise<CompetitionState>> {\r\n    return this.competitionsMap(compSelf).flatMap(cs =>\r\n      cs.decline.map(url =>\r\n        Util.Http.POST<void>(url).then(resp =>\r\n          resp.json().then( ws =>\r\n            fetch(CompetitionState).fromObject(ws)\r\n          )\r\n        )\r\n      )\r\n    )\r\n  }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/PlayerService.ts\n **/","export default class CommandDispatcher<C,S> {\r\n  private currentState:S\r\n  private changesChannel= new Rx.ReplaySubject<S>()\r\n\r\n  constructor(private select:(cmdId:C) => (state:S,command:C, exec:(c:C) => Promise<S>) => Promise<S>, initialState:S) {\r\n    this.currentState = initialState\r\n  }\r\n\r\n  dispatch(command:C):Promise<S> {\r\n    return this.select(command)(this.currentState, command, (cmd) => this.dispatch(cmd) ).then( newState => {\r\n      this.currentState = newState\r\n      this.changesChannel.onNext(newState)\r\n      return newState\r\n    })\r\n  }\r\n\r\n  changes():Rx.Observable<S> {\r\n    return this.changesChannel\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ../~/ddd-briscola-app/src/lib/CommandsDispatcher.ts\n **/","import {Path, Player,Card, CompetitionState, Board} from \"ddd-briscola-model\"\r\nimport {Commands} from \"ddd-briscola-app\"\r\n\r\nimport Command = Commands.Command\r\n\r\nexport interface Clickable {\r\n  onClick?():void  \r\n}\r\n\r\nexport interface StartCompetitionListener {\r\n  onStartCompetition(): void\r\n}\r\n\r\nexport interface PlayerLoginListener {\r\n  onCreatePlayer(name: string, password: string): void\r\n  onPlayerLogin(name: string, password: string): void\r\n}\r\n\r\nexport interface PlayerSelectionListener {\r\n  onPlayerSelection(player: Player, selected: boolean): void\r\n}\r\n\r\nexport interface CompetionJoinListener {\r\n  onAcceptCompetition(cid:CompetitionState):void\r\n  onDeclineCompetition(cid:CompetitionState):void\r\n}\r\n\r\nexport interface CardSelectionListener {\r\n  onSelectedCard(c:Card):void  \r\n}\r\n\r\nexport interface PlayCardListener {\r\n  onPlayCard(c:Card):void  \r\n}\r\n\r\nexport interface PlayerDeckSelectionListener {\r\n  onPlayerDeck(gameId:Path, display:boolean):void  \r\n}\r\n\r\nexport interface GameListener {\r\n  onSelectedGame(gm:Path):void\r\n}\r\n\r\nexport interface BoardListener extends PlayerLoginListener, StartCompetitionListener, PlayerSelectionListener, CompetionJoinListener, GameListener, PlayCardListener, PlayerDeckSelectionListener {\r\n}\r\n\r\nexport function createBoardCommandListener(board: Board, commandListener: (cmd: Command) => void) {\r\n  return {\r\n    board:board,\r\n    onStartCompetition: () => {\r\n      commandListener(new Commands.StartCompetition())\r\n    },\r\n    onCreatePlayer: (name: string, password:string) => {\r\n      commandListener(new Commands.CreatePlayer(name, password))\r\n    },\r\n    onPlayerLogin: (name: string, password:string) => {\r\n      commandListener(new Commands.PlayerLogon(name, password))\r\n    },\r\n    onPlayerSelection: (player: Player, selected: boolean) => {\r\n      commandListener(new Commands.SelectPlayerForCompetition(player.self, selected));\r\n    },\r\n    onAcceptCompetition:(cid:CompetitionState) => {\r\n      commandListener(new Commands.AcceptCompetition(cid.self))\r\n    },\r\n    onDeclineCompetition:(cid:CompetitionState) => {\r\n      commandListener(new Commands.DeclineCompetition(cid.self))\r\n    },\r\n    onSelectedGame:(gm:Path) => {\r\n      commandListener(new Commands.SetCurrentGame(gm))\r\n    },\r\n    onPlayCard:(c:Card) => {\r\n      commandListener(new Commands.PlayCard(c))       \r\n    },\r\n    onPlayerDeck:(game:Path, display:boolean) => {\r\n      commandListener(new Commands.DiplayPlayerDeck(game, display))\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/listeners.ts\n **/","import {isNull} from \"flib\"\r\nimport {GameState, ActiveGameState} from \"ddd-briscola-model\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport {GameListener, BoardListener, StartCompetitionListener, PlayerDeckSelectionListener, PlayCardListener} from \"./listeners\"\r\nimport cssClasses from \"./cssClasses\"\r\nimport {Card, EmptyCard, CardBack} from \"./cards\"\r\nimport {EventsLog} from \"./EventsLog\"\r\nimport {GameResult} from \"./GameResult\"\r\nimport {PlayerDeckSummary} from \"./PlayerDeck\"\r\nimport {PlayerLogin} from \"./PlayerLogin\"\r\nimport {CurrentPlayer, Players} from \"./Players\"\r\n\r\nclass StartCompetition extends React.Component<StartCompetitionListener, void> {\r\n  constructor() {\r\n    super()\r\n  }\r\n  render() {\r\n    const props = this.props\r\n    return (\r\n      <input type=\"button\"\r\n        onClick = { e => props.onStartCompetition() }\r\n        value=\"Create Competition\"></input>\r\n    )\r\n  }\r\n}\r\n\r\nexport interface GameProps<G extends GameState> extends PlayerDeckSelectionListener, PlayCardListener {\r\n  game: G\r\n}\r\n\r\nexport class GameTable extends React.Component<{ game:ActiveGameState }, void> {\r\n  render() {\r\n    const gm = this.props.game\r\n    let elemEvs = gm.moves.map((mv, idx) =>\r\n      <div key={idx}>\r\n        <Card card={mv.card} />\r\n        <span>{mv.player.name}</span>\r\n      </div>\r\n    )\r\n    elemEvs = elemEvs.concat(gm.nextPlayers.map((p, idx) =>\r\n      <div key={idx + gm.moves.length}>\r\n        <EmptyCard />\r\n        <span>{p.name}</span>\r\n      </div>\r\n    ))\r\n    elemEvs.push(\r\n      <div key={gm.nextPlayers.length + gm.moves.length + 1}>\r\n        <Card card={gm.briscolaCard} classes={[cssClasses.halfCard]} />\r\n        <CardBack classes={[cssClasses.halfCard]}/>\r\n        <span>{gm.deckCardsNumber}</span>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={cssClasses.cards}>\r\n        {elemEvs}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport interface BoardProps extends BoardListener {\r\n  board: Model.Board\r\n}\r\n\r\nfunction showCompetitionButton(board: Model.Board): boolean {\r\n  const len = Object.keys(board.competitionSelectedPlayers).length + 1\r\n  return (len >= board.config.minPlayersNumber) && (len <= board.config.maxPlayersNumber)\r\n}\r\n\r\nexport class PlayerCards extends React.Component<GameProps<ActiveGameState>, void> {\r\n  render() {\r\n    const props = this.props\r\n    const gameId = props.game.self\r\n    const playerState = props.game.playerState\r\n    const elems = playerState.map(ps =>\r\n      ps.cards.map((card, idx) => <div key={idx}><Card card={card} onClick={ () => props.onPlayCard(card) } /></div>)\r\n    ).getOrElse(() => [<span key=\"0\">Player has no cards</span>])\r\n\r\n    return (\r\n      <div className={cssClasses.cards}>\r\n        {elems}\r\n        <div>\r\n          <CardBack onClick={ () => props.onPlayerDeck(gameId, true) } />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass Game extends React.Component<GameProps<Model.GameState>, void> {\r\n  render() {\r\n    const props = this.props\r\n    const gm = props.game\r\n    return Model.GameState.fold(gm,\r\n      (gm: Model.ActiveGameState) =>\r\n        <section>\r\n          <GameTable game={gm} />\r\n          <PlayerCards game={gm} onPlayerDeck={props.onPlayerDeck} onPlayCard={props.onPlayCard}/>\r\n        </section>,\r\n      (gm: Model.FinalGameState) =>\r\n        <section>\r\n          <GameResult game={gm} />\r\n        </section>,\r\n      (gm: Model.DroppedGameState) =>\r\n        <section>\r\n          <h1>Dropped Game !!!</h1>\r\n        </section>\r\n    )\r\n  }\r\n}\r\n\r\n\r\ninterface GamesNavProps extends GameListener {\r\n  classes?:string[]\r\n  current:Model.Path\r\n  games:Model.Path[]\r\n}\r\n\r\nclass GamesNav extends React.Component<GamesNavProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const games = props.games\r\n    const clss = ([cssClasses.gamesNav].concat( isNull(props.classes) ? [] : props.classes)).join(\" \")\r\n    return games.length == 0 ?\r\n      <noscript /> :\r\n      <div className={clss}>\r\n        {games.map( (gm, idx) => {\r\n          const selectedClassName = props.current === gm ? cssClasses.selected : \"\"\r\n          return <span className={selectedClassName} onClick={ ev => props.onSelectedGame(gm) } key={gm}>{idx}</span>\r\n        })}\r\n      </div>;\r\n  }\r\n}\r\n\r\nexport class Board extends React.Component<BoardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const board = this.props.board;\r\n\r\n    const gameSection = board.currentGame.map(gm =>\r\n      <section>\r\n        <Game game={gm} onPlayerDeck={props.onPlayerDeck} onPlayCard={props.onPlayCard} />\r\n        <GamesNav current={gm.self} games={Object.keys(board.activeGames)} onSelectedGame={props.onSelectedGame} />\r\n        <GamesNav current={gm.self} games={Object.keys(board.finishedGames)} onSelectedGame={props.onSelectedGame} />\r\n      </section>\r\n    ).getOrElse(() => <noscript /> )\r\n\r\n    const playerDeckDialog = board.viewFlag === Model.ViewFlag.showPlayerCards ?\r\n      board.currentGame.map( gm =>\r\n        Model.GameState.fold(gm,\r\n          (gm) => <PlayerDeckSummary cards={gm.playerState.map(ps => ps.score.cards).getOrElse( () => []) } onClose={ () => props.onPlayerDeck(gm.self, false) } />,\r\n          (gm) => <noscript />,\r\n          (gm) => <noscript /> )\r\n      ).getOrElse( () => <noscript /> ) : <noscript />\r\n\r\n    const startCompetitionButton = showCompetitionButton(board) ? <StartCompetition onStartCompetition={props.onStartCompetition} /> : <noscript />\r\n    return board.player.map(pl => (\r\n      <div>\r\n        {playerDeckDialog}\r\n        <CurrentPlayer {...pl} />\r\n        <Players players={board.players}\r\n          selectedPlayers={ board.competitionSelectedPlayers }\r\n          onPlayerSelection={ props.onPlayerSelection } />\r\n        {startCompetitionButton}\r\n        {gameSection}\r\n        <EventsLog events={board.eventsLog}\r\n          onAcceptCompetition={ props.onAcceptCompetition }\r\n          onDeclineCompetition={ props.onDeclineCompetition }\r\n          onSelectedGame={ props.onSelectedGame } />\r\n      </div>\r\n    )).getOrElse(() => (\r\n      <PlayerLogin onCreatePlayer={ props.onCreatePlayer } onPlayerLogin={ props.onPlayerLogin }/>\r\n    ))\r\n\r\n  }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Board.tsx\n **/","export default  {\r\n  card: \"card\",\r\n  emptyCard: \"card-empty\",\r\n  cardBack: \"card-back\",\r\n  halfCard: \"card-half\",\r\n  cards: \"cards\",\r\n  currentPlayer: \"current-player\",\r\n  players: \"players\",\r\n  createPlayer: \"create-player\",\r\n  eventLog: \"event-log\",\r\n  \r\n  playerDeckLayer:\"player-deck-layer\",\r\n  playerDeckSummary:\"player-deck-summary\",\r\n  \r\n  gamesNav:\"games-nav\",\r\n  \r\n  selected:\"selected\"\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/cssClasses.ts\n **/","import {Option} from \"flib\"\r\nimport {Clickable} from \"./listeners\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport cssClasses from \"./cssClasses\"\r\nimport {isNull} from \"flib\"\r\n\r\nexport interface CardProps extends Clickable {\r\n  classes?: string[]\r\n  key?: string | number\r\n  card: Model.Card\r\n}\r\n\r\nexport class Card extends React.Component<CardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const card = props.card;\r\n    const clss = isNull(props.classes) ? \"\" : props.classes.join(\" \")\r\n    const className = `${cssClasses.card} ${clss} card_${Model.Seed[card.seed]}_${card.number}`\r\n    const extra = isNull(props.key) ? {} : { key: props.key };\r\n    const onClick = (ev) => {\r\n      console.log(\"triggered card onClick\")\r\n      props.onClick && props.onClick()\r\n    }\r\n    return (\r\n      <img\r\n        {...extra}\r\n        className={className}\r\n        onClick={onClick} />\r\n    );\r\n  }\r\n}\r\n\r\nexport interface EmptyCardProps extends Clickable {\r\n  classes?: string[]\r\n}\r\n\r\nexport class EmptyCard extends React.Component<EmptyCardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const clss = isNull(props.classes) ? \"\" : props.classes.join(\" \")\r\n    return (\r\n      <img className={`${cssClasses.card} ${clss} ${cssClasses.emptyCard}`}\r\n        onClick={ev => !isNull(props.onClick) ? props.onClick() : undefined } />\r\n    );\r\n  }\r\n}\r\n\r\nexport class CardBack extends React.Component<EmptyCardProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const clss = isNull(props.classes) ? \"\" : props.classes.join(\" \")\r\n    return (\r\n      <img className={`${cssClasses.card} ${clss} ${cssClasses.cardBack}`}\r\n        onClick={ev => !isNull(props.onClick) ? props.onClick() : undefined } />\r\n    );\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/cards.tsx\n **/","import * as Model from \"ddd-briscola-model\"\r\n\r\nimport {CompetionJoinListener, GameListener} from \"./listeners\"\r\n\r\nimport PlayerEventKind = Model.PlayerEventKind\r\nimport BriscolaEventKind = Model.BriscolaEventKind\r\nimport CompetitionEventKind = Model.CompetitionEventKind\r\nimport cssClasses from \"./cssClasses\"\r\n\r\nexport type EventLogEvent = Model.BriscolaEvent | Model.CompetitionEvent | Model.PlayerEvent\r\n\r\nexport interface EventLogProps extends CompetionJoinListener, GameListener {\r\n  events: EventLogEvent[]\r\n}\r\n\r\nexport class EventsLog extends React.Component<EventLogProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const events = props.events\r\n    const elemEvs = events.map((event, i) => {\r\n      switch (event.eventName) {\r\n        case PlayerEventKind[PlayerEventKind.playerLogOn]: {\r\n          const ev = event as Model.PlayerLogOn\r\n          return (\r\n            <div key={i}>Player <b>{ev.player.name}</b> log on</div>\r\n          )\r\n        }\r\n\r\n        case PlayerEventKind[PlayerEventKind.playerLogOff]: {\r\n          const ev = event as Model.PlayerLogOff\r\n          return (\r\n            <div key={i}>Player <b>{ev.player.name}</b> log off</div>\r\n          )\r\n        }\r\n\r\n        case CompetitionEventKind[CompetitionEventKind.createdCompetition]: {\r\n          const ev = event as Model.CreatedCompetition\r\n          return (\r\n            <div key={i}>\r\n              <p>Player {ev.issuer.name} invited you !!!</p>\r\n              <p>players are {ev.competition.competition.players.map(pl => <b>{pl.name} </b>) } of kind <b>{Model.MatchKindKind[ev.competition.competition.kind.kind]}</b> </p>\r\n              <p>\r\n              {ev.competition.accept.map(url =>\r\n                <button onClick={ clkEv => props.onAcceptCompetition(ev.competition) } key=\"1\" >Accept competiton</button>\r\n              ).getOrElse( () => <noscript /> )}\r\n              {ev.competition.decline.map(url =>\r\n                <button onClick={ clkEv => props.onDeclineCompetition(ev.competition) } key=\"1\" >Decline competiton</button>\r\n              ).getOrElse( () => <noscript /> )}\r\n              </p>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        case BriscolaEventKind[BriscolaEventKind.gameStarted]: {\r\n          const ev = event as Model.GameStarted\r\n          return (\r\n            <div key={i}>\r\n              <a href=\"#\" onClick={ cev => props.onSelectedGame(ev.game.self) } >A game has started</a>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        case BriscolaEventKind[BriscolaEventKind.cardPlayed]: {\r\n          const ev = event as Model.CardPlayed\r\n          return (\r\n            <div key={i}>\r\n              <a href=\"#\" onClick={ cev => props.onSelectedGame(ev.game.self) } >{ev.player.name} played {ev.card.number} {Model.Seed[ev.card.seed]}</a>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        default: {\r\n          return (\r\n            <div key={i}>\r\n              <textarea rows={4} cols={80} defaultValue={JSON.stringify(event)}></textarea>\r\n            </div>\r\n          )\r\n        }\r\n      }\r\n    })\r\n\r\n    return (\r\n      <div className={cssClasses.eventLog}>\r\n        {elemEvs}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/EventsLog.tsx\n **/","import {isNull, Arrays, JsMap, Option} from \"flib\"\r\nimport {Player, GameState, ActiveGameState} from \"ddd-briscola-model\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport {GameListener, BoardListener, PlayerSelectionListener, StartCompetitionListener, PlayerLoginListener, PlayerDeckSelectionListener, PlayCardListener} from \"./listeners\"\r\nimport cssClasses from \"./cssClasses\"\r\nimport {Card, EmptyCard, CardBack} from \"./cards\"\r\nimport {TabPane, TabPaneItem} from \"./TabPane\"\r\nimport {EventsLog} from \"./EventsLog\"\r\nimport {PlayerDeckSummaryCards} from \"./PlayerDeck\"\r\n\r\nfunction playersGameResultTabPaneItems(gameRes:Model.PlayersGameResult):TabPaneItem[] {\r\n  return gameRes.playersOrderByPoints.map( pl => {\r\n    const r:TabPaneItem = {\r\n      activator:(selected:boolean, selectItem:() => void, idx:number) => {\r\n        return <span key={idx}><button onClick={ ev => selectItem() }>{pl.player.name}</button></span>\r\n      },\r\n      content:() => {\r\n        return (\r\n          <div>\r\n            <PlayerDeckSummaryCards cards={pl.score.cards} />\r\n            <div className={cssClasses.playerDeckSummary}>\r\n              <span>{pl.points}</span>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return r;\r\n  })\r\n}\r\n\r\nfunction teamGameResultTabPaneItems(gameRes:Model.TeamsGameResult):TabPaneItem[] {\r\n  return gameRes.teamsOrderByPoints.map( teamScore => {\r\n    const total = teamScore.points\r\n    const r:TabPaneItem = {\r\n      activator:(selected:boolean, selectItem:() => void, idx:number) => {\r\n        return <span key={idx}><button onClick={ ev => selectItem() }>{teamScore.teamName} : {teamScore.players.map( pl => pl.name ).join(\", \")}</button></span>\r\n      },\r\n      content:() => {\r\n        return (\r\n          <div>\r\n            <PlayerDeckSummaryCards cards={teamScore.cards} />\r\n            <div className={cssClasses.playerDeckSummary}>\r\n              <span>{total}</span>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return r;\r\n  })\r\n}\r\n\r\nfunction playersResultsTabPaneItems(gm: Model.FinalGameState):TabPaneItem[] {\r\n  const gmRes = gm.gameResult\r\n  if (gmRes instanceof Model.TeamsGameResult) return teamGameResultTabPaneItems(gmRes)\r\n  else if (gmRes instanceof Model.PlayersGameResult) return playersGameResultTabPaneItems(gmRes)\r\n  throw new Error(\"unexcepted \"+gm)\r\n}\r\n\r\nexport class GameResult extends React.Component<{ game:Model.FinalGameState }, void> {\r\n  render() {\r\n    const props = this.props\r\n    const gm = props.game\r\n    return <TabPane panes={playersResultsTabPaneItems(gm)} />\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/GameResult.tsx\n **/","import ReactElement = React.ReactElement\r\nimport {isNull} from \"flib\"\r\n\r\nexport interface TabPaneProps {\r\n  /**\r\n   * fixme: remove classes, replace with function layout(mainArea, activators) => ReactElement\r\n   */\r\n  classes?:TabPaneClasses\r\n  panes:TabPaneItem[]\r\n}\r\n\r\nexport interface TabPaneClasses {\r\n  container?:string\r\n  mainArea?:string\r\n  activatorsContainer?:string\r\n}\r\n\r\nexport interface TabPaneItem {\r\n  activator(selected:boolean, selectItem:() => void, index:number):ReactElement<any>\r\n  content(index:number):ReactElement<any>\r\n}\r\n\r\nexport interface TabPaneState {\r\n  current:number\r\n}\r\n\r\nexport class TabPane extends React.Component<TabPaneProps, TabPaneState> {\r\n  state = {\r\n    current:0\r\n  }\r\n  render() {\r\n    const props = this.props\r\n    const currIdx = this.state.current\r\n    const curr = props.panes[currIdx]\r\n    const mainArea:ReactElement<any> = isNull(curr) ? (<div>missing pane</div>) : (curr.content(currIdx));\r\n    const activators:ReactElement<any>[] = props.panes.map( (pane, idx) =>\r\n      pane.activator((idx === currIdx), () => { this.setState({ current:idx }) }, idx )\r\n    )\r\n    return (\r\n      <div className={props.classes && props.classes.container || \"\"}>\r\n        <div className={props.classes && props.classes.mainArea || \"\"}>\r\n          {mainArea}\r\n        </div>\r\n        <div className={props.classes && props.classes.activatorsContainer || \"\"}>\r\n          {activators}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/TabPane.tsx\n **/","import {Arrays} from \"flib\"\r\nimport * as Model from \"ddd-briscola-model\"\r\nimport {Card} from \"./cards\"\r\nimport cssClasses from \"./cssClasses\"\r\n\r\nexport interface PlayerDeckProps {\r\n  cards:Model.Card[]\r\n  onClose():void\r\n}\r\n\r\n/*\r\nfunction playerDeckSummaryCards(cards:Model.Card[]):React.ReactElement<any>[] {\r\n  const cardsBySeed = Arrays.groupBy(cards, c => Model.Seed[c.seed])\r\n  return Object.keys(cardsBySeed).map( (seed, idx) => {\r\n    const cards = cardsBySeed[seed];\r\n    cards.sort( (ca, cb) => {\r\n      const r = cb.points - ca.points\r\n      return (r !== 0) ? r : (cb.number - ca.number);\r\n    });\r\n    const total = Arrays.foldLeft(cards, 0, (acc, card) => acc + card.points);\r\n    return (\r\n      <div key={idx} className={cssClasses.playerDeckSummary}>\r\n        <span>{total}</span>\r\n        {cards.map( (card, idx) => <Card key={idx} card={card} /> )}\r\n      </div>\r\n    );\r\n  })\r\n}\r\n*/\r\n\r\nexport class PlayerDeckSummaryCards  extends React.Component<{ cards:Model.Card[] }, void> {\r\n  render() {\r\n    const cards = this.props.cards\r\n    const cardsBySeed = Arrays.groupBy(cards, c => Model.Seed[c.seed])\r\n    const items = Object.keys(cardsBySeed).map( (seed, idx) => {\r\n      const cards = cardsBySeed[seed];\r\n      cards.sort( (ca, cb) => {\r\n        const r = cb.points - ca.points\r\n        return (r !== 0) ? r : (cb.number - ca.number);\r\n      });\r\n      const total = Arrays.foldLeft(cards, 0, (acc, card) => acc + card.points);\r\n      return (\r\n        <div key={idx} className={cssClasses.playerDeckSummary}>\r\n          <span>{total}</span>\r\n          {cards.map( (card, idx) => <Card key={idx} card={card} /> )}\r\n        </div>\r\n      );\r\n    })\r\n    return <div>{items}</div>\r\n  }\r\n}\r\n\r\nexport class PlayerDeckSummary extends React.Component<PlayerDeckProps, void> {\r\n  render() {\r\n    const props = this.props\r\n    const cardsBySeed = Arrays.groupBy(props.cards, c => Model.Seed[c.seed])\r\n    const total = Arrays.foldLeft(props.cards, 0, (acc, card) => acc + card.points)\r\n    return (\r\n      <div>\r\n      <div className={cssClasses.playerDeckLayer}>\r\n        <PlayerDeckSummaryCards cards={props.cards} />\r\n        <div>\r\n          <span>{total}</span>\r\n        </div>\r\n        <div>\r\n          <button onClick={props.onClose}>Close</button>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/PlayerDeck.tsx\n **/","import {PlayerLoginListener} from \"./listeners\"\r\n\r\nexport class PlayerLogin extends React.Component<PlayerLoginListener, void> {\r\n  static playerNameRef = \"playerName\"\r\n  static playerPasswordRef = \"playerPasswordRef\"\r\n  constructor() {\r\n    super()\r\n  }\r\n  private inputRef(nm: string): HTMLInputElement {\r\n    return this.refs[nm] as HTMLInputElement;\r\n  }\r\n  private playerName(): HTMLInputElement {\r\n    return this.inputRef(PlayerLogin.playerNameRef);\r\n  }\r\n  private playerPassword(): HTMLInputElement {\r\n    return this.inputRef(PlayerLogin.playerPasswordRef);\r\n  }\r\n  render() {\r\n    const props = this.props\r\n    return (\r\n      <div className=\"{cssClasses.createPlayer} my-exp-style\">\r\n        <input ref={PlayerLogin.playerNameRef} type=\"text\" ></input>\r\n        <input ref={PlayerLogin.playerPasswordRef} type=\"password\" ></input>\r\n        <input type=\"button\"\r\n          onClick = { e => props.onCreatePlayer(this.playerName().value, this.playerPassword().value) }\r\n          value=\"Create Player\"></input>\r\n        <input type=\"button\"\r\n          onClick = { e => props.onPlayerLogin(this.playerName().value, this.playerPassword().value) }\r\n          value=\"Log in\"></input>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/PlayerLogin.tsx\n **/","import {JsMap} from \"flib\"\r\nimport {Player} from \"ddd-briscola-model\"\r\nimport {PlayerSelectionListener} from \"./listeners\"\r\nimport cssClasses from \"./cssClasses\"\r\n\r\n/*\r\nimport {Card, EmptyCard, CardBack} from \"./cards\"\r\nimport {TabPane, TabPaneItem} from \"./TabPane\"\r\nimport {EventsLog} from \"./EventsLog\"\r\nimport {GameResult} from \"./GameResult\"\r\nimport {PlayerDeckSummary} from \"./PlayerDeck\"\r\nimport {PlayerLogin} from \"./PlayerLogin\"\r\n*/\r\n\r\nexport class CurrentPlayer extends React.Component<Player, void> {\r\n  render() {\r\n    var player = this.props;\r\n    return (\r\n      <div className={cssClasses.currentPlayer}>\r\n        <h5>Current player: </h5>\r\n        <h4>{player.name}</h4>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport interface PlayersProps extends PlayerSelectionListener {\r\n  players: Player[]\r\n  selectedPlayers: JsMap<boolean>\r\n}\r\n\r\nexport class Players extends React.Component<PlayersProps, void> {\r\n  render() {\r\n    const players = this.props.players;\r\n    const selectedPlayers = this.props.selectedPlayers\r\n    const playersElems = players.map((pl, idx) =>\r\n      <div key={idx}>\r\n        <input type=\"checkbox\"\r\n          onChange={ (e) => this.props.onPlayerSelection(pl, !(selectedPlayers[pl.self] === true)) }\r\n          defaultChecked={selectedPlayers[pl.self]}>\r\n          </input>\r\n        <span>{pl.name}</span>\r\n      </div>\r\n    )\r\n    return (\r\n      <div className={cssClasses.players}>\r\n        {playersElems}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Players.tsx\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./styles/App.styl\n ** module id = 54\n ** module chunks = 0\n **/"],"sourceRoot":""}